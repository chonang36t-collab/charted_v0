import{c as P,j as s,u as k,b as F,d as O,r as d,B as x}from"./index-DCuD3XHh.js";import{L as v,U,D as $}from"./DashboardLayout-Dl7t1uB5.js";import{u as E,L as A,R as z}from"./LoadingOverlay-CEZoQqM1.js";import{M as o,T as q,u as B,c as H,R as G}from"./RankingList-Dt6HVAci.js";import{D as I}from"./DashboardHeader-CLjqoNSu.js";import{P as f}from"./pound-sterling-DaYHOEFx.js";import{T as h,U as W}from"./users-ZBRnzPAt.js";import{C as J,a as K,b as Q,d as X}from"./card-BAZ-eILp.js";import"./popover-DcAis7Kp.js";import"./generateCategoricalChart-DZn2t-K_.js";import"./AreaChart-DmQeLqPE.js";import"./progress-HcVbIV49.js";import"./ellipsis-DBT-xpuQ.js";import"./locationUtils-BsfjINon.js";import"./index-3amNeSfr.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=P("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),Z=({metrics:e,selectedMetric:r,onMetricSelect:t,onViewDetails:a})=>s.jsxs("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 w-full",children:[s.jsx(o,{title:"Total Revenue",value:`£${e.revenue.value.toLocaleString()}`,subtitle:e.revenue.text,trend:e.revenue.trend,icon:f,isSelected:r==="revenue",onClick:()=>t==null?void 0:t("revenue"),onViewDetails:()=>a==null?void 0:a("revenue")}),s.jsx(o,{title:"Average Client Pay",value:`£${e.clientPay.value.toFixed(2)}`,subtitle:e.clientPay.text,trend:e.clientPay.trend,icon:h}),s.jsx(o,{title:"Total Cost (Staff Pay)",value:`£${e.staffPay.value.toFixed(2)}`,subtitle:e.staffPay.text,trend:e.staffPay.trend,icon:q,isSelected:r==="cost",onClick:()=>t==null?void 0:t("cost"),onViewDetails:()=>a==null?void 0:a("cost")})]}),_=({salesData:e,selectedMetric:r,onMetricSelect:t,onViewDetails:a})=>{var l;return s.jsxs("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 w-full",children:[s.jsx(o,{title:"Total Shifts",value:(e==null?void 0:e.totalShifts)||0,icon:v,isSelected:r==="shifts",onClick:()=>t==null?void 0:t("shifts"),onViewDetails:()=>a==null?void 0:a("shifts"),subtitle:"Total completed shifts"}),s.jsx(o,{title:"Total Clients",value:(e==null?void 0:e.totalClients)||0,icon:W,isSelected:r==="clients",onClick:()=>t==null?void 0:t("clients"),onViewDetails:()=>a==null?void 0:a("clients"),subtitle:"Distinct active clients"}),s.jsx(o,{title:"Total Employees",value:(e==null?void 0:e.uniqueEmployees)||0,icon:U,isSelected:r==="employees",onClick:()=>t==null?void 0:t("employees"),onViewDetails:()=>a==null?void 0:a("employees"),subtitle:"Active staff members"}),s.jsx(o,{title:"Profit Margin",value:`${((l=e==null?void 0:e.profitMargin)==null?void 0:l.toFixed(1))||0}%`,icon:Y,isSelected:r==="profit",onClick:()=>t==null?void 0:t("profit"),onViewDetails:()=>a==null?void 0:a("profit"),subtitle:"Net profit margin"})]})},cs=()=>{const e=k();F();const{dateRange:r,setDateRange:t}=O(),[a,l]=d.useState(!1),[j,C]=d.useState(r),[c,y]=d.useState([]),[u,b]=d.useState([]),[n,g]=d.useState("revenue"),p=m=>{e(`/dashboard/metrics/${m}`)},{financialData:i,isLoading:N}=E(r,c,u),{topClientsRevenue:R,isLoadingClientsRev:L}=B(r,c,u),T=H(i,r);return s.jsx($,{fullWidth:!0,children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx(I,{dateRange:r,onDateRangeChange:t,calendarOpen:a,onCalendarOpenChange:l,tempDateRange:j,onTempDateRangeChange:C,selectedLocations:c,onLocationsChange:y,selectedSites:u,onSitesChange:b}),s.jsx("div",{className:"flex-1 overflow-auto",children:s.jsxs("div",{className:"px-4 pt-6 pb-6 space-y-4",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-2 px-1 py-1 bg-muted rounded-lg",children:[s.jsxs(x,{variant:"secondary",size:"sm",className:"gap-2 shadow-sm",children:[s.jsx(h,{className:"h-4 w-4"}),"Financial View"]}),s.jsxs(x,{variant:"ghost",size:"sm",className:"gap-2 text-muted-foreground hover:text-foreground",onClick:()=>e("/dashboard/operational"),children:[s.jsx(v,{className:"h-4 w-4"}),"Operational View"]})]})}),N&&s.jsx(A,{}),s.jsx(Z,{metrics:T,selectedMetric:n,onMetricSelect:g,onViewDetails:p}),s.jsx(_,{salesData:i,selectedMetric:n,onMetricSelect:g,onViewDetails:p}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-7",children:[s.jsxs(J,{className:"col-span-5",children:[s.jsx(K,{children:s.jsxs(Q,{children:[n==="revenue"&&"Revenue Overview",n==="cost"&&"Cost Overview",n==="profit"&&"Profit Trend",n==="shifts"&&"Shifts Trend",n==="clients"&&"New vs Returning Clients",n==="employees"&&"Active Employees Trend"]})}),s.jsx(X,{className:"pl-2",children:s.jsx(z,{data:(i==null?void 0:i.timeSeries)||[],aggregationLevel:(i==null?void 0:i.aggregationLevel)||"monthly",selectedMetric:n})})]}),s.jsx("div",{className:"col-span-2 flex flex-col gap-4 h-full",children:s.jsx(G,{title:"Top Clients (Revenue)",data:R,isLoading:L,valueFormatter:m=>`£${m.toLocaleString()}`,icon:s.jsx(f,{className:"h-4 w-4"}),className:"h-full",barColor:"bg-green-500"})})]})]})})]})})};export{cs as FinancialDashboard,cs as default};
