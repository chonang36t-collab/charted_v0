import{c as E,d as q,r as n,j as e,P as M,b as j,e as z,a as G}from"./index-0SE_cq5w.js";import{D as X,C as H,F as Y}from"./DashboardLayout-C-xB61-h.js";import{C as w,a as S,b as U,d as A}from"./card-CPKKkIvo.js";import{B as J}from"./button-CwdnJ0Id.js";import{I as K}from"./input-Jzun15xx.js";import{L as W}from"./label-CS85KrI0.js";import{A as Q}from"./api-DS5URhHX.js";import"./users-DdJ27eel.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=E("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=E("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var P="Progress",C=100,[se,he]=q(P),[re,ae]=se(P),R=n.forwardRef((s,r)=>{const{__scopeProgress:t,value:l=null,max:o,getValueLabel:f=te,...v}=s;(o||o===0)&&!k(o)&&console.error(le(`${o}`,"Progress"));const u=k(o)?o:C;l!==null&&!I(l,u)&&console.error(oe(`${l}`,"Progress"));const d=I(l,u)?l:null,p=h(d)?f(d,u):void 0;return e.jsx(re,{scope:t,value:d,max:u,children:e.jsx(M.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":h(d)?d:void 0,"aria-valuetext":p,role:"progressbar","data-state":L(d,u),"data-value":d??void 0,"data-max":u,...v,ref:r})})});R.displayName=P;var F="ProgressIndicator",D=n.forwardRef((s,r)=>{const{__scopeProgress:t,...l}=s,o=ae(F,t);return e.jsx(M.div,{"data-state":L(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...l,ref:r})});D.displayName=F;function te(s,r){return`${Math.round(s/r*100)}%`}function L(s,r){return s==null?"indeterminate":s===r?"complete":"loading"}function h(s){return typeof s=="number"}function k(s){return h(s)&&!isNaN(s)&&s>0}function I(s,r){return h(s)&&!isNaN(s)&&s<=r&&s>=0}function le(s,r){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${r}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${C}\`.`}function oe(s,r){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${r}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${C} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var T=R,ie=D;const V=n.forwardRef(({className:s,value:r,...t},l)=>e.jsx(T,{ref:l,className:j("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...t,children:e.jsx(ie,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})}));V.displayName=T.displayName;const ne=z("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),y=n.forwardRef(({className:s,variant:r,...t},l)=>e.jsx("div",{ref:l,role:"alert",className:j(ne({variant:r}),s),...t}));y.displayName="Alert";const de=n.forwardRef(({className:s,...r},t)=>e.jsx("h5",{ref:t,className:j("mb-1 font-medium leading-none tracking-tight",s),...r}));de.displayName="AlertTitle";const b=n.forwardRef(({className:s,...r},t)=>e.jsx("div",{ref:t,className:j("text-sm [&_p]:leading-relaxed",s),...r}));b.displayName="AlertDescription";function je(){const[s,r]=n.useState(null),[t,l]=n.useState(!1),[o,f]=n.useState(0),[v,u]=n.useState({}),[d,p]=n.useState("idle"),[$,x]=n.useState(""),N=n.useRef(null),{toast:m}=G(),B=c=>{var i;const a=(i=c.target.files)==null?void 0:i[0];a&&(a.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"||a.type==="application/vnd.ms-excel"||a.name.endsWith(".csv")?(r(a),p("idle"),x("")):(m({title:"Invalid file type",description:"Please upload an Excel file (.xlsx, .xls) or CSV file",variant:"destructive"}),r(null)))},O=async()=>{if(!s)return;l(!0),f(0),p("idle"),x("");const c=new FormData;c.append("file",s);try{const a=new XMLHttpRequest;a.upload.addEventListener("progress",i=>{if(i.lengthComputable){const g=Math.round(i.loaded/i.total*100);f(g)}}),a.addEventListener("load",()=>{if(a.status===200)p("success"),m({title:"Upload successful",description:"Your file has been uploaded and processed successfully"}),r(null),N.current&&(N.current.value="");else{const i=JSON.parse(a.responseText);p("error"),x(i.message||"Upload failed"),m({title:"Upload failed",description:i.message||"There was an error uploading your file",variant:"destructive"})}l(!1)}),a.addEventListener("error",()=>{p("error"),x("Network error occurred"),m({title:"Upload failed",description:"Network error occurred while uploading",variant:"destructive"}),l(!1)}),a.open("POST",Q.UPLOAD),a.send(c)}catch{p("error"),x("An unexpected error occurred"),m({title:"Upload failed",description:"An unexpected error occurred",variant:"destructive"}),l(!1)}},_=c=>{if(c===0)return"0 Bytes";const a=1024,i=["Bytes","KB","MB","GB"],g=Math.floor(Math.log(c)/Math.log(a));return parseFloat((c/Math.pow(a,g)).toFixed(2))+" "+i[g]};return e.jsx(X,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Upload Data"}),e.jsx("p",{className:"text-muted-foreground",children:"Upload your Excel or CSV files to import data into the system"})]}),e.jsxs(w,{children:[e.jsx(S,{children:e.jsxs(U,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"File Upload"]})}),e.jsxs(A,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"file-upload",children:"Select File"}),e.jsx(K,{id:"file-upload",type:"file",ref:N,onChange:B,accept:".xlsx,.xls,.csv",disabled:t}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Supported formats: Excel (.xlsx, .xls) and CSV files"})]}),s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 border rounded-lg",children:[e.jsx(Y,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:_(s.size)})]})]}),t&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Uploading..."}),e.jsxs("span",{children:[o,"%"]})]}),e.jsx(V,{value:o})]}),d==="success"&&e.jsxs(y,{className:"border-green-200 bg-green-50",children:[e.jsx(ee,{className:"h-4 w-4 text-green-600"}),e.jsx(b,{className:"text-green-800",children:"File uploaded successfully! Your data has been processed."})]}),d==="error"&&e.jsxs(y,{className:"border-red-200 bg-red-50",children:[e.jsx(Z,{className:"h-4 w-4 text-red-600"}),e.jsx(b,{className:"text-red-800",children:$})]}),e.jsx(J,{onClick:O,disabled:t||d==="success",className:"w-full",children:t?"Uploading...":"Upload File"})]})]})]}),Object.keys(v).length>0&&e.jsxs(w,{children:[e.jsx(S,{children:e.jsx(U,{children:"Required Columns"})}),e.jsx(A,{children:e.jsx("div",{className:"space-y-4",children:Object.entries(v).map(([c,a])=>e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:c}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(i=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-md text-sm",children:i},i))})]},c))})})]})]})})}export{je as default};
