var Qt=e=>{throw TypeError(e)};var ct=(e,t,s)=>t.has(e)||Qt("Cannot "+s);var c=(e,t,s)=>(ct(e,t,"read from private field"),s?s.call(e):t.get(e)),E=(e,t,s)=>t.has(e)?Qt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),S=(e,t,s,r)=>(ct(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),M=(e,t,s)=>(ct(e,t,"access private method"),s);import{c as Nt,J as un,K as zt,L as G,M as qe,N as Oe,O as Ye,Q as ht,U as qt,V as _s,W as Es,Y as Ps,Z as Yt,$ as Ze,a0 as Wt,a1 as Ds,r as i,a2 as dn,a3 as Ue,j as n,d as L,A as $e,g as et,m as Mt,w as We,P as B,i as w,k as Ke,h as fe,s as Ts,b as hn,R as Os,a4 as pn,q as It,B as fn,C as As,D as Fs,E as ks,F as Ls,x as mn,a5 as Us,G as $s,H as Ks,I as Gs}from"./index-DVUI7rrR.js";import{b as Bs,c as _t,h as Hs,u as Vs,e as Qs,d as zs,D as qs}from"./DashboardLayout-BNHd6rh9.js";import{I as Pe}from"./input-DQxKNbyM.js";import{b as Ys,B as Re}from"./button-Cqkzj-vA.js";import{o as Ws,s as Xt,j as le,u as Xs,t as Js,L as pt,C as Ne,T as Zs,c as er,d as be,f as Q,g as tr,h as A,P as nr,i as sr}from"./types-BLswqbkz.js";import{B as rr}from"./badge-xE3rjC5I.js";import{d as or,D as Jt,a as Zt,b as en,c as tn}from"./dialog-Bz9fU0H8.js";import{L as X}from"./label-XJP9mtWt.js";import{S as Me,a as Ie,b as _e,c as Ee,d as ue}from"./select-BmZjIfbq.js";import{b as xn,C as ar,a as ir}from"./index-hRI1zOgQ.js";import{S as cr}from"./search-Zag778-u.js";import{E as lr}from"./ellipsis-C8pvNsSl.js";import{f as lt}from"./format-CesoQy84.js";import"./users-DW5JheK7.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=Nt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=Nt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=Nt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var F,y,ke,T,de,ye,se,re,Le,je,we,he,pe,oe,Ce,R,De,ft,mt,xt,gt,vt,bt,yt,gn,cn,hr=(cn=class extends un{constructor(t,s){super();E(this,R);E(this,F);E(this,y);E(this,ke);E(this,T);E(this,de);E(this,ye);E(this,se);E(this,re);E(this,Le);E(this,je);E(this,we);E(this,he);E(this,pe);E(this,oe);E(this,Ce,new Set);this.options=s,S(this,F,t),S(this,re,null),S(this,se,zt()),this.options.experimental_prefetchInRender||c(this,se).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(c(this,y).addObserver(this),nn(c(this,y),this.options)?M(this,R,De).call(this):this.updateResult(),M(this,R,gt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return jt(c(this,y),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return jt(c(this,y),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,M(this,R,vt).call(this),M(this,R,bt).call(this),c(this,y).removeObserver(this)}setOptions(t){const s=this.options,r=c(this,y);if(this.options=c(this,F).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof G(this.options.enabled,c(this,y))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");M(this,R,yt).call(this),c(this,y).setOptions(this.options),s._defaulted&&!qe(this.options,s)&&c(this,F).getQueryCache().notify({type:"observerOptionsUpdated",query:c(this,y),observer:this});const o=this.hasListeners();o&&sn(c(this,y),r,this.options,s)&&M(this,R,De).call(this),this.updateResult(),o&&(c(this,y)!==r||G(this.options.enabled,c(this,y))!==G(s.enabled,c(this,y))||Oe(this.options.staleTime,c(this,y))!==Oe(s.staleTime,c(this,y)))&&M(this,R,ft).call(this);const a=M(this,R,mt).call(this);o&&(c(this,y)!==r||G(this.options.enabled,c(this,y))!==G(s.enabled,c(this,y))||a!==c(this,oe))&&M(this,R,xt).call(this,a)}getOptimisticResult(t){const s=c(this,F).getQueryCache().build(c(this,F),t),r=this.createResult(s,t);return fr(this,r)&&(S(this,T,r),S(this,ye,this.options),S(this,de,c(this,y).state)),r}getCurrentResult(){return c(this,T)}trackResult(t,s){return new Proxy(t,{get:(r,o)=>(this.trackProp(o),s==null||s(o),Reflect.get(r,o))})}trackProp(t){c(this,Ce).add(t)}getCurrentQuery(){return c(this,y)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=c(this,F).defaultQueryOptions(t),r=c(this,F).getQueryCache().build(c(this,F),s);return r.fetch().then(()=>this.createResult(r,s))}fetch(t){return M(this,R,De).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),c(this,T)))}createResult(t,s){var z;const r=c(this,y),o=this.options,a=c(this,T),l=c(this,de),x=c(this,ye),d=t!==r?t.state:c(this,ke),{state:h}=t;let u={...h},p=!1,g;if(s._optimisticResults){const P=this.hasListeners(),H=!P&&nn(t,s),U=P&&sn(t,r,s,o);(H||U)&&(u={...u,...Ps(h.data,t.options)}),s._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:v,errorUpdatedAt:C,status:f}=u;g=u.data;let j=!1;if(s.placeholderData!==void 0&&g===void 0&&f==="pending"){let P;a!=null&&a.isPlaceholderData&&s.placeholderData===(x==null?void 0:x.placeholderData)?(P=a.data,j=!0):P=typeof s.placeholderData=="function"?s.placeholderData((z=c(this,we))==null?void 0:z.state.data,c(this,we)):s.placeholderData,P!==void 0&&(f="success",g=Yt(a==null?void 0:a.data,P,s),p=!0)}if(s.select&&g!==void 0&&!j)if(a&&g===(l==null?void 0:l.data)&&s.select===c(this,Le))g=c(this,je);else try{S(this,Le,s.select),g=s.select(g),g=Yt(a==null?void 0:a.data,g,s),S(this,je,g),S(this,re,null)}catch(P){S(this,re,P)}c(this,re)&&(v=c(this,re),g=c(this,je),C=Date.now(),f="error");const I=u.fetchStatus==="fetching",_=f==="pending",D=f==="error",ee=_&&I,ce=g!==void 0,N={status:f,fetchStatus:u.fetchStatus,isPending:_,isSuccess:f==="success",isError:D,isInitialLoading:ee,isLoading:ee,data:g,dataUpdatedAt:u.dataUpdatedAt,error:v,errorUpdatedAt:C,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>d.dataUpdateCount||u.errorUpdateCount>d.errorUpdateCount,isFetching:I,isRefetching:I&&!_,isLoadingError:D&&!ce,isPaused:u.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:D&&ce,isStale:Et(t,s),refetch:this.refetch,promise:c(this,se),isEnabled:G(s.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const P=q=>{N.status==="error"?q.reject(N.error):N.data!==void 0&&q.resolve(N.data)},H=()=>{const q=S(this,se,N.promise=zt());P(q)},U=c(this,se);switch(U.status){case"pending":t.queryHash===r.queryHash&&P(U);break;case"fulfilled":(N.status==="error"||N.data!==U.value)&&H();break;case"rejected":(N.status!=="error"||N.error!==U.reason)&&H();break}}return N}updateResult(){const t=c(this,T),s=this.createResult(c(this,y),this.options);if(S(this,de,c(this,y).state),S(this,ye,this.options),c(this,de).data!==void 0&&S(this,we,c(this,y)),qe(s,t))return;S(this,T,s);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!c(this,Ce).size)return!0;const l=new Set(a??c(this,Ce));return this.options.throwOnError&&l.add("error"),Object.keys(c(this,T)).some(x=>{const m=x;return c(this,T)[m]!==t[m]&&l.has(m)})};M(this,R,gn).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&M(this,R,gt).call(this)}},F=new WeakMap,y=new WeakMap,ke=new WeakMap,T=new WeakMap,de=new WeakMap,ye=new WeakMap,se=new WeakMap,re=new WeakMap,Le=new WeakMap,je=new WeakMap,we=new WeakMap,he=new WeakMap,pe=new WeakMap,oe=new WeakMap,Ce=new WeakMap,R=new WeakSet,De=function(t){M(this,R,yt).call(this);let s=c(this,y).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch(Ye)),s},ft=function(){M(this,R,vt).call(this);const t=Oe(this.options.staleTime,c(this,y));if(ht||c(this,T).isStale||!qt(t))return;const r=_s(c(this,T).dataUpdatedAt,t)+1;S(this,he,setTimeout(()=>{c(this,T).isStale||this.updateResult()},r))},mt=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(c(this,y)):this.options.refetchInterval)??!1},xt=function(t){M(this,R,bt).call(this),S(this,oe,t),!(ht||G(this.options.enabled,c(this,y))===!1||!qt(c(this,oe))||c(this,oe)===0)&&S(this,pe,setInterval(()=>{(this.options.refetchIntervalInBackground||Es.isFocused())&&M(this,R,De).call(this)},c(this,oe)))},gt=function(){M(this,R,ft).call(this),M(this,R,xt).call(this,M(this,R,mt).call(this))},vt=function(){c(this,he)&&(clearTimeout(c(this,he)),S(this,he,void 0))},bt=function(){c(this,pe)&&(clearInterval(c(this,pe)),S(this,pe,void 0))},yt=function(){const t=c(this,F).getQueryCache().build(c(this,F),this.options);if(t===c(this,y))return;const s=c(this,y);S(this,y,t),S(this,ke,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},gn=function(t){Ze.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(c(this,T))}),c(this,F).getQueryCache().notify({query:c(this,y),type:"observerResultsUpdated"})})},cn);function pr(e,t){return G(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function nn(e,t){return pr(e,t)||e.state.data!==void 0&&jt(e,t,t.refetchOnMount)}function jt(e,t,s){if(G(t.enabled,e)!==!1&&Oe(t.staleTime,e)!=="static"){const r=typeof s=="function"?s(e):s;return r==="always"||r!==!1&&Et(e,t)}return!1}function sn(e,t,s,r){return(e!==t||G(r.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&Et(e,s)}function Et(e,t){return G(t.enabled,e)!==!1&&e.isStaleByTime(Oe(t.staleTime,e))}function fr(e,t){return!qe(e.getCurrentResult(),t)}var ae,ie,k,J,Z,Qe,wt,ln,mr=(ln=class extends un{constructor(t,s){super();E(this,Z);E(this,ae);E(this,ie);E(this,k);E(this,J);S(this,ae,t),this.setOptions(s),this.bindMethods(),M(this,Z,Qe).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const s=this.options;this.options=c(this,ae).defaultMutationOptions(t),qe(this.options,s)||c(this,ae).getMutationCache().notify({type:"observerOptionsUpdated",mutation:c(this,k),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Wt(s.mutationKey)!==Wt(this.options.mutationKey)?this.reset():((r=c(this,k))==null?void 0:r.state.status)==="pending"&&c(this,k).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=c(this,k))==null||t.removeObserver(this)}onMutationUpdate(t){M(this,Z,Qe).call(this),M(this,Z,wt).call(this,t)}getCurrentResult(){return c(this,ie)}reset(){var t;(t=c(this,k))==null||t.removeObserver(this),S(this,k,void 0),M(this,Z,Qe).call(this),M(this,Z,wt).call(this)}mutate(t,s){var r;return S(this,J,s),(r=c(this,k))==null||r.removeObserver(this),S(this,k,c(this,ae).getMutationCache().build(c(this,ae),this.options)),c(this,k).addObserver(this),c(this,k).execute(t)}},ae=new WeakMap,ie=new WeakMap,k=new WeakMap,J=new WeakMap,Z=new WeakSet,Qe=function(){var s;const t=((s=c(this,k))==null?void 0:s.state)??Ds();S(this,ie,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},wt=function(t){Ze.batch(()=>{var s,r,o,a,l,x,m,d;if(c(this,J)&&this.hasListeners()){const h=c(this,ie).variables,u=c(this,ie).context;(t==null?void 0:t.type)==="success"?((r=(s=c(this,J)).onSuccess)==null||r.call(s,t.data,h,u),(a=(o=c(this,J)).onSettled)==null||a.call(o,t.data,null,h,u)):(t==null?void 0:t.type)==="error"&&((x=(l=c(this,J)).onError)==null||x.call(l,t.error,h,u),(d=(m=c(this,J)).onSettled)==null||d.call(m,void 0,t.error,h,u))}this.listeners.forEach(h=>{h(c(this,ie))})})},ln),vn=i.createContext(!1),xr=()=>i.useContext(vn);vn.Provider;function gr(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var vr=i.createContext(gr()),br=()=>i.useContext(vr),yr=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},jr=e=>{i.useEffect(()=>{e.clearReset()},[e])},wr=({result:e,errorResetBoundary:t,throwOnError:s,query:r,suspense:o})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(o&&e.data===void 0||dn(s,[e.error,r])),Cr=e=>{if(e.suspense){const t=r=>r==="static"?r:Math.max(r??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...r)=>t(s(...r)):t(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Rr=(e,t)=>e.isLoading&&e.isFetching&&!t,Sr=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,rn=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function Nr(e,t,s){var u,p,g,v,C;const r=xr(),o=br(),a=Ue(),l=a.defaultQueryOptions(e);(p=(u=a.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||p.call(u,l),l._optimisticResults=r?"isRestoring":"optimistic",Cr(l),yr(l,o),jr(o);const x=!a.getQueryCache().get(l.queryHash),[m]=i.useState(()=>new t(a,l)),d=m.getOptimisticResult(l),h=!r&&e.subscribed!==!1;if(i.useSyncExternalStore(i.useCallback(f=>{const j=h?m.subscribe(Ze.batchCalls(f)):Ye;return m.updateResult(),j},[m,h]),()=>m.getCurrentResult(),()=>m.getCurrentResult()),i.useEffect(()=>{m.setOptions(l)},[l,m]),Sr(l,d))throw rn(l,m,o);if(wr({result:d,errorResetBoundary:o,throwOnError:l.throwOnError,query:a.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;if((v=(g=a.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||v.call(g,l,d),l.experimental_prefetchInRender&&!ht&&Rr(d,r)){const f=x?rn(l,m,o):(C=a.getQueryCache().get(l.queryHash))==null?void 0:C.promise;f==null||f.catch(Ye).finally(()=>{m.updateResult()})}return l.notifyOnChangeProps?d:m.trackResult(d)}function bn(e,t){return Nr(e,hr)}function Pt(e,t){const s=Ue(),[r]=i.useState(()=>new mr(s,e));i.useEffect(()=>{r.setOptions(e)},[r,e]);const o=i.useSyncExternalStore(i.useCallback(l=>r.subscribe(Ze.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=i.useCallback((l,x)=>{r.mutate(l,x).catch(Ye)},[r]);if(o.error&&dn(r.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:a,mutateAsync:o.mutate}}const yn=({className:e,...t})=>n.jsx("nav",{role:"navigation","aria-label":"pagination",className:L("mx-auto flex w-full justify-center",e),...t});yn.displayName="Pagination";const jn=i.forwardRef(({className:e,...t},s)=>n.jsx("ul",{ref:s,className:L("flex flex-row items-center gap-1",e),...t}));jn.displayName="PaginationContent";const ze=i.forwardRef(({className:e,...t},s)=>n.jsx("li",{ref:s,className:L("",e),...t}));ze.displayName="PaginationItem";const Dt=({className:e,isActive:t,size:s="icon",...r})=>n.jsx("a",{"aria-current":t?"page":void 0,className:L(Ys({variant:t?"outline":"ghost",size:s}),e),...r});Dt.displayName="PaginationLink";const wn=({className:e,...t})=>n.jsxs(Dt,{"aria-label":"Go to previous page",size:"default",className:L("gap-1 pl-2.5",e),...t,children:[n.jsx(Bs,{className:"h-4 w-4"}),n.jsx("span",{children:"Previous"})]});wn.displayName="PaginationPrevious";const Cn=({className:e,...t})=>n.jsxs(Dt,{"aria-label":"Go to next page",size:"default",className:L("gap-1 pr-2.5",e),...t,children:[n.jsx("span",{children:"Next"}),n.jsx(_t,{className:"h-4 w-4"})]});Cn.displayName="PaginationNext";const Mr=e=>bn({queryKey:["records",e],queryFn:async()=>{const t=new URLSearchParams;t.append("page",e.page.toString()),t.append("limit",e.limit.toString()),e.sort_by&&t.append("sort_by",e.sort_by),e.sort_order&&t.append("sort_order",e.sort_order),e.search&&t.append("search",e.search),e.start&&t.append("start",e.start),e.end&&t.append("end",e.end),e.locations&&t.append("locations",e.locations),e.sites&&t.append("sites",e.sites),e.clients&&t.append("clients",e.clients);const s=await fetch(`${$e.RECORDS}?${t.toString()}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},credentials:"include"});if(!s.ok){const r=await s.json().catch(()=>({}));throw new Error(r.error||"Failed to fetch records")}return s.json()},placeholderData:t=>t}),Ir=()=>bn({queryKey:["records-options"],queryFn:async()=>{const e=await fetch(`${$e.RECORDS}/options`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!e.ok)throw new Error("Failed to fetch options");return e.json()}}),_r=()=>{const e=Ue();return Pt({mutationFn:async t=>{const s=await fetch($e.RECORDS,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify(t)});if(!s.ok){const r=await s.json();throw new Error(r.error||"Failed to create record")}return s.json()},onSuccess:()=>{e.invalidateQueries({queryKey:["records"]})}})},Er=()=>{const e=Ue();return Pt({mutationFn:async t=>{const{id:s,...r}=t,o=await fetch(`${$e.RECORDS}/${s}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify(r)});if(!o.ok){const a=await o.json();throw new Error(a.error||"Failed to update record")}return o.json()},onSuccess:()=>{e.invalidateQueries({queryKey:["records"]})}})},Pr=()=>{const e=Ue();return Pt({mutationFn:async t=>{const s=await fetch(`${$e.RECORDS}/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!s.ok){const r=await s.json();throw new Error(r.error||"Failed to delete record")}return s.json()},onSuccess:()=>{e.invalidateQueries({queryKey:["records"]})}})};var tt="Collapsible",[Dr,Pa]=et(tt),[Tr,Tt]=Dr(tt),Rn=i.forwardRef((e,t)=>{const{__scopeCollapsible:s,open:r,defaultOpen:o,disabled:a,onOpenChange:l,...x}=e,[m,d]=Mt({prop:r,defaultProp:o??!1,onChange:l,caller:tt});return n.jsx(Tr,{scope:s,disabled:a,contentId:We(),open:m,onOpenToggle:i.useCallback(()=>d(h=>!h),[d]),children:n.jsx(B.div,{"data-state":At(m),"data-disabled":a?"":void 0,...x,ref:t})})});Rn.displayName=tt;var Sn="CollapsibleTrigger",Nn=i.forwardRef((e,t)=>{const{__scopeCollapsible:s,...r}=e,o=Tt(Sn,s);return n.jsx(B.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":At(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...r,ref:t,onClick:w(e.onClick,o.onOpenToggle)})});Nn.displayName=Sn;var Ot="CollapsibleContent",Or=i.forwardRef((e,t)=>{const{forceMount:s,...r}=e,o=Tt(Ot,e.__scopeCollapsible);return n.jsx(Ke,{present:s||o.open,children:({present:a})=>n.jsx(Ar,{...r,ref:t,present:a})})});Or.displayName=Ot;var Ar=i.forwardRef((e,t)=>{const{__scopeCollapsible:s,present:r,children:o,...a}=e,l=Tt(Ot,s),[x,m]=i.useState(r),d=i.useRef(null),h=fe(t,d),u=i.useRef(0),p=u.current,g=i.useRef(0),v=g.current,C=l.open||x,f=i.useRef(C),j=i.useRef(void 0);return i.useEffect(()=>{const I=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(I)},[]),Ts(()=>{const I=d.current;if(I){j.current=j.current||{transitionDuration:I.style.transitionDuration,animationName:I.style.animationName},I.style.transitionDuration="0s",I.style.animationName="none";const _=I.getBoundingClientRect();u.current=_.height,g.current=_.width,f.current||(I.style.transitionDuration=j.current.transitionDuration,I.style.animationName=j.current.animationName),m(r)}},[l.open,r]),n.jsx(B.div,{"data-state":At(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!C,...a,ref:h,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...e.style},children:C&&o})});function At(e){return e?"open":"closed"}var Fr=Rn;const kr=Fr,Lr=Nn,Ur=Ws({date:Xt().min(1,"Date is required"),employeeId:le.number().min(1,"Employee is required"),clientId:le.number().min(1,"Client is required"),jobId:le.number().min(1,"Job is required"),shiftId:le.number().min(1,"Shift is required"),hours:le.number().min(.1,"Hours must be greater than 0"),hourRate:le.number().optional(),clientHourlyRate:le.number().optional(),jobStatus:Xt().optional()}),on=({record:e,onSuccess:t,onCancel:s})=>{const{role:r}=hn(),o=r==="admin",{data:a,isLoading:l}=Ir(),x=_r(),m=Er(),d=Xs({resolver:Js(Ur),defaultValues:{date:(e==null?void 0:e.date)||new Date().toISOString().split("T")[0],employeeId:void 0,clientId:void 0,jobId:void 0,shiftId:void 0,hours:(e==null?void 0:e.paidHours)||0,hourRate:(e==null?void 0:e.hourRate)||0,clientHourlyRate:(e==null?void 0:e.clientHourlyRate)||0,jobStatus:(e==null?void 0:e.jobStatus)||"Completed"}});Os.useEffect(()=>{if(e&&a){const p=a.employees.find(f=>f.name===e.fullName);p&&d.setValue("employeeId",p.id);const g=a.clients.find(f=>f.name===e.clientName);g&&d.setValue("clientId",g.id);const v=a.jobs.find(f=>f.name===e.jobName&&f.site===e.site);if(v)d.setValue("jobId",v.id);else{const f=a.jobs.find(j=>j.site===e.site&&j.location===e.location);f&&d.setValue("jobId",f.id)}const C=a.shifts.find(f=>f.name===e.shiftName);C&&d.setValue("shiftId",C.id)}},[e,a,d]);const h=p=>{e?m.mutate({id:e.id,...p},{onSuccess:()=>{t()}}):x.mutate(p,{onSuccess:()=>{t()}})},u=x.isPending||m.isPending;return l?n.jsx("div",{className:"flex justify-center p-4",children:n.jsx(pt,{className:"animate-spin"})}):n.jsxs("form",{onSubmit:d.handleSubmit(h),className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(X,{htmlFor:"date",children:"Date"}),n.jsx(Pe,{id:"date",type:"date",...d.register("date")}),d.formState.errors.date&&n.jsx("span",{className:"text-red-500 text-xs",children:d.formState.errors.date.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(X,{htmlFor:"hours",children:"Hours"}),n.jsx(Pe,{id:"hours",type:"number",step:"0.1",...d.register("hours")}),d.formState.errors.hours&&n.jsx("span",{className:"text-red-500 text-xs",children:d.formState.errors.hours.message})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(X,{children:"Employee"}),n.jsx(Ne,{control:d.control,name:"employeeId",render:({field:p})=>{var g;return n.jsxs(Me,{onValueChange:p.onChange,value:(g=p.value)==null?void 0:g.toString(),children:[n.jsx(Ie,{children:n.jsx(_e,{placeholder:"Select Employee"})}),n.jsx(Ee,{children:a==null?void 0:a.employees.map(v=>n.jsx(ue,{value:v.id.toString(),children:v.name},v.id))})]})}}),d.formState.errors.employeeId&&n.jsx("span",{className:"text-red-500 text-xs",children:d.formState.errors.employeeId.message})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(X,{children:"Client"}),n.jsx(Ne,{control:d.control,name:"clientId",render:({field:p})=>{var g;return n.jsxs(Me,{onValueChange:p.onChange,value:(g=p.value)==null?void 0:g.toString(),children:[n.jsx(Ie,{children:n.jsx(_e,{placeholder:"Select Client"})}),n.jsx(Ee,{children:a==null?void 0:a.clients.map(v=>n.jsx(ue,{value:v.id.toString(),children:v.name},v.id))})]})}}),d.formState.errors.clientId&&n.jsx("span",{className:"text-red-500 text-xs",children:d.formState.errors.clientId.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(X,{children:"Job / Site"}),n.jsx(Ne,{control:d.control,name:"jobId",render:({field:p})=>{var g;return n.jsxs(Me,{onValueChange:p.onChange,value:(g=p.value)==null?void 0:g.toString(),children:[n.jsx(Ie,{children:n.jsx(_e,{placeholder:"Select Job"})}),n.jsx(Ee,{children:a==null?void 0:a.jobs.map(v=>n.jsxs(ue,{value:v.id.toString(),children:[v.site," (",v.location,")"]},v.id))})]})}}),d.formState.errors.jobId&&n.jsx("span",{className:"text-red-500 text-xs",children:d.formState.errors.jobId.message})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(X,{children:"Shift"}),n.jsx(Ne,{control:d.control,name:"shiftId",render:({field:p})=>{var g;return n.jsxs(Me,{onValueChange:p.onChange,value:(g=p.value)==null?void 0:g.toString(),children:[n.jsx(Ie,{children:n.jsx(_e,{placeholder:"Select Shift"})}),n.jsx(Ee,{children:a==null?void 0:a.shifts.map(v=>n.jsxs(ue,{value:v.id.toString(),children:[v.name," (",v.start,"-",v.end,")"]},v.id))})]})}}),d.formState.errors.shiftId&&n.jsx("span",{className:"text-red-500 text-xs",children:d.formState.errors.shiftId.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(X,{children:"Status"}),n.jsx(Ne,{control:d.control,name:"jobStatus",render:({field:p})=>n.jsxs(Me,{onValueChange:p.onChange,value:p.value,children:[n.jsx(Ie,{children:n.jsx(_e,{placeholder:"Status"})}),n.jsxs(Ee,{children:[n.jsx(ue,{value:"Completed",children:"Completed"}),n.jsx(ue,{value:"Cancelled",children:"Cancelled"}),n.jsx(ue,{value:"Pending",children:"Pending"})]})]})})]})]}),o&&n.jsxs("div",{className:"grid grid-cols-2 gap-4 border-t pt-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(X,{htmlFor:"hourRate",children:"Pay Rate (£)"}),n.jsx(Pe,{id:"hourRate",type:"number",step:"0.01",...d.register("hourRate")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(X,{htmlFor:"clientHourlyRate",children:"Charge Rate (£)"}),n.jsx(Pe,{id:"clientHourlyRate",type:"number",step:"0.01",...d.register("clientHourlyRate")})]})]}),n.jsxs(or,{className:"mt-6",children:[n.jsx(Re,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),n.jsxs(Re,{type:"submit",disabled:u,children:[u&&n.jsx(pt,{className:"mr-2 h-4 w-4 animate-spin"}),e?"Update Record":"Create Record"]})]})]})};var dt="rovingFocusGroup.onEntryFocus",$r={bubbles:!1,cancelable:!0},Ge="RovingFocusGroup",[Ct,Mn,Kr]=pn(Ge),[Gr,In]=et(Ge,[Kr]),[Br,Hr]=Gr(Ge),_n=i.forwardRef((e,t)=>n.jsx(Ct.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(Ct.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(Vr,{...e,ref:t})})}));_n.displayName=Ge;var Vr=i.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,orientation:r,loop:o=!1,dir:a,currentTabStopId:l,defaultCurrentTabStopId:x,onCurrentTabStopIdChange:m,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...u}=e,p=i.useRef(null),g=fe(t,p),v=xn(a),[C,f]=Mt({prop:l,defaultProp:x??null,onChange:m,caller:Ge}),[j,I]=i.useState(!1),_=It(d),D=Mn(s),ee=i.useRef(!1),[ce,te]=i.useState(0);return i.useEffect(()=>{const N=p.current;if(N)return N.addEventListener(dt,_),()=>N.removeEventListener(dt,_)},[_]),n.jsx(Br,{scope:s,orientation:r,dir:v,loop:o,currentTabStopId:C,onItemFocus:i.useCallback(N=>f(N),[f]),onItemShiftTab:i.useCallback(()=>I(!0),[]),onFocusableItemAdd:i.useCallback(()=>te(N=>N+1),[]),onFocusableItemRemove:i.useCallback(()=>te(N=>N-1),[]),children:n.jsx(B.div,{tabIndex:j||ce===0?-1:0,"data-orientation":r,...u,ref:g,style:{outline:"none",...e.style},onMouseDown:w(e.onMouseDown,()=>{ee.current=!0}),onFocus:w(e.onFocus,N=>{const z=!ee.current;if(N.target===N.currentTarget&&z&&!j){const P=new CustomEvent(dt,$r);if(N.currentTarget.dispatchEvent(P),!P.defaultPrevented){const H=D().filter(Y=>Y.focusable),U=H.find(Y=>Y.active),q=H.find(Y=>Y.id===C),ot=[U,q,...H].filter(Boolean).map(Y=>Y.ref.current);Dn(ot,h)}}ee.current=!1}),onBlur:w(e.onBlur,()=>I(!1))})})}),En="RovingFocusGroupItem",Pn=i.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,focusable:r=!0,active:o=!1,tabStopId:a,children:l,...x}=e,m=We(),d=a||m,h=Hr(En,s),u=h.currentTabStopId===d,p=Mn(s),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:C}=h;return i.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),n.jsx(Ct.ItemSlot,{scope:s,id:d,focusable:r,active:o,children:n.jsx(B.span,{tabIndex:u?0:-1,"data-orientation":h.orientation,...x,ref:t,onMouseDown:w(e.onMouseDown,f=>{r?h.onItemFocus(d):f.preventDefault()}),onFocus:w(e.onFocus,()=>h.onItemFocus(d)),onKeyDown:w(e.onKeyDown,f=>{if(f.key==="Tab"&&f.shiftKey){h.onItemShiftTab();return}if(f.target!==f.currentTarget)return;const j=qr(f,h.orientation,h.dir);if(j!==void 0){if(f.metaKey||f.ctrlKey||f.altKey||f.shiftKey)return;f.preventDefault();let _=p().filter(D=>D.focusable).map(D=>D.ref.current);if(j==="last")_.reverse();else if(j==="prev"||j==="next"){j==="prev"&&_.reverse();const D=_.indexOf(f.currentTarget);_=h.loop?Yr(_,D+1):_.slice(D+1)}setTimeout(()=>Dn(_))}}),children:typeof l=="function"?l({isCurrentTabStop:u,hasTabStop:C!=null}):l})})});Pn.displayName=En;var Qr={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function zr(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function qr(e,t,s){const r=zr(e.key,s);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Qr[r]}function Dn(e,t=!1){const s=document.activeElement;for(const r of e)if(r===s||(r.focus({preventScroll:t}),document.activeElement!==s))return}function Yr(e,t){return e.map((s,r)=>e[(t+r)%e.length])}var Wr=_n,Xr=Pn,Rt=["Enter"," "],Jr=["ArrowDown","PageUp","Home"],Tn=["ArrowUp","PageDown","End"],Zr=[...Jr,...Tn],eo={ltr:[...Rt,"ArrowRight"],rtl:[...Rt,"ArrowLeft"]},to={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Be="Menu",[Ae,no,so]=pn(Be),[me,On]=et(Be,[so,fn,In]),nt=fn(),An=In(),[ro,xe]=me(Be),[oo,He]=me(Be),Fn=e=>{const{__scopeMenu:t,open:s=!1,children:r,dir:o,onOpenChange:a,modal:l=!0}=e,x=nt(t),[m,d]=i.useState(null),h=i.useRef(!1),u=It(a),p=xn(o);return i.useEffect(()=>{const g=()=>{h.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>h.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),n.jsx($s,{...x,children:n.jsx(ro,{scope:t,open:s,onOpenChange:u,content:m,onContentChange:d,children:n.jsx(oo,{scope:t,onClose:i.useCallback(()=>u(!1),[u]),isUsingKeyboardRef:h,dir:p,modal:l,children:r})})})};Fn.displayName=Be;var ao="MenuAnchor",Ft=i.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e,o=nt(s);return n.jsx(As,{...o,...r,ref:t})});Ft.displayName=ao;var kt="MenuPortal",[io,kn]=me(kt,{forceMount:void 0}),Ln=e=>{const{__scopeMenu:t,forceMount:s,children:r,container:o}=e,a=xe(kt,t);return n.jsx(io,{scope:t,forceMount:s,children:n.jsx(Ke,{present:s||a.open,children:n.jsx(Ks,{asChild:!0,container:o,children:r})})})};Ln.displayName=kt;var K="MenuContent",[co,Lt]=me(K),Un=i.forwardRef((e,t)=>{const s=kn(K,e.__scopeMenu),{forceMount:r=s.forceMount,...o}=e,a=xe(K,e.__scopeMenu),l=He(K,e.__scopeMenu);return n.jsx(Ae.Provider,{scope:e.__scopeMenu,children:n.jsx(Ke,{present:r||a.open,children:n.jsx(Ae.Slot,{scope:e.__scopeMenu,children:l.modal?n.jsx(lo,{...o,ref:t}):n.jsx(uo,{...o,ref:t})})})})}),lo=i.forwardRef((e,t)=>{const s=xe(K,e.__scopeMenu),r=i.useRef(null),o=fe(t,r);return i.useEffect(()=>{const a=r.current;if(a)return Hs(a)},[]),n.jsx(Ut,{...e,ref:o,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:w(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)})}),uo=i.forwardRef((e,t)=>{const s=xe(K,e.__scopeMenu);return n.jsx(Ut,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),ho=Gs("MenuContent.ScrollLock"),Ut=i.forwardRef((e,t)=>{const{__scopeMenu:s,loop:r=!1,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:l,disableOutsidePointerEvents:x,onEntryFocus:m,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:u,onInteractOutside:p,onDismiss:g,disableOutsideScroll:v,...C}=e,f=xe(K,s),j=He(K,s),I=nt(s),_=An(s),D=no(s),[ee,ce]=i.useState(null),te=i.useRef(null),N=fe(t,te,f.onContentChange),z=i.useRef(0),P=i.useRef(""),H=i.useRef(0),U=i.useRef(null),q=i.useRef("right"),Ve=i.useRef(0),ot=v?zs:i.Fragment,Y=v?{as:ho,allowPinchZoom:!0}:void 0,Is=b=>{var ve,Ht;const $=P.current+b,V=D().filter(W=>!W.disabled),ne=document.activeElement,at=(ve=V.find(W=>W.ref.current===ne))==null?void 0:ve.textValue,it=V.map(W=>W.textValue),Bt=Ro(it,$,at),Se=(Ht=V.find(W=>W.textValue===Bt))==null?void 0:Ht.ref.current;(function W(Vt){P.current=Vt,window.clearTimeout(z.current),Vt!==""&&(z.current=window.setTimeout(()=>W(""),1e3))})($),Se&&setTimeout(()=>Se.focus())};i.useEffect(()=>()=>window.clearTimeout(z.current),[]),Vs();const ge=i.useCallback(b=>{var V,ne;return q.current===((V=U.current)==null?void 0:V.side)&&No(b,(ne=U.current)==null?void 0:ne.area)},[]);return n.jsx(co,{scope:s,searchRef:P,onItemEnter:i.useCallback(b=>{ge(b)&&b.preventDefault()},[ge]),onItemLeave:i.useCallback(b=>{var $;ge(b)||(($=te.current)==null||$.focus(),ce(null))},[ge]),onTriggerLeave:i.useCallback(b=>{ge(b)&&b.preventDefault()},[ge]),pointerGraceTimerRef:H,onPointerGraceIntentChange:i.useCallback(b=>{U.current=b},[]),children:n.jsx(ot,{...Y,children:n.jsx(Qs,{asChild:!0,trapped:o,onMountAutoFocus:w(a,b=>{var $;b.preventDefault(),($=te.current)==null||$.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:n.jsx(Fs,{asChild:!0,disableOutsidePointerEvents:x,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:u,onInteractOutside:p,onDismiss:g,children:n.jsx(Wr,{asChild:!0,..._,dir:j.dir,orientation:"vertical",loop:r,currentTabStopId:ee,onCurrentTabStopIdChange:ce,onEntryFocus:w(m,b=>{j.isUsingKeyboardRef.current||b.preventDefault()}),preventScrollOnEntryFocus:!0,children:n.jsx(ks,{role:"menu","aria-orientation":"vertical","data-state":ts(f.open),"data-radix-menu-content":"",dir:j.dir,...I,...C,ref:N,style:{outline:"none",...C.style},onKeyDown:w(C.onKeyDown,b=>{const V=b.target.closest("[data-radix-menu-content]")===b.currentTarget,ne=b.ctrlKey||b.altKey||b.metaKey,at=b.key.length===1;V&&(b.key==="Tab"&&b.preventDefault(),!ne&&at&&Is(b.key));const it=te.current;if(b.target!==it||!Zr.includes(b.key))return;b.preventDefault();const Se=D().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);Tn.includes(b.key)&&Se.reverse(),wo(Se)}),onBlur:w(e.onBlur,b=>{b.currentTarget.contains(b.target)||(window.clearTimeout(z.current),P.current="")}),onPointerMove:w(e.onPointerMove,Fe(b=>{const $=b.target,V=Ve.current!==b.clientX;if(b.currentTarget.contains($)&&V){const ne=b.clientX>Ve.current?"right":"left";q.current=ne,Ve.current=b.clientX}}))})})})})})})});Un.displayName=K;var po="MenuGroup",$t=i.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e;return n.jsx(B.div,{role:"group",...r,ref:t})});$t.displayName=po;var fo="MenuLabel",$n=i.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e;return n.jsx(B.div,{...r,ref:t})});$n.displayName=fo;var Xe="MenuItem",an="menu.itemSelect",st=i.forwardRef((e,t)=>{const{disabled:s=!1,onSelect:r,...o}=e,a=i.useRef(null),l=He(Xe,e.__scopeMenu),x=Lt(Xe,e.__scopeMenu),m=fe(t,a),d=i.useRef(!1),h=()=>{const u=a.current;if(!s&&u){const p=new CustomEvent(an,{bubbles:!0,cancelable:!0});u.addEventListener(an,g=>r==null?void 0:r(g),{once:!0}),Us(u,p),p.defaultPrevented?d.current=!1:l.onClose()}};return n.jsx(Kn,{...o,ref:m,disabled:s,onClick:w(e.onClick,h),onPointerDown:u=>{var p;(p=e.onPointerDown)==null||p.call(e,u),d.current=!0},onPointerUp:w(e.onPointerUp,u=>{var p;d.current||(p=u.currentTarget)==null||p.click()}),onKeyDown:w(e.onKeyDown,u=>{const p=x.searchRef.current!=="";s||p&&u.key===" "||Rt.includes(u.key)&&(u.currentTarget.click(),u.preventDefault())})})});st.displayName=Xe;var Kn=i.forwardRef((e,t)=>{const{__scopeMenu:s,disabled:r=!1,textValue:o,...a}=e,l=Lt(Xe,s),x=An(s),m=i.useRef(null),d=fe(t,m),[h,u]=i.useState(!1),[p,g]=i.useState("");return i.useEffect(()=>{const v=m.current;v&&g((v.textContent??"").trim())},[a.children]),n.jsx(Ae.ItemSlot,{scope:s,disabled:r,textValue:o??p,children:n.jsx(Xr,{asChild:!0,...x,focusable:!r,children:n.jsx(B.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:d,onPointerMove:w(e.onPointerMove,Fe(v=>{r?l.onItemLeave(v):(l.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:w(e.onPointerLeave,Fe(v=>l.onItemLeave(v))),onFocus:w(e.onFocus,()=>u(!0)),onBlur:w(e.onBlur,()=>u(!1))})})})}),mo="MenuCheckboxItem",Gn=i.forwardRef((e,t)=>{const{checked:s=!1,onCheckedChange:r,...o}=e;return n.jsx(zn,{scope:e.__scopeMenu,checked:s,children:n.jsx(st,{role:"menuitemcheckbox","aria-checked":Je(s)?"mixed":s,...o,ref:t,"data-state":Gt(s),onSelect:w(o.onSelect,()=>r==null?void 0:r(Je(s)?!0:!s),{checkForDefaultPrevented:!1})})})});Gn.displayName=mo;var Bn="MenuRadioGroup",[xo,go]=me(Bn,{value:void 0,onValueChange:()=>{}}),Hn=i.forwardRef((e,t)=>{const{value:s,onValueChange:r,...o}=e,a=It(r);return n.jsx(xo,{scope:e.__scopeMenu,value:s,onValueChange:a,children:n.jsx($t,{...o,ref:t})})});Hn.displayName=Bn;var Vn="MenuRadioItem",Qn=i.forwardRef((e,t)=>{const{value:s,...r}=e,o=go(Vn,e.__scopeMenu),a=s===o.value;return n.jsx(zn,{scope:e.__scopeMenu,checked:a,children:n.jsx(st,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":Gt(a),onSelect:w(r.onSelect,()=>{var l;return(l=o.onValueChange)==null?void 0:l.call(o,s)},{checkForDefaultPrevented:!1})})})});Qn.displayName=Vn;var Kt="MenuItemIndicator",[zn,vo]=me(Kt,{checked:!1}),qn=i.forwardRef((e,t)=>{const{__scopeMenu:s,forceMount:r,...o}=e,a=vo(Kt,s);return n.jsx(Ke,{present:r||Je(a.checked)||a.checked===!0,children:n.jsx(B.span,{...o,ref:t,"data-state":Gt(a.checked)})})});qn.displayName=Kt;var bo="MenuSeparator",Yn=i.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e;return n.jsx(B.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Yn.displayName=bo;var yo="MenuArrow",Wn=i.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e,o=nt(s);return n.jsx(Ls,{...o,...r,ref:t})});Wn.displayName=yo;var jo="MenuSub",[Da,Xn]=me(jo),Te="MenuSubTrigger",Jn=i.forwardRef((e,t)=>{const s=xe(Te,e.__scopeMenu),r=He(Te,e.__scopeMenu),o=Xn(Te,e.__scopeMenu),a=Lt(Te,e.__scopeMenu),l=i.useRef(null),{pointerGraceTimerRef:x,onPointerGraceIntentChange:m}=a,d={__scopeMenu:e.__scopeMenu},h=i.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return i.useEffect(()=>h,[h]),i.useEffect(()=>{const u=x.current;return()=>{window.clearTimeout(u),m(null)}},[x,m]),n.jsx(Ft,{asChild:!0,...d,children:n.jsx(Kn,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":o.contentId,"data-state":ts(s.open),...e,ref:mn(t,o.onTriggerChange),onClick:u=>{var p;(p=e.onClick)==null||p.call(e,u),!(e.disabled||u.defaultPrevented)&&(u.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:w(e.onPointerMove,Fe(u=>{a.onItemEnter(u),!u.defaultPrevented&&!e.disabled&&!s.open&&!l.current&&(a.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{s.onOpenChange(!0),h()},100))})),onPointerLeave:w(e.onPointerLeave,Fe(u=>{var g,v;h();const p=(g=s.content)==null?void 0:g.getBoundingClientRect();if(p){const C=(v=s.content)==null?void 0:v.dataset.side,f=C==="right",j=f?-5:5,I=p[f?"left":"right"],_=p[f?"right":"left"];a.onPointerGraceIntentChange({area:[{x:u.clientX+j,y:u.clientY},{x:I,y:p.top},{x:_,y:p.top},{x:_,y:p.bottom},{x:I,y:p.bottom}],side:C}),window.clearTimeout(x.current),x.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(u),u.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:w(e.onKeyDown,u=>{var g;const p=a.searchRef.current!=="";e.disabled||p&&u.key===" "||eo[r.dir].includes(u.key)&&(s.onOpenChange(!0),(g=s.content)==null||g.focus(),u.preventDefault())})})})});Jn.displayName=Te;var Zn="MenuSubContent",es=i.forwardRef((e,t)=>{const s=kn(K,e.__scopeMenu),{forceMount:r=s.forceMount,...o}=e,a=xe(K,e.__scopeMenu),l=He(K,e.__scopeMenu),x=Xn(Zn,e.__scopeMenu),m=i.useRef(null),d=fe(t,m);return n.jsx(Ae.Provider,{scope:e.__scopeMenu,children:n.jsx(Ke,{present:r||a.open,children:n.jsx(Ae.Slot,{scope:e.__scopeMenu,children:n.jsx(Ut,{id:x.contentId,"aria-labelledby":x.triggerId,...o,ref:d,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var u;l.isUsingKeyboardRef.current&&((u=m.current)==null||u.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:w(e.onFocusOutside,h=>{h.target!==x.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:w(e.onEscapeKeyDown,h=>{l.onClose(),h.preventDefault()}),onKeyDown:w(e.onKeyDown,h=>{var g;const u=h.currentTarget.contains(h.target),p=to[l.dir].includes(h.key);u&&p&&(a.onOpenChange(!1),(g=x.trigger)==null||g.focus(),h.preventDefault())})})})})})});es.displayName=Zn;function ts(e){return e?"open":"closed"}function Je(e){return e==="indeterminate"}function Gt(e){return Je(e)?"indeterminate":e?"checked":"unchecked"}function wo(e){const t=document.activeElement;for(const s of e)if(s===t||(s.focus(),document.activeElement!==t))return}function Co(e,t){return e.map((s,r)=>e[(t+r)%e.length])}function Ro(e,t,s){const o=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=s?e.indexOf(s):-1;let l=Co(e,Math.max(a,0));o.length===1&&(l=l.filter(d=>d!==s));const m=l.find(d=>d.toLowerCase().startsWith(o.toLowerCase()));return m!==s?m:void 0}function So(e,t){const{x:s,y:r}=e;let o=!1;for(let a=0,l=t.length-1;a<t.length;l=a++){const x=t[a],m=t[l],d=x.x,h=x.y,u=m.x,p=m.y;h>r!=p>r&&s<(u-d)*(r-h)/(p-h)+d&&(o=!o)}return o}function No(e,t){if(!t)return!1;const s={x:e.clientX,y:e.clientY};return So(s,t)}function Fe(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Mo=Fn,Io=Ft,_o=Ln,Eo=Un,Po=$t,Do=$n,To=st,Oo=Gn,Ao=Hn,Fo=Qn,ko=qn,Lo=Yn,Uo=Wn,$o=Jn,Ko=es,rt="DropdownMenu",[Go,Ta]=et(rt,[On]),O=On(),[Bo,ns]=Go(rt),ss=e=>{const{__scopeDropdownMenu:t,children:s,dir:r,open:o,defaultOpen:a,onOpenChange:l,modal:x=!0}=e,m=O(t),d=i.useRef(null),[h,u]=Mt({prop:o,defaultProp:a??!1,onChange:l,caller:rt});return n.jsx(Bo,{scope:t,triggerId:We(),triggerRef:d,contentId:We(),open:h,onOpenChange:u,onOpenToggle:i.useCallback(()=>u(p=>!p),[u]),modal:x,children:n.jsx(Mo,{...m,open:h,onOpenChange:u,dir:r,modal:x,children:s})})};ss.displayName=rt;var rs="DropdownMenuTrigger",os=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,disabled:r=!1,...o}=e,a=ns(rs,s),l=O(s);return n.jsx(Io,{asChild:!0,...l,children:n.jsx(B.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:mn(t,a.triggerRef),onPointerDown:w(e.onPointerDown,x=>{!r&&x.button===0&&x.ctrlKey===!1&&(a.onOpenToggle(),a.open||x.preventDefault())}),onKeyDown:w(e.onKeyDown,x=>{r||(["Enter"," "].includes(x.key)&&a.onOpenToggle(),x.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(x.key)&&x.preventDefault())})})})});os.displayName=rs;var Ho="DropdownMenuPortal",as=e=>{const{__scopeDropdownMenu:t,...s}=e,r=O(t);return n.jsx(_o,{...r,...s})};as.displayName=Ho;var is="DropdownMenuContent",cs=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,o=ns(is,s),a=O(s),l=i.useRef(!1);return n.jsx(Eo,{id:o.contentId,"aria-labelledby":o.triggerId,...a,...r,ref:t,onCloseAutoFocus:w(e.onCloseAutoFocus,x=>{var m;l.current||(m=o.triggerRef.current)==null||m.focus(),l.current=!1,x.preventDefault()}),onInteractOutside:w(e.onInteractOutside,x=>{const m=x.detail.originalEvent,d=m.button===0&&m.ctrlKey===!0,h=m.button===2||d;(!o.modal||h)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});cs.displayName=is;var Vo="DropdownMenuGroup",Qo=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,o=O(s);return n.jsx(Po,{...o,...r,ref:t})});Qo.displayName=Vo;var zo="DropdownMenuLabel",ls=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,o=O(s);return n.jsx(Do,{...o,...r,ref:t})});ls.displayName=zo;var qo="DropdownMenuItem",us=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,o=O(s);return n.jsx(To,{...o,...r,ref:t})});us.displayName=qo;var Yo="DropdownMenuCheckboxItem",ds=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,o=O(s);return n.jsx(Oo,{...o,...r,ref:t})});ds.displayName=Yo;var Wo="DropdownMenuRadioGroup",Xo=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,o=O(s);return n.jsx(Ao,{...o,...r,ref:t})});Xo.displayName=Wo;var Jo="DropdownMenuRadioItem",hs=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,o=O(s);return n.jsx(Fo,{...o,...r,ref:t})});hs.displayName=Jo;var Zo="DropdownMenuItemIndicator",ps=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,o=O(s);return n.jsx(ko,{...o,...r,ref:t})});ps.displayName=Zo;var ea="DropdownMenuSeparator",fs=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,o=O(s);return n.jsx(Lo,{...o,...r,ref:t})});fs.displayName=ea;var ta="DropdownMenuArrow",na=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,o=O(s);return n.jsx(Uo,{...o,...r,ref:t})});na.displayName=ta;var sa="DropdownMenuSubTrigger",ms=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,o=O(s);return n.jsx($o,{...o,...r,ref:t})});ms.displayName=sa;var ra="DropdownMenuSubContent",xs=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,o=O(s);return n.jsx(Ko,{...o,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});xs.displayName=ra;var oa=ss,aa=os,ia=as,gs=cs,vs=ls,bs=us,ys=ds,js=hs,ws=ps,Cs=fs,Rs=ms,Ss=xs;const ca=oa,la=aa,ua=i.forwardRef(({className:e,inset:t,children:s,...r},o)=>n.jsxs(Rs,{ref:o,className:L("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...r,children:[s,n.jsx(_t,{className:"ml-auto h-4 w-4"})]}));ua.displayName=Rs.displayName;const da=i.forwardRef(({className:e,...t},s)=>n.jsx(Ss,{ref:s,className:L("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));da.displayName=Ss.displayName;const Ns=i.forwardRef(({className:e,sideOffset:t=4,...s},r)=>n.jsx(ia,{children:n.jsx(gs,{ref:r,sideOffset:t,className:L("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));Ns.displayName=gs.displayName;const St=i.forwardRef(({className:e,inset:t,...s},r)=>n.jsx(bs,{ref:r,className:L("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...s}));St.displayName=bs.displayName;const ha=i.forwardRef(({className:e,children:t,checked:s,...r},o)=>n.jsxs(ys,{ref:o,className:L("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:s,...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(ws,{children:n.jsx(ar,{className:"h-4 w-4"})})}),t]}));ha.displayName=ys.displayName;const pa=i.forwardRef(({className:e,children:t,...s},r)=>n.jsxs(js,{ref:r,className:L("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(ws,{children:n.jsx(ur,{className:"h-2 w-2 fill-current"})})}),t]}));pa.displayName=js.displayName;const Ms=i.forwardRef(({className:e,inset:t,...s},r)=>n.jsx(vs,{ref:r,className:L("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...s}));Ms.displayName=vs.displayName;const fa=i.forwardRef(({className:e,...t},s)=>n.jsx(Cs,{ref:s,className:L("-mx-1 my-1 h-px bg-muted",e),...t}));fa.displayName=Cs.displayName;const Oa=()=>{const[e,t]=i.useState({page:1,limit:20,sort_by:"date",sort_order:"desc",search:""}),{role:s}=hn(),r=s==="admin",[o,a]=i.useState(""),[l,x]=i.useState(!1),[m,d]=i.useState(null),{data:h,isLoading:u,isError:p}=Mr(e),g=f=>{f.preventDefault(),t(j=>({...j,page:1,search:o}))},v=f=>{t(j=>({...j,sort_by:f,sort_order:j.sort_by===f&&j.sort_order==="desc"?"asc":"desc"}))},C=(h==null?void 0:h.meta.pages)||1;return n.jsx(qs,{fullWidth:!0,children:n.jsxs("div",{className:"flex flex-col h-full space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Shift Records"}),(r||s==="manager")&&n.jsxs(Re,{onClick:()=>x(!0),children:[n.jsx(dr,{className:"mr-2 h-4 w-4"})," Add Record"]})]}),n.jsx(Jt,{open:l,onOpenChange:x,children:n.jsxs(Zt,{className:"max-w-2xl",children:[n.jsx(en,{children:n.jsx(tn,{children:"Add New Shift Record"})}),n.jsx(on,{onSuccess:()=>x(!1),onCancel:()=>x(!1)})]})}),n.jsx(Jt,{open:!!m,onOpenChange:f=>!f&&d(null),children:n.jsxs(Zt,{className:"max-w-2xl",children:[n.jsx(en,{children:n.jsx(tn,{children:"Edit Shift Record"})}),m&&n.jsx(on,{record:m,onSuccess:()=>d(null),onCancel:()=>d(null)})]})}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("form",{onSubmit:g,className:"flex-1 max-w-sm flex gap-2",children:[n.jsx(Pe,{placeholder:"Search by name, client, or job...",value:o,onChange:f=>a(f.target.value)}),n.jsx(Re,{type:"submit",variant:"secondary",children:n.jsx(cr,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"ml-auto text-sm text-muted-foreground",children:[(h==null?void 0:h.meta.total)||0," records found"]})]}),n.jsx("div",{className:"border rounded-md bg-white",children:n.jsxs(Zs,{children:[n.jsx(er,{children:n.jsxs(be,{children:[n.jsx(Q,{className:"w-[30px]"}),n.jsxs(Q,{className:"cursor-pointer",onClick:()=>v("date"),children:["Date ",n.jsx(ut,{className:"ml-2 h-4 w-4 inline"})]}),n.jsxs(Q,{className:"cursor-pointer",onClick:()=>v("full_name"),children:["Employee ",n.jsx(ut,{className:"ml-2 h-4 w-4 inline"})]}),n.jsxs(Q,{className:"cursor-pointer",onClick:()=>v("client_name"),children:["Client ",n.jsx(ut,{className:"ml-2 h-4 w-4 inline"})]}),n.jsx(Q,{className:"hidden md:table-cell cursor-pointer",onClick:()=>v("location"),children:"Location"}),n.jsx(Q,{children:"Shift"}),n.jsx(Q,{className:"text-right",children:"Hours"}),r&&n.jsx(Q,{className:"text-right",children:"Pay"}),r&&n.jsx(Q,{className:"text-right",children:"Net"}),n.jsx(Q,{className:"w-[50px]"})]})}),n.jsx(tr,{children:u?n.jsx(be,{children:n.jsx(A,{colSpan:r?10:8,className:"h-24 text-center",children:n.jsx(pt,{className:"h-6 w-6 animate-spin mx-auto"})})}):p?n.jsx(be,{children:n.jsx(A,{colSpan:r?10:8,className:"h-24 text-center text-red-500",children:"Failed to load records"})}):(h==null?void 0:h.data.length)===0?n.jsx(be,{children:n.jsx(A,{colSpan:r?10:8,className:"h-24 text-center",children:"No records found"})}):h==null?void 0:h.data.map(f=>n.jsx(ma,{record:f,isAdmin:r,role:s,onEdit:()=>d(f)},f.id))})]})}),C>1&&n.jsx(yn,{children:n.jsxs(jn,{children:[n.jsx(ze,{children:n.jsx(wn,{onClick:()=>t(f=>({...f,page:Math.max(1,f.page-1)})),className:e.page===1?"pointer-events-none opacity-50":"cursor-pointer"})}),n.jsx(ze,{children:n.jsxs("div",{className:"flex items-center justify-center px-4 text-sm font-medium",children:["Page ",e.page," of ",C]})}),n.jsx(ze,{children:n.jsx(Cn,{onClick:()=>t(f=>({...f,page:Math.min(C,f.page+1)})),className:e.page===C?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})})},ma=({record:e,isAdmin:t,role:s,onEdit:r})=>{var m,d,h,u,p;const[o,a]=i.useState(!1),l=Pr(),x=()=>{confirm("Are you sure you want to delete this record?")&&l.mutate(e.id)};return n.jsxs(n.Fragment,{children:[n.jsxs(be,{className:"group",children:[n.jsx(A,{children:n.jsx(kr,{open:o,onOpenChange:a,children:n.jsx(Lr,{asChild:!0,children:n.jsxs(Re,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:[o?n.jsx(ir,{className:"h-4 w-4"}):n.jsx(_t,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Toggle"})]})})})}),n.jsx(A,{className:"font-medium",children:e.date?lt(new Date(e.date),"dd MMM yyyy"):"-"}),n.jsx(A,{children:e.fullName}),n.jsx(A,{children:e.clientName}),n.jsx(A,{className:"hidden md:table-cell",children:e.location}),n.jsx(A,{children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-sm",children:e.shiftName}),n.jsx("span",{className:"text-xs text-muted-foreground",children:e.shiftStart&&e.shiftEnd?`${lt(new Date(`1970-01-01T${e.shiftStart}`),"HH:mm")} - ${lt(new Date(`1970-01-01T${e.shiftEnd}`),"HH:mm")}`:""})]})}),n.jsx(A,{className:"text-right",children:e.paidHours.toFixed(2)}),t&&n.jsxs(A,{className:"text-right",children:["£",((m=e.totalPay)==null?void 0:m.toFixed(2))||"0.00"]}),t&&n.jsxs(A,{className:"text-right font-medium",children:["£",((d=e.clientNet)==null?void 0:d.toFixed(2))||"0.00"]}),n.jsx(A,{children:(t||s==="manager")&&n.jsxs(ca,{children:[n.jsx(la,{asChild:!0,children:n.jsxs(Re,{variant:"ghost",className:"h-8 w-8 p-0",children:[n.jsx("span",{className:"sr-only",children:"Open menu"}),n.jsx(lr,{className:"h-4 w-4"})]})}),n.jsxs(Ns,{align:"end",children:[n.jsx(Ms,{children:"Actions"}),n.jsxs(St,{onClick:g=>{g.stopPropagation(),r()},children:[n.jsx(nr,{className:"mr-2 h-4 w-4"})," Edit"]}),n.jsxs(St,{onClick:g=>{g.stopPropagation(),x()},className:"text-red-600",children:[n.jsx(sr,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]}),n.jsx(be,{className:o?"":"hidden",children:n.jsx(A,{colSpan:t?10:8,className:"p-0 border-b-0",children:n.jsxs("div",{className:`bg-muted/50 p-4 grid grid-cols-1 ${t?"md:grid-cols-3":"md:grid-cols-2"} gap-4 text-sm shadow-inner`,children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Job Details"}),n.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[n.jsx("span",{className:"text-muted-foreground",children:"Site:"}),n.jsx("span",{children:e.site}),n.jsx("span",{className:"text-muted-foreground",children:"Job Name:"}),n.jsx("span",{children:e.jobName}),n.jsx("span",{className:"text-muted-foreground",children:"Status:"}),n.jsx(rr,{variant:"outline",className:"w-fit",children:e.jobStatus||"N/A"})]})]}),t&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Financial Breakdown"}),n.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[n.jsx("span",{className:"text-muted-foreground",children:"Pay Rate:"}),n.jsxs("span",{children:["£",((h=e.hourRate)==null?void 0:h.toFixed(2))||"0.00","/hr"]}),n.jsx("span",{className:"text-muted-foreground",children:"Charge Rate:"}),n.jsxs("span",{children:["£",((u=e.clientHourlyRate)==null?void 0:u.toFixed(2))||"0.00","/hr"]}),n.jsx("span",{className:"text-muted-foreground",children:"Total Charge:"}),n.jsxs("span",{children:["£",((p=e.totalCharge)==null?void 0:p.toFixed(2))||"0.00"]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Metadata"}),n.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[n.jsx("span",{className:"text-muted-foreground",children:"System ID:"}),n.jsx("span",{className:"font-mono text-xs",children:e.id})]})]})]})})})]})};export{Oa as default};
