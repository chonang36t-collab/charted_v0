import{c as pe,h as Qe,r as o,U as Ze,p as es,j as e,v as ss,P as ee,q as re,w as as,e as le,B as _,I as ve,L as ts,y as R,a3 as rs,u as ns,d as is,A as ne}from"./index-D_EjektI.js";import{D as os}from"./DashboardLayout-D12wHmUw.js";import{C as V,d as H,a as ye,b as be}from"./card-BON8h9_W.js";import{c as Ne,R as ls,I as cs,P as ds}from"./index-qhjzOaPu.js";import{D as us}from"./DashboardHeader-RUO6Saae.js";import{u as hs,O as ms}from"./OperationalTrendChart-C-9RkPPf.js";import{u as xs,L as gs,R as vs}from"./LoadingOverlay-BXXpD-SU.js";import{R as Se,C as fs,X as js,Y as ps,T as Ce,B as ys,a as Te,L as bs}from"./generateCategoricalChart-4709mnur.js";import{B as Ns}from"./BarChart-CEDRhcQH.js";import{P as Ss,a as Cs}from"./PieChart-CiSfFIyQ.js";import{T as Le,a as Ae,b as W,c as T,d as Re,e as L,f as Ts}from"./table-Brrir8Il.js";import{T as Ls}from"./trash-2-CBlzqJsi.js";import{D as As,b as Rs,c as Fs,d as ks,f as Ds,e as Is}from"./dialog-nCnrAAky.js";import{L as I}from"./label-C9soB4kj.js";import{S as U,a as Y,b as q,c as J,d as O}from"./select-CFrpNYEi.js";import{u as Ms}from"./useRecords-QDMlhhj1.js";import{f as Q}from"./popover-Di97WwLP.js";import"./users-BD5zzpXS.js";import"./locationUtils-BIKBgbwF.js";import"./index-CBzkWTlX.js";import"./Line-y3Rt2vY4.js";import"./AreaChart-DuZwtno8.js";import"./useQuery-6OD5v_jw.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=pe("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var se="Tabs",[Ps,ma]=Qe(se,[Ne]),Fe=Ne(),[Os,ce]=Ps(se),ke=o.forwardRef((s,r)=>{const{__scopeTabs:a,value:i,onValueChange:l,defaultValue:f,orientation:x="horizontal",dir:j,activationMode:g="automatic",...b}=s,d=Ze(j),[u,v]=es({prop:i,onChange:l,defaultProp:f??"",caller:se});return e.jsx(Os,{scope:a,baseId:ss(),value:u,onValueChange:v,orientation:x,dir:d,activationMode:g,children:e.jsx(ee.div,{dir:d,"data-orientation":x,...b,ref:r})})});ke.displayName=se;var De="TabsList",Ie=o.forwardRef((s,r)=>{const{__scopeTabs:a,loop:i=!0,...l}=s,f=ce(De,a),x=Fe(a);return e.jsx(ls,{asChild:!0,...x,orientation:f.orientation,dir:f.dir,loop:i,children:e.jsx(ee.div,{role:"tablist","aria-orientation":f.orientation,...l,ref:r})})});Ie.displayName=De;var Me="TabsTrigger",we=o.forwardRef((s,r)=>{const{__scopeTabs:a,value:i,disabled:l=!1,...f}=s,x=ce(Me,a),j=Fe(a),g=Oe(x.baseId,i),b=$e(x.baseId,i),d=i===x.value;return e.jsx(cs,{asChild:!0,...j,focusable:!l,active:d,children:e.jsx(ee.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":b,"data-state":d?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:g,...f,ref:r,onMouseDown:re(s.onMouseDown,u=>{!l&&u.button===0&&u.ctrlKey===!1?x.onValueChange(i):u.preventDefault()}),onKeyDown:re(s.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&x.onValueChange(i)}),onFocus:re(s.onFocus,()=>{const u=x.activationMode!=="manual";!d&&!l&&u&&x.onValueChange(i)})})})});we.displayName=Me;var Ee="TabsContent",Pe=o.forwardRef((s,r)=>{const{__scopeTabs:a,value:i,forceMount:l,children:f,...x}=s,j=ce(Ee,a),g=Oe(j.baseId,i),b=$e(j.baseId,i),d=i===j.value,u=o.useRef(d);return o.useEffect(()=>{const v=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(v)},[]),e.jsx(as,{present:l||d,children:({present:v})=>e.jsx(ee.div,{"data-state":d?"active":"inactive","data-orientation":j.orientation,role:"tabpanel","aria-labelledby":g,hidden:!v,id:b,tabIndex:0,...x,ref:r,style:{...s.style,animationDuration:u.current?"0s":void 0},children:v&&f})})});Pe.displayName=Ee;function Oe(s,r){return`${s}-trigger-${r}`}function $e(s,r){return`${s}-content-${r}`}var $s=ke,Be=Ie,_e=we,Ve=Pe;const Bs=$s,He=o.forwardRef(({className:s,...r},a)=>e.jsx(Be,{ref:a,className:le("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r}));He.displayName=Be.displayName;const $=o.forwardRef(({className:s,...r},a)=>e.jsx(_e,{ref:a,className:le("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",s),...r}));$.displayName=_e.displayName;const B=o.forwardRef(({className:s,...r},a)=>e.jsx(Ve,{ref:a,className:le("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r}));B.displayName=Ve.displayName;const _s=({active:s,payload:r,label:a})=>s&&r&&r.length?e.jsxs("div",{className:"bg-background border border-border p-3 rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-semibold text-foreground",children:a}),e.jsx("p",{className:"text-sm",children:r[0].value.toLocaleString(void 0,{style:"currency",currency:"GBP"})})]}):null,ie=({data:s,metric:r,onBarClick:a})=>!s||s.length===0?e.jsx("div",{className:"h-[300px] flex items-center justify-center border rounded-md",children:e.jsx("p",{className:"text-muted-foreground",children:"No breakdown data available"})}):e.jsx(V,{children:e.jsx(H,{className:"pt-6",children:e.jsx("div",{className:"h-[400px]",children:e.jsx(Se,{width:"100%",height:"100%",children:e.jsxs(Ns,{data:s,layout:"vertical",margin:{top:5,right:30,left:40,bottom:5},children:[e.jsx(fs,{strokeDasharray:"3 3",horizontal:!1}),e.jsx(js,{type:"number",hide:!0}),e.jsx(ps,{dataKey:"name",type:"category",width:120,tick:{fontSize:12}}),e.jsx(Ce,{content:e.jsx(_s,{})}),e.jsx(ys,{dataKey:"value",fill:"hsl(var(--primary))",radius:[0,4,4,0],onClick:a,children:s.map((i,l)=>e.jsx(Te,{fill:"hsl(var(--primary))",fillOpacity:.8+l*.05},`cell-${l}`))})]})})})})}),fe=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d","#ffc658","#8dd1e1","#a4de6c","#d0ed57"],Vs=({active:s,payload:r})=>s&&r&&r.length?e.jsxs("div",{className:"bg-background border border-border p-3 rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-semibold",children:r[0].name}),e.jsx("p",{className:"text-sm",children:Number(r[0].value).toLocaleString(void 0,{style:"currency",currency:"GBP"})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:`${((r[0].payload.percent||0)*100).toFixed(1)}%`})]}):null,Z=({data:s,metric:r})=>{if(!s||s.length===0)return e.jsx(V,{children:e.jsx(H,{className:"pt-6",children:e.jsx("div",{className:"h-[300px] flex items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No distribution data available"})})})});const a=[...s].sort((i,l)=>l.value-i.value);return e.jsx(V,{children:e.jsx(H,{className:"pt-6",children:e.jsx("div",{className:"h-[400px]",children:e.jsx(Se,{width:"100%",height:"100%",children:e.jsxs(Ss,{children:[e.jsx(Cs,{data:a,cx:"50%",cy:"50%",labelLine:!1,outerRadius:120,fill:"#8884d8",dataKey:"value",children:a.map((i,l)=>e.jsx(Te,{fill:fe[l%fe.length]},`cell-${l}`))}),e.jsx(Ce,{content:e.jsx(Vs,{})}),e.jsx(bs,{})]})})})})})},Hs=({data:s,onEdit:r,onDelete:a})=>!s||s.length===0?e.jsx("div",{className:"h-[200px] flex items-center justify-center border rounded-md",children:e.jsx("p",{className:"text-muted-foreground",children:"No overhead details available"})}):e.jsxs(V,{children:[e.jsx(ye,{children:e.jsx(be,{children:"Overheads Details"})}),e.jsx(H,{children:e.jsxs(Le,{children:[e.jsx(Ae,{children:e.jsxs(W,{children:[e.jsx(T,{children:"Title"}),e.jsx(T,{children:"Month"}),e.jsx(T,{children:"Location"}),e.jsx(T,{children:"Site"}),e.jsx(T,{children:"Site"}),e.jsx(T,{className:"text-right",children:"Amount"}),e.jsx(T,{className:"w-[100px]",children:"Actions"})]})}),e.jsx(Re,{children:s.map(i=>e.jsxs(W,{children:[e.jsx(L,{className:"font-medium",children:i.name}),e.jsxs(L,{children:[i.month," ",i.year]}),e.jsx(L,{children:i.location||"-"}),e.jsx(L,{children:i.site||"-"}),e.jsx(L,{className:"text-right",children:i.value.toLocaleString(void 0,{style:"currency",currency:"GBP"})}),e.jsx(L,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"ghost",size:"icon",className:"h-8 w-8 text-blue-500 hover:text-blue-600",onClick:()=>r(i),children:e.jsx(Es,{className:"h-4 w-4"})}),e.jsx(_,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500 hover:text-red-600",onClick:()=>a(i.id),children:e.jsx(Ls,{className:"h-4 w-4"})})]})})]},i.id))})]})})]}),oe=["January","February","March","April","May","June","July","August","September","October","November","December"],je=["Rent","Salaries","Utilities","Software","Equipment","Marketing","Travel","Insurance","Taxes","Maintenance","Custom..."],zs=({open:s,onOpenChange:r,initialData:a,onSave:i})=>{var K,k;const{data:l}=Ms(),[f,x]=o.useState(!1),[j,g]=o.useState(new Date().getFullYear()),[b,d]=o.useState(oe[new Date().getMonth()]),[u,v]=o.useState(""),[X,p]=o.useState(""),[F,N]=o.useState(""),[M,w]=o.useState(""),[E,z]=o.useState("");o.useEffect(()=>{s&&(a?(g(a.year),d(a.month),v(a.location||""),p(a.site||""),z(a.value.toString()),je.includes(a.name)?(N(a.name),w("")):(N("Custom..."),w(a.name))):(g(new Date().getFullYear()),d(oe[new Date().getMonth()]),v(""),p(""),N(""),w(""),z("")))},[s,a]);const P=async()=>{if(!u||!F||!E){R.error("Please fill in all required fields");return}const t=F==="Custom..."?M:F;if(!t){R.error("Please specify the overhead name");return}x(!0);try{await i({id:a==null?void 0:a.id,year:j,month:b,location:u,site:X||null,name:t,value:parseFloat(E)}),r(!1)}catch(D){console.error("Failed to save overhead:",D)}finally{x(!1)}},G=((K=l==null?void 0:l.jobs)==null?void 0:K.filter(t=>t.location===u&&t.site).map(t=>t.site).filter((t,D,y)=>y.indexOf(t)===D))||[];return e.jsx(As,{open:s,onOpenChange:r,children:e.jsxs(Rs,{className:"sm:max-w-[500px]",children:[e.jsxs(Fs,{children:[e.jsx(ks,{children:a?"Edit Overhead":"Add Overhead"}),e.jsx(Ds,{children:a?"Update existing overhead record.":"Create a new overhead record."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(I,{children:"Year"}),e.jsxs(U,{value:j.toString(),onValueChange:t=>g(Number(t)),children:[e.jsx(Y,{children:e.jsx(q,{})}),e.jsx(J,{children:[2024,2025,2026,2027,2028].map(t=>e.jsx(O,{value:t.toString(),children:t},t))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(I,{children:"Month"}),e.jsxs(U,{value:b,onValueChange:d,children:[e.jsx(Y,{children:e.jsx(q,{})}),e.jsx(J,{children:oe.map(t=>e.jsx(O,{value:t,children:t},t))})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(I,{children:"Location"}),e.jsxs(U,{value:u,onValueChange:t=>{v(t),p("")},children:[e.jsx(Y,{children:e.jsx(q,{placeholder:"Select location..."})}),e.jsx(J,{children:Array.from(new Set((k=l==null?void 0:l.jobs)==null?void 0:k.map(t=>t.location).filter(Boolean))).map(t=>e.jsx(O,{value:t,children:t},t))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(I,{children:"Site (Optional)"}),e.jsxs(U,{value:X,onValueChange:p,disabled:!u||G.length===0,children:[e.jsx(Y,{children:e.jsx(q,{placeholder:G.length===0?"No sites available":"Select site..."})}),e.jsxs(J,{children:[e.jsx(O,{value:"all_sites",children:"All Sites (if applicable)"}),G.map(t=>e.jsx(O,{value:t,children:t},t))]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(I,{children:"Category"}),e.jsxs(U,{value:F,onValueChange:N,children:[e.jsx(Y,{children:e.jsx(q,{placeholder:"Select category..."})}),e.jsx(J,{children:je.map(t=>e.jsx(O,{value:t,children:t},t))})]})]}),F==="Custom..."&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(I,{children:"Custom Name"}),e.jsx(ve,{placeholder:"Enter overhead name",value:M,onChange:t=>w(t.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(I,{children:"Value (£)"}),e.jsx(ve,{type:"number",placeholder:"0.00",value:E,onChange:t=>z(t.target.value)})]})]}),e.jsxs(Is,{children:[e.jsx(_,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsxs(_,{onClick:P,disabled:f,children:[f&&e.jsx(ts,{className:"mr-2 h-4 w-4 animate-spin"}),"Save"]})]})]})})},xa=()=>{const{metricId:s}=rs(),r=ns(),{dateRange:a,setDateRange:i}=is(),[l,f]=o.useState(!1),[x,j]=o.useState(a),[g,b]=o.useState([]),[d,u]=o.useState([]),[v,X]=o.useState("trend"),[p,F]=o.useState([]),[N,M]=o.useState([]),[w,E]=o.useState(!1),[z,P]=o.useState(!1),[G,K]=o.useState(null),k=["revenue","cost","profit","employees","clientRate","staffRate","overheads"].includes(s||""),t=["shifts","hours","clients","targetAchievement","missedTargets"].includes(s||""),D=s==="overheads",{operationalData:y,isLoading:ze}=hs(a,g,d),{financialData:S,isLoading:Ge}=xs(a,g,d),Ke=k?Ge:t?ze:!1;o.useEffect(()=>{if(v==="trend"||!s)return;const n=async()=>{E(!0);try{const c=new URLSearchParams({start:Q(a.from,"yyyy-MM-dd"),end:Q(a.to,"yyyy-MM-dd"),metric:s,limit:"20"});g&&g.length>0&&g.forEach(m=>c.append("locations",m)),d&&d.length>0&&d.forEach(m=>c.append("sites",m));const h={Authorization:`Bearer ${localStorage.getItem("auth_token")}`};if(v==="details"&&D){const m=await fetch(`${ne.FINANCIAL_METRICS_LIST}?${c.toString()}`,{headers:h});if(m.ok){const C=await m.json();M(C)}}else if(["location","site","client"].includes(v)){c.append("dimension",v);const m=await fetch(`${ne.BREAKDOWN}?${c.toString()}`,{headers:h});if(m.ok){const C=await m.json();F(C)}}}catch(c){console.error("Error fetching breakdown:",c)}finally{E(!1)}};n(),n()},[v,s,a,g,d]);const Ue=()=>{K(null),P(!0)},Ye=n=>{K(n),P(!0)},qe=async n=>{if(confirm("Are you sure you want to delete this overhead?"))try{const c=await fetch(`/api/admin/financial-metrics/${n}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(c.ok)R.success("Overhead deleted"),v==="details"&&M(h=>h.filter(m=>m.id!==n));else{const h=await c.json();R.error(h.error||"Failed to delete")}}catch(c){console.error(c),R.error("Failed to delete")}},Je=async n=>{try{const c=await fetch("/api/admin/financial-metrics",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify(n)});if(c.ok){R.success("Overhead saved"),P(!1);const h=new URLSearchParams({start:Q(a.from,"yyyy-MM-dd"),end:Q(a.to,"yyyy-MM-dd"),metric:s||"overheads",limit:"20"});g&&g.forEach(A=>h.append("locations",A)),d&&d.forEach(A=>h.append("sites",A));const m={Authorization:`Bearer ${localStorage.getItem("auth_token")}`},C=await fetch(`${ne.FINANCIAL_METRICS_LIST}?${h.toString()}`,{headers:m});if(C.ok){const A=await C.json();M(A)}}else{const h=await c.json();R.error(h.error||"Failed to save")}}catch(c){console.error(c),R.error("Failed to save")}},de=n=>{switch(n){case"revenue":return"Revenue Analysis";case"cost":return"Cost Analysis";case"profit":return"Profit Analysis";case"shifts":return"Shifts Analysis";case"hours":return"Hours Analysis";case"clients":return"Client Analysis";case"employees":return"Employee Analysis";case"targetAchievement":return"Target Achievement Analysis";case"missedTargets":return"Missed Targets Analysis";case"clientRate":return"Client Rate Analysis";case"staffRate":return"Staff Rate Analysis";case"overheads":return"Overheads Analysis";default:return"Metric Analysis"}},We=(n,c)=>{var h,m,C,A,ue,he,me,xe,ge;if(!n)return"-";switch(c){case"revenue":return`£${((h=n.revenue)==null?void 0:h.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))??0}`;case"cost":return`£${((m=n.cost)==null?void 0:m.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))??0}`;case"profit":const te=n.profit??n.revenue-n.cost-(n.overheads||0);return`£${(te==null?void 0:te.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))??0}`;case"shifts":return((C=n.totalShifts)==null?void 0:C.toLocaleString())??0;case"hours":return((A=n.paidHours)==null?void 0:A.toLocaleString(void 0,{maximumFractionDigits:1}))??0;case"clients":return((ue=n.clientCount)==null?void 0:ue.toLocaleString())??0;case"employees":return((he=n.paidHours)==null?void 0:he.toLocaleString(void 0,{maximumFractionDigits:1}))??0;case"targetAchievement":return`${((me=n.achievementPercentage)==null?void 0:me.toFixed(1))??0}%`;case"missedTargets":return`${((xe=n.achievementPercentage)==null?void 0:xe.toFixed(1))??0}%`;case"clientRate":return`£${(n.revenue/n.paidHours||0).toFixed(2)}`;case"staffRate":return`£${(n.cost/n.paidHours||0).toFixed(2)}`;case"overheads":return`£${((ge=n.overheads)==null?void 0:ge.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))??0}`;default:return"-"}},Xe=o.useMemo(()=>{if(!N||N.length===0)return[];const n=N.reduce((c,h)=>{const m=h.name||"Unknown";return c[m]||(c[m]=0),c[m]+=h.value,c},{});return Object.entries(n).map(([c,h])=>({name:c,value:h}))},[N]),ae=k?S==null?void 0:S.timeSeries:y==null?void 0:y.timeSeries;return e.jsx(os,{fullWidth:!0,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx(us,{dateRange:a,onDateRangeChange:i,calendarOpen:l,onCalendarOpenChange:f,tempDateRange:x,onTempDateRangeChange:j,selectedLocations:g,onLocationsChange:b,selectedSites:d,onSitesChange:u}),e.jsxs("div",{className:"flex-1 overflow-auto p-6 space-y-6 relative",children:[(Ke||w)&&e.jsx(gs,{}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(_,{variant:"ghost",size:"sm",onClick:()=>r(-1),className:"gap-2",children:[e.jsx(ws,{className:"h-4 w-4"}),"Back"]}),e.jsx("h1",{className:"text-2xl font-bold",children:de(s)})]}),e.jsxs(Bs,{value:v,onValueChange:X,className:"space-y-4",children:[e.jsxs(He,{children:[e.jsx($,{value:"trend",children:"Trend"}),e.jsx($,{value:"location",children:"By Location"}),e.jsx($,{value:"site",children:"By Site"}),!D&&e.jsx($,{value:"client",children:"By Client"}),D&&e.jsx($,{value:"details",children:"All Details"})]}),e.jsx(B,{value:"trend",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-6",children:[k&&e.jsx(vs,{data:(S==null?void 0:S.timeSeries)||[],aggregationLevel:(S==null?void 0:S.aggregationLevel)||"monthly",selectedMetric:s}),t&&e.jsx(ms,{data:(y==null?void 0:y.timeSeries)||[],aggregationLevel:(y==null?void 0:y.aggregationLevel)||"monthly",selectedMetric:s}),!k&&!t&&e.jsx(V,{children:e.jsx(H,{className:"pt-6",children:e.jsx("p",{className:"text-muted-foreground",children:"Metric type not recognized or data unavailable."})})}),e.jsxs(V,{children:[e.jsx(ye,{children:e.jsx(be,{children:"Historical Data"})}),e.jsx(H,{children:e.jsxs(Le,{children:[e.jsxs(Ts,{children:["Detailed historical data for ",de(s)]}),e.jsx(Ae,{children:e.jsxs(W,{children:[e.jsx(T,{children:"Period"}),e.jsx(T,{className:"text-right",children:"Value"})]})}),e.jsx(Re,{children:ae&&ae.length>0?[...ae].reverse().map((n,c)=>e.jsxs(W,{children:[e.jsx(L,{className:"font-medium",children:n.display}),e.jsx(L,{className:"text-right font-medium",children:We(n,s)})]},c)):e.jsx(W,{children:e.jsx(L,{colSpan:2,className:"text-center",children:"No data available"})})})]})})]})]})}),e.jsx(B,{value:"location",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx(ie,{data:p,metric:s||"revenue"}),e.jsx(Z,{data:p,metric:s||"revenue"})]})}),e.jsx(B,{value:"site",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx(ie,{data:p,metric:s||"revenue"}),e.jsx(Z,{data:p,metric:s||"revenue"})]})}),e.jsx(B,{value:"client",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx(ie,{data:p,metric:s||"revenue"}),e.jsx(Z,{data:p,metric:s||"revenue"})]})}),e.jsx(B,{value:"details",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsx(Z,{data:Xe,metric:"overheads"})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(_,{onClick:Ue,className:"gap-2",children:[e.jsx(ds,{className:"h-4 w-4"}),"Add Overhead"]})}),e.jsx(Hs,{data:N,onEdit:Ye,onDelete:qe}),e.jsx(zs,{open:z,onOpenChange:P,initialData:G,onSave:Je})]})})]})]})]})})};export{xa as default};
