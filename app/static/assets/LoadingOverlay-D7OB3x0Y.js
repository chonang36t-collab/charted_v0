import{R as b,j as e,d as O}from"./index-BkF6eZqS.js";import{B as T}from"./button-Cedjd8aw.js";import{a as Q,P as H,b as K,C as E,f as z,c as B,d as W,i as q,e as V,s as k,g as F}from"./popover-VpNf-b-O.js";import{S as X,a as I,b as J,C as U,c as Z,d as P}from"./select-Dg33NSRy.js";import{C as u,a as Y,b as A,d as m}from"./card-C5tkn_9V.js";import{R as _,A as R,C as D,X as ee,Y as te,T as se,L as re,a as G}from"./AreaChart-CGvpsZA3.js";function M(t,s){return Q(t,-s)}const ue=(t,s)=>{var C,w,l;if(!t)return{revenue:{value:0,change:0,trend:"neutral",text:"No data available"},clientPay:{value:0,change:0,trend:"neutral",text:"No data available"},staffPay:{value:0,change:0,trend:"neutral",text:"No data available"}};const o=t.totalRevenue||0,i=t.avgClientPayPerHour||0,f=t.avgStaffPayPerHour||0,$=((C=t.previousPeriod)==null?void 0:C.totalRevenue)||0,S=((w=t.previousPeriod)==null?void 0:w.avgClientPayPerHour)||0,a=((l=t.previousPeriod)==null?void 0:l.avgStaffPayPerHour)||0,h=(r,c)=>c>0?(r-c)/c*100:0,n=h(o,$),x=h(i,S),j=h(f,a),v=r=>r>0?"up":r<0?"down":"neutral",p=(r,c,d)=>{if(!c)return"No previous data";let N="";return d<=7?N="last week":d<=31?N="last month":d<=93?N="last quarter":N="last period",`${r>0?"+":""}${Math.abs(r).toFixed(1)}% from ${N}`},g=Math.ceil((s.to.getTime()-s.from.getTime())/(1e3*60*60*24)),y=!!t.previousPeriod;return{revenue:{value:o,change:n,trend:v(n),text:p(n,y,g)},clientPay:{value:i,change:x,trend:v(x),text:p(x,y,g)},staffPay:{value:f,change:j,trend:v(j),text:p(j,y,g)}}},me=({dateRange:t,onDateRangeChange:s,calendarOpen:o,onCalendarOpenChange:i,tempDateRange:f,onTempDateRangeChange:$})=>{const S=l=>{const r=new Date;let c,d;switch(l){case"this-month":c=k(r),d=F(r);break;case"last-month":c=k(M(r,1)),d=F(M(r,1));break;case"last-3-months":c=k(M(r,2)),d=F(r);break;case"this-year":c=new Date(r.getFullYear(),0,1),d=new Date(r.getFullYear(),11,31);break;default:return}s({from:c,to:d})},[a,h]=b.useState(t==null?void 0:t.from),[n,x]=b.useState(t==null?void 0:t.to),[j,v]=b.useState(!1),[p,g]=b.useState(!1);b.useEffect(()=>{h(t==null?void 0:t.from),x(t==null?void 0:t.to)},[t]);const y=l=>{l&&(h(l),n&&q(l,n)&&x(void 0))},C=l=>{l&&x(l)},w=()=>{a&&n&&s({from:a,to:n})};return e.jsx("div",{className:"sticky top-0 z-40 bg-background border-b border-border",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Overview of your analytics"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(X,{onValueChange:S,children:[e.jsxs(I,{className:"w-[140px]",children:[e.jsx(J,{placeholder:"Quick Select"}),e.jsx(U,{className:"h-4 w-4 opacity-50"})]}),e.jsxs(Z,{children:[e.jsx(P,{value:"this-month",children:"This Month"}),e.jsx(P,{value:"last-month",children:"Last Month"}),e.jsx(P,{value:"last-3-months",children:"Last 3 Months"}),e.jsx(P,{value:"this-year",children:"This Year"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(H,{open:j,onOpenChange:v,children:[e.jsx(K,{asChild:!0,children:e.jsxs(T,{variant:"outline",className:O("w-[140px] justify-start text-left font-normal",!a&&"text-muted-foreground"),children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),a?z(a,"LLL dd, y"):"From"]})}),e.jsx(B,{className:"w-auto p-0",align:"start",children:e.jsx("div",{className:"p-3",children:e.jsx(W,{mode:"single",selected:a,onSelect:y,initialFocus:!0,captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-10,toYear:new Date().getFullYear()+1,disabled:l=>n?q(l,n):!1,className:"rounded-md border"})})})]}),e.jsx("div",{className:"text-muted-foreground",children:"to"}),e.jsxs(H,{open:p,onOpenChange:g,children:[e.jsx(K,{asChild:!0,children:e.jsxs(T,{variant:"outline",className:O("w-[140px] justify-start text-left font-normal",!n&&"text-muted-foreground"),disabled:!a,children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),n?z(n,"LLL dd, y"):"To"]})}),e.jsx(B,{className:"w-auto p-0",align:"start",children:e.jsx("div",{className:"p-3",children:e.jsx(W,{mode:"single",selected:n,onSelect:C,initialFocus:!0,captionLayout:"dropdown-buttons",fromYear:a?a.getFullYear():new Date().getFullYear()-10,toYear:new Date().getFullYear()+1,disabled:l=>a?V(l,a):!1,className:"rounded-md border"})})})]}),e.jsx(T,{onClick:w,disabled:!a||!n,className:"ml-2",children:"Apply"})]})]})]})})})};function L({title:t,value:s,change:o,trend:i="neutral"}){return e.jsxs(u,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(Y,{className:"flex flex-row items-center justify-between pb-2",children:e.jsx(A,{className:"text-sm font-medium text-muted-foreground",children:t})}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s}),o&&e.jsx("p",{className:O("text-xs mt-1",i==="up"&&"text-accent",i==="down"&&"text-destructive",i==="neutral"&&"text-muted-foreground"),children:o})]})]})}const he=({metrics:t})=>e.jsxs("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 w-full",children:[e.jsx(L,{title:"Total Revenue",value:`£${t.revenue.value.toLocaleString()}`,change:t.revenue.text,trend:t.revenue.trend}),e.jsx(L,{title:"Average Client Pay",value:`£${t.clientPay.value.toFixed(2)}`,change:t.clientPay.text,trend:t.clientPay.trend}),e.jsx(L,{title:"Average Staff Pay",value:`£${t.staffPay.value.toFixed(2)}`,change:t.staffPay.text,trend:t.staffPay.trend})]}),fe=({salesData:t})=>{var s;return e.jsxs("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 w-full",children:[e.jsx(u,{children:e.jsx(m,{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Shifts"}),e.jsx("p",{className:"text-2xl font-bold",children:(t==null?void 0:t.totalShifts)||0})]})})})}),e.jsx(u,{children:e.jsx(m,{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Clients"}),e.jsx("p",{className:"text-2xl font-bold",children:(t==null?void 0:t.totalClients)||0})]})})})}),e.jsx(u,{children:e.jsx(m,{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Employees"}),e.jsx("p",{className:"text-2xl font-bold",children:(t==null?void 0:t.uniqueEmployees)||0})]})})})}),e.jsx(u,{children:e.jsx(m,{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Profit Margin"}),e.jsxs("p",{className:"text-2xl font-bold",children:[((s=t==null?void 0:t.profitMargin)==null?void 0:s.toFixed(1))||0,"%"]})]})})})})]})},ne=({active:t,payload:s,label:o})=>t&&s&&s.length?e.jsxs("div",{className:"bg-background border border-border p-3 rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-semibold text-foreground",children:o}),s.map((i,f)=>e.jsxs("p",{className:"text-sm",style:{color:i.color},children:[i.name,": £",Number(i.value).toLocaleString()]},f))]}):null,je=({data:t,aggregationLevel:s})=>{const o={dataKey:"display",interval:0};return!t||t.length===0?e.jsxs(u,{children:[e.jsx(Y,{children:e.jsx(A,{children:"Revenue vs Cost Trend"})}),e.jsx(m,{children:e.jsx("div",{className:"h-[400px] flex items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No data available for the selected period"})})})]}):e.jsxs(u,{children:[e.jsxs(Y,{children:[e.jsx(A,{children:"Revenue vs Cost Trend"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s==="daily"&&"Daily view",s==="weekly"&&"Weekly view",s==="monthly"&&"Monthly view"]})]}),e.jsx(m,{children:e.jsx("div",{className:"h-[400px]",children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs(R,{data:t,children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(ee,{dataKey:o.dataKey,tick:{fontSize:12},interval:o.interval}),e.jsx(te,{}),e.jsx(se,{content:e.jsx(ne,{})}),e.jsx(re,{}),e.jsx(G,{type:"monotone",dataKey:"revenue",name:"Revenue",stroke:"hsl(var(--primary))",fill:"hsl(var(--primary))",fillOpacity:.3,strokeWidth:2}),e.jsx(G,{type:"monotone",dataKey:"cost",name:"Cost",stroke:"hsl(var(--accent))",fill:"hsl(var(--accent))",fillOpacity:.3,strokeWidth:2})]})})})})]})},ve=()=>e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Loading Dashboard"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fetching your data..."})]})]})});export{fe as A,me as D,ve as L,he as M,je as R,ue as c};
