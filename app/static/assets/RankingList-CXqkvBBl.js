import{c as Ve,f as Pe,r as d,g as Y,j as t,P as B,h as z,i as Q,k as Ge,l as Ke,d as U,b as Qe,R as I,T as Je,m as Ze,n as et,o as tt,A as K,a as rt,p as D,q as ot}from"./index-x1jOpyAd.js";import{B as $}from"./button-B7kWtLSy.js";import{a as nt,P as ee,b as te,g as Se,c as re,C as we,f as ne,d as Ce,i as je,e as st,s as de,h as ue}from"./locationUtils-BPDCZUVF.js";import{u as lt,C as at,a as he,S as ct,b as it,c as dt,d as ut,e as oe,f as ht,g as ft}from"./select-DGhIds80.js";import{C as mt,a as pt,b as xt,d as vt}from"./card-D392RIoY.js";import{P as bt}from"./progress-CVJm_N_V.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=Ve("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);function fe(e,o){return nt(e,-o)}const $t=(e,o)=>{var T,S,y,b,j,N,k,P,H,g,E,A,q,J,Z;if(!e)return{revenue:{value:0,change:0,trend:"neutral",text:"No data available"},clientPay:{value:0,change:0,trend:"neutral",text:"No data available"},staffPay:{value:0,change:0,trend:"neutral",text:"No data available"},totalShifts:{value:0,change:0,trend:"neutral",text:"No data available"},paidHours:{value:0,change:0,trend:"neutral",text:"No data available"},uniqueEmployees:{value:0,change:0,trend:"neutral",text:"No data available"},avgShiftDuration:{value:0,change:0,trend:"neutral",text:"No data available"},totalClients:{value:0,change:0,trend:"neutral",text:"No data available"}};const r=e.totalRevenue||0,c=e.avgClientPayPerHour||0,s=e.avgStaffPayPerHour||0,l=((T=e.previousPeriod)==null?void 0:T.totalRevenue)||0,a=((S=e.previousPeriod)==null?void 0:S.avgClientPayPerHour)||0,i=((y=e.previousPeriod)==null?void 0:y.avgStaffPayPerHour)||0,n=(M,W)=>W>0?(M-W)/W*100:0,u=n(r,l),f=n(c,a),m=n(s,i),h=M=>M>0?"up":M<0?"down":"neutral",x=(M,W,V)=>{if(!W)return"No previous data";let p="";return V<=7?p="last week":V<=31?p="last month":V<=93?p="last quarter":p="last period",`${M>0?"+":""}${Math.abs(M).toFixed(1)}% from ${p}`},v=Math.ceil((o.to.getTime()-o.from.getTime())/(1e3*60*60*24)),C=!!e.previousPeriod;return{revenue:{value:r,change:u,trend:h(u),text:x(u,C,v)},clientPay:{value:c,change:f,trend:h(f),text:x(f,C,v)},staffPay:{value:s,change:m,trend:h(m),text:x(m,C,v)},totalShifts:{value:e.totalShifts,change:n(e.totalShifts,((b=e.previousPeriod)==null?void 0:b.totalShifts)||0),trend:h(n(e.totalShifts,((j=e.previousPeriod)==null?void 0:j.totalShifts)||0)),text:x(n(e.totalShifts,((N=e.previousPeriod)==null?void 0:N.totalShifts)||0),C,v)},paidHours:{value:e.totalPaidHours||0,change:n(e.totalPaidHours||0,((k=e.previousPeriod)==null?void 0:k.totalPaidHours)||0)||0,trend:h(n(e.totalPaidHours||0,((P=e.previousPeriod)==null?void 0:P.totalPaidHours)||0)),text:x(n(e.totalPaidHours||0,((H=e.previousPeriod)==null?void 0:H.totalPaidHours)||0),C,v)},uniqueEmployees:{value:e.uniqueEmployees,change:n(e.uniqueEmployees,((g=e.previousPeriod)==null?void 0:g.uniqueEmployees)||0),trend:h(n(e.uniqueEmployees,((E=e.previousPeriod)==null?void 0:E.uniqueEmployees)||0)),text:x(n(e.uniqueEmployees,((A=e.previousPeriod)==null?void 0:A.uniqueEmployees)||0),C,v)},avgShiftDuration:{value:e.totalPaidHours&&e.totalShifts?e.totalPaidHours/e.totalShifts:0,change:0,trend:"neutral",text:"Average hours per shift"},totalClients:{value:e.totalClients,change:n(e.totalClients,((q=e.previousPeriod)==null?void 0:q.totalClients)||0),trend:h(n(e.totalClients,((J=e.previousPeriod)==null?void 0:J.totalClients)||0)),text:x(n(e.totalClients,((Z=e.previousPeriod)==null?void 0:Z.totalClients)||0),C,v)}}};var ae="Checkbox",[St,Dt]=Pe(ae),[wt,me]=St(ae);function Ct(e){const{__scopeCheckbox:o,checked:r,children:c,defaultChecked:s,disabled:l,form:a,name:i,onCheckedChange:n,required:u,value:f="on",internal_do_not_use_render:m}=e,[h,x]=Ke({prop:r,defaultProp:s??!1,onChange:n,caller:ae}),[v,C]=d.useState(null),[T,S]=d.useState(null),y=d.useRef(!1),b=v?!!a||!!v.closest("form"):!0,j={checked:h,disabled:l,setChecked:x,control:v,setControl:C,name:i,form:a,value:f,hasConsumerStoppedPropagationRef:y,required:u,defaultChecked:F(s)?!1:s,isFormControl:b,bubbleInput:T,setBubbleInput:S};return t.jsx(wt,{scope:o,...j,children:jt(m)?m(j):c})}var Ne="CheckboxTrigger",Ee=d.forwardRef(({__scopeCheckbox:e,onKeyDown:o,onClick:r,...c},s)=>{const{control:l,value:a,disabled:i,checked:n,required:u,setControl:f,setChecked:m,hasConsumerStoppedPropagationRef:h,isFormControl:x,bubbleInput:v}=me(Ne,e),C=Y(s,f),T=d.useRef(n);return d.useEffect(()=>{const S=l==null?void 0:l.form;if(S){const y=()=>m(T.current);return S.addEventListener("reset",y),()=>S.removeEventListener("reset",y)}},[l,m]),t.jsx(B.button,{type:"button",role:"checkbox","aria-checked":F(n)?"mixed":n,"aria-required":u,"data-state":_e(n),"data-disabled":i?"":void 0,disabled:i,value:a,...c,ref:C,onKeyDown:z(o,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:z(r,S=>{m(y=>F(y)?!0:!y),v&&x&&(h.current=S.isPropagationStopped(),h.current||S.stopPropagation())})})});Ee.displayName=Ne;var pe=d.forwardRef((e,o)=>{const{__scopeCheckbox:r,name:c,checked:s,defaultChecked:l,required:a,disabled:i,value:n,onCheckedChange:u,form:f,...m}=e;return t.jsx(Ct,{__scopeCheckbox:r,checked:s,defaultChecked:l,disabled:i,required:a,onCheckedChange:u,name:c,form:f,value:n,internal_do_not_use_render:({isFormControl:h})=>t.jsxs(t.Fragment,{children:[t.jsx(Ee,{...m,ref:o,__scopeCheckbox:r}),h&&t.jsx(Ae,{__scopeCheckbox:r})]})})});pe.displayName=ae;var Te="CheckboxIndicator",ke=d.forwardRef((e,o)=>{const{__scopeCheckbox:r,forceMount:c,...s}=e,l=me(Te,r);return t.jsx(Q,{present:c||F(l.checked)||l.checked===!0,children:t.jsx(B.span,{"data-state":_e(l.checked),"data-disabled":l.disabled?"":void 0,...s,ref:o,style:{pointerEvents:"none",...e.style}})})});ke.displayName=Te;var Re="CheckboxBubbleInput",Ae=d.forwardRef(({__scopeCheckbox:e,...o},r)=>{const{control:c,hasConsumerStoppedPropagationRef:s,checked:l,defaultChecked:a,required:i,disabled:n,name:u,value:f,form:m,bubbleInput:h,setBubbleInput:x}=me(Re,e),v=Y(r,x),C=lt(l),T=Ge(c);d.useEffect(()=>{const y=h;if(!y)return;const b=window.HTMLInputElement.prototype,N=Object.getOwnPropertyDescriptor(b,"checked").set,k=!s.current;if(C!==l&&N){const P=new Event("click",{bubbles:k});y.indeterminate=F(l),N.call(y,F(l)?!1:l),y.dispatchEvent(P)}},[h,C,l,s]);const S=d.useRef(F(l)?!1:l);return t.jsx(B.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??S.current,required:i,disabled:n,name:u,value:f,form:m,...o,tabIndex:-1,ref:v,style:{...o.style,...T,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Ae.displayName=Re;function jt(e){return typeof e=="function"}function F(e){return e==="indeterminate"}function _e(e){return F(e)?"indeterminate":e?"checked":"unchecked"}const G=d.forwardRef(({className:e,...o},r)=>t.jsx(pe,{ref:r,className:U("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...o,children:t.jsx(ke,{className:U("flex items-center justify-center text-current"),children:t.jsx(at,{className:"h-4 w-4"})})}));G.displayName=pe.displayName;const Ut=({dateRange:e,onDateRangeChange:o,calendarOpen:r,onCalendarOpenChange:c,tempDateRange:s,onTempDateRangeChange:l,selectedLocations:a=[],onLocationsChange:i,selectedSites:n=[],onSitesChange:u})=>{const{role:f,locations:m}=Qe(),[h,x]=I.useState([]),[v,C]=I.useState([]),[T,S]=I.useState(!1),[y,b]=I.useState(!1);I.useEffect(()=>{(async()=>{try{const w=await fetch(`${K.SALES_SUMMARY.replace("sales-summary","locations")}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`},credentials:"include"});if(w.ok){const _=await w.json();x(f==="admin"?_:_.filter(L=>m.includes(L)))}}catch(w){console.error("Failed to fetch locations:",w)}})()},[f,m]),I.useEffect(()=>{u&&(async()=>{try{const w=new URLSearchParams;a.length>0&&a.forEach(L=>w.append("locations",L));const _=await fetch(`${K.SITES}?${w}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`},credentials:"include"});if(_.ok){const L=await _.json();C(L)}}catch(w){console.error("Failed to fetch sites:",w)}})()},[a,u]);const j=p=>{i&&(a.includes(p)?i(a.filter(w=>w!==p)):i([...a,p]))},N=p=>{u&&(n.includes(p)?u(n.filter(w=>w!==p)):u([...n,p]))},k=p=>{const w=new Date;let _,L;switch(p){case"this-month":_=de(w),L=ue(w);break;case"last-month":_=de(fe(w,1)),L=ue(fe(w,1));break;case"last-3-months":_=de(fe(w,2)),L=ue(w);break;case"this-year":_=new Date(w.getFullYear(),0,1),L=new Date(w.getFullYear(),11,31);break;default:return}o({from:_,to:L})},[P,H]=I.useState(e==null?void 0:e.from),[g,E]=I.useState(e==null?void 0:e.to),[A,q]=I.useState(!1),[J,Z]=I.useState(!1);I.useEffect(()=>{H(e==null?void 0:e.from),E(e==null?void 0:e.to)},[e]);const M=p=>{p&&(H(p),g&&je(p,g)&&E(void 0))},W=p=>{p&&E(p)},V=()=>{P&&g&&o({from:P,to:g})};return t.jsx("div",{className:"sticky top-0 z-40 bg-background border-b border-border",children:t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),t.jsx("p",{className:"text-muted-foreground",children:"Overview of your analytics"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[i&&t.jsxs("div",{className:"flex flex-col gap-1.5",children:[t.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Location"}),t.jsxs(ee,{open:T,onOpenChange:S,children:[t.jsx(te,{asChild:!0,children:t.jsxs($,{variant:"outline",className:"w-[180px] justify-between text-left font-normal",children:[t.jsx("div",{className:"flex items-center gap-2 overflow-hidden mr-2",children:t.jsx("span",{className:"truncate",children:a.length===0?"All Locations":a.length===1?Se(a[0]):`${a.length} locations`})}),t.jsx(he,{className:"h-4 w-4 opacity-50 shrink-0"})]})}),t.jsx(re,{className:"w-[200px] p-0",align:"start",children:t.jsxs("div",{className:"p-2 max-h-[300px] overflow-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-muted rounded-sm cursor-pointer mb-1",onClick:p=>{p.stopPropagation(),a.length===h.length?i([]):i(h)},children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(G,{checked:h.length>0&&a.length===h.length,className:"pointer-events-none"}),t.jsx("span",{className:"text-sm font-medium",children:"All Locations"})]}),a.length>0&&t.jsx($,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-muted-foreground hover:text-foreground",onClick:p=>{p.stopPropagation(),i([])},children:"Clear"})]}),t.jsx("div",{className:"h-px bg-border my-1"}),t.jsx(Je,{children:h.map(p=>t.jsxs("div",{className:"flex items-center space-x-2 p-2 hover:bg-muted rounded-sm cursor-pointer",onClick:w=>{w.stopPropagation(),j(p)},children:[t.jsx(G,{checked:a.includes(p),className:"pointer-events-none"}),t.jsxs(Ze,{children:[t.jsx(et,{asChild:!0,children:t.jsx("span",{className:"text-sm truncate font-medium",children:Se(p)})}),t.jsx(tt,{side:"right",children:t.jsx("p",{children:p})})]})]},p))})]})})]})]}),u&&t.jsxs("div",{className:"flex flex-col gap-1.5",children:[t.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Site"}),t.jsxs(ee,{open:y,onOpenChange:b,children:[t.jsx(te,{asChild:!0,children:t.jsxs($,{variant:"outline",className:"w-[180px] justify-between text-left font-normal",children:[t.jsx("div",{className:"flex items-center gap-2 overflow-hidden mr-2",children:t.jsx("span",{className:"truncate",children:n.length===0?"All Sites":`${n.length} sites`})}),t.jsx(he,{className:"h-4 w-4 opacity-50 shrink-0"})]})}),t.jsx(re,{className:"w-[200px] p-0",align:"start",children:t.jsxs("div",{className:"p-2 max-h-[300px] overflow-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-muted rounded-sm cursor-pointer mb-1",onClick:p=>{p.stopPropagation(),n.length===v.length?u([]):u(v)},children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(G,{checked:v.length>0&&n.length===v.length,className:"pointer-events-none"}),t.jsx("span",{className:"text-sm font-medium",children:"All Sites"})]}),n.length>0&&t.jsx($,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-muted-foreground hover:text-foreground",onClick:p=>{p.stopPropagation(),u([])},children:"Clear"})]}),t.jsx("div",{className:"h-px bg-border my-1"}),v.map(p=>t.jsxs("div",{className:"flex items-center space-x-2 p-2 hover:bg-muted rounded-sm cursor-pointer",onClick:w=>{w.stopPropagation(),N(p)},children:[t.jsx(G,{checked:n.includes(p),className:"pointer-events-none"}),t.jsx("span",{className:"text-sm truncate font-medium",children:p})]},p))]})})]})]}),t.jsxs("div",{className:"flex flex-col gap-1.5",children:[t.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Range"}),t.jsxs(ct,{onValueChange:k,children:[t.jsxs(it,{className:"w-[140px]",children:[t.jsx(dt,{placeholder:"Quick Select"}),t.jsx(he,{className:"h-4 w-4 opacity-50"})]}),t.jsxs(ut,{children:[t.jsx(oe,{value:"this-month",children:"This Month"}),t.jsx(oe,{value:"last-month",children:"Last Month"}),t.jsx(oe,{value:"last-3-months",children:"Last 3 Months"}),t.jsx(oe,{value:"this-year",children:"This Year"})]})]})]}),t.jsxs("div",{className:"flex flex-col gap-1.5",children:[t.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"From Date"}),t.jsxs(ee,{open:A,onOpenChange:q,children:[t.jsx(te,{asChild:!0,children:t.jsxs($,{variant:"outline",className:U("w-[140px] justify-start text-left font-normal",!P&&"text-muted-foreground"),children:[t.jsx(we,{className:"mr-2 h-4 w-4"}),P?ne(P,"LLL dd, y"):"From"]})}),t.jsx(re,{className:"w-auto p-0",align:"start",children:t.jsx("div",{className:"p-3",children:t.jsx(Ce,{mode:"single",selected:P,onSelect:M,initialFocus:!0,captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-10,toYear:new Date().getFullYear()+1,disabled:p=>g?je(p,g):!1,className:"rounded-md border"})})})]})]}),t.jsxs("div",{className:"flex flex-col gap-1.5",children:[t.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Till Date"}),t.jsxs(ee,{open:J,onOpenChange:Z,children:[t.jsx(te,{asChild:!0,children:t.jsxs($,{variant:"outline",className:U("w-[140px] justify-start text-left font-normal",!g&&"text-muted-foreground"),disabled:!P,children:[t.jsx(we,{className:"mr-2 h-4 w-4"}),g?ne(g,"LLL dd, y"):"To"]})}),t.jsx(re,{className:"w-auto p-0",align:"start",children:t.jsx("div",{className:"p-3",children:t.jsx(Ce,{mode:"single",selected:g,onSelect:W,initialFocus:!0,captionLayout:"dropdown-buttons",fromYear:P?P.getFullYear():new Date().getFullYear()-10,toYear:new Date().getFullYear()+1,disabled:p=>P?st(p,P):!1,className:"rounded-md border"})})})]})]}),t.jsxs("div",{className:"flex flex-col gap-1.5 pb-0.5",children:[t.jsx("div",{className:"h-4"})," ",t.jsx($,{onClick:V,disabled:!P||!g,className:"",children:"Apply"})]})]})]})})})},Xt=(e,o,r)=>{const[c,s]=d.useState([]),[l,a]=d.useState([]),[i,n]=d.useState([]),[u,f]=d.useState(!1),[m,h]=d.useState(!1),[x,v]=d.useState(!1);rt();const C=()=>{const b=new URLSearchParams({start:ne(e.from,"yyyy-MM-dd"),end:ne(e.to,"yyyy-MM-dd")});return o&&o.length>0&&o.forEach(j=>b.append("locations",j)),r&&r.length>0&&r.forEach(j=>b.append("sites",j)),b},T=async()=>{f(!0);try{const b=C();b.append("limit","10");const j=await fetch(`${K.RANKINGS_STAFF}?${b}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(j.ok){const N=await j.json();s(N)}}catch(b){console.error(b)}finally{f(!1)}},S=async()=>{h(!0);try{const b=C();b.append("limit","5"),b.append("metric","revenue");const j=await fetch(`${K.RANKINGS_CLIENTS}?${b}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(j.ok){const N=await j.json();a(N)}}catch(b){console.error(b)}finally{h(!1)}},y=async()=>{v(!0);try{const b=C();b.append("limit","5"),b.append("metric","shifts");const j=await fetch(`${K.RANKINGS_CLIENTS}?${b}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(j.ok){const N=await j.json();n(N)}}catch(b){console.error(b)}finally{v(!1)}};return d.useEffect(()=>{T(),S(),y()},[e,o,r]),{topStaff:c,isLoadingStaff:u,topClientsRevenue:l,isLoadingClientsRev:m,topClientsShifts:i,isLoadingClientsShifts:x}};function yt(e,o){return d.useReducer((r,c)=>o[r][c]??r,e)}var xe="ScrollArea",[Le,qt]=Pe(xe),[Pt,R]=Le(xe),Ie=d.forwardRef((e,o)=>{const{__scopeScrollArea:r,type:c="hover",dir:s,scrollHideDelay:l=600,...a}=e,[i,n]=d.useState(null),[u,f]=d.useState(null),[m,h]=d.useState(null),[x,v]=d.useState(null),[C,T]=d.useState(null),[S,y]=d.useState(0),[b,j]=d.useState(0),[N,k]=d.useState(!1),[P,H]=d.useState(!1),g=Y(o,A=>n(A)),E=ht(s);return t.jsx(Pt,{scope:r,type:c,dir:E,scrollHideDelay:l,scrollArea:i,viewport:u,onViewportChange:f,content:m,onContentChange:h,scrollbarX:x,onScrollbarXChange:v,scrollbarXEnabled:N,onScrollbarXEnabledChange:k,scrollbarY:C,onScrollbarYChange:T,scrollbarYEnabled:P,onScrollbarYEnabledChange:H,onCornerWidthChange:y,onCornerHeightChange:j,children:t.jsx(B.div,{dir:E,...a,ref:g,style:{position:"relative","--radix-scroll-area-corner-width":S+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});Ie.displayName=xe;var He="ScrollAreaViewport",Oe=d.forwardRef((e,o)=>{const{__scopeScrollArea:r,children:c,nonce:s,...l}=e,a=R(He,r),i=d.useRef(null),n=Y(o,i,a.onViewportChange);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),t.jsx(B.div,{"data-radix-scroll-area-viewport":"",...l,ref:n,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:t.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:c})})]})});Oe.displayName=He;var O="ScrollAreaScrollbar",ve=d.forwardRef((e,o)=>{const{forceMount:r,...c}=e,s=R(O,e.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:a}=s,i=e.orientation==="horizontal";return d.useEffect(()=>(i?l(!0):a(!0),()=>{i?l(!1):a(!1)}),[i,l,a]),s.type==="hover"?t.jsx(Nt,{...c,ref:o,forceMount:r}):s.type==="scroll"?t.jsx(Et,{...c,ref:o,forceMount:r}):s.type==="auto"?t.jsx(Me,{...c,ref:o,forceMount:r}):s.type==="always"?t.jsx(be,{...c,ref:o}):null});ve.displayName=O;var Nt=d.forwardRef((e,o)=>{const{forceMount:r,...c}=e,s=R(O,e.__scopeScrollArea),[l,a]=d.useState(!1);return d.useEffect(()=>{const i=s.scrollArea;let n=0;if(i){const u=()=>{window.clearTimeout(n),a(!0)},f=()=>{n=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return i.addEventListener("pointerenter",u),i.addEventListener("pointerleave",f),()=>{window.clearTimeout(n),i.removeEventListener("pointerenter",u),i.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),t.jsx(Q,{present:r||l,children:t.jsx(Me,{"data-state":l?"visible":"hidden",...c,ref:o})})}),Et=d.forwardRef((e,o)=>{const{forceMount:r,...c}=e,s=R(O,e.__scopeScrollArea),l=e.orientation==="horizontal",a=ie(()=>n("SCROLL_END"),100),[i,n]=yt("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return d.useEffect(()=>{if(i==="idle"){const u=window.setTimeout(()=>n("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[i,s.scrollHideDelay,n]),d.useEffect(()=>{const u=s.viewport,f=l?"scrollLeft":"scrollTop";if(u){let m=u[f];const h=()=>{const x=u[f];m!==x&&(n("SCROLL"),a()),m=x};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[s.viewport,l,n,a]),t.jsx(Q,{present:r||i!=="hidden",children:t.jsx(be,{"data-state":i==="hidden"?"hidden":"visible",...c,ref:o,onPointerEnter:z(e.onPointerEnter,()=>n("POINTER_ENTER")),onPointerLeave:z(e.onPointerLeave,()=>n("POINTER_LEAVE"))})})}),Me=d.forwardRef((e,o)=>{const r=R(O,e.__scopeScrollArea),{forceMount:c,...s}=e,[l,a]=d.useState(!1),i=e.orientation==="horizontal",n=ie(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,f=r.viewport.offsetHeight<r.viewport.scrollHeight;a(i?u:f)}},10);return X(r.viewport,n),X(r.content,n),t.jsx(Q,{present:c||l,children:t.jsx(be,{"data-state":l?"visible":"hidden",...s,ref:o})})}),be=d.forwardRef((e,o)=>{const{orientation:r="vertical",...c}=e,s=R(O,e.__scopeScrollArea),l=d.useRef(null),a=d.useRef(0),[i,n]=d.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=We(i.viewport,i.content),f={...c,sizes:i,onSizesChange:n,hasThumb:u>0&&u<1,onThumbChange:h=>l.current=h,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:h=>a.current=h};function m(h,x){return Lt(h,a.current,i,x)}return r==="horizontal"?t.jsx(Tt,{...f,ref:o,onThumbPositionChange:()=>{if(s.viewport&&l.current){const h=s.viewport.scrollLeft,x=ye(h,i,s.dir);l.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=m(h,s.dir))}}):r==="vertical"?t.jsx(kt,{...f,ref:o,onThumbPositionChange:()=>{if(s.viewport&&l.current){const h=s.viewport.scrollTop,x=ye(h,i);l.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=m(h))}}):null}),Tt=d.forwardRef((e,o)=>{const{sizes:r,onSizesChange:c,...s}=e,l=R(O,e.__scopeScrollArea),[a,i]=d.useState(),n=d.useRef(null),u=Y(o,n,l.onScrollbarXChange);return d.useEffect(()=>{n.current&&i(getComputedStyle(n.current))},[n]),t.jsx(Fe,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{bottom:0,left:l.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:l.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ce(r)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,m)=>{if(l.viewport){const h=l.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),De(h,m)&&f.preventDefault()}},onResize:()=>{n.current&&l.viewport&&a&&c({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:n.current.clientWidth,paddingStart:le(a.paddingLeft),paddingEnd:le(a.paddingRight)}})}})}),kt=d.forwardRef((e,o)=>{const{sizes:r,onSizesChange:c,...s}=e,l=R(O,e.__scopeScrollArea),[a,i]=d.useState(),n=d.useRef(null),u=Y(o,n,l.onScrollbarYChange);return d.useEffect(()=>{n.current&&i(getComputedStyle(n.current))},[n]),t.jsx(Fe,{"data-orientation":"vertical",...s,ref:u,sizes:r,style:{top:0,right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ce(r)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,m)=>{if(l.viewport){const h=l.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),De(h,m)&&f.preventDefault()}},onResize:()=>{n.current&&l.viewport&&a&&c({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:n.current.clientHeight,paddingStart:le(a.paddingTop),paddingEnd:le(a.paddingBottom)}})}})}),[Rt,ze]=Le(O),Fe=d.forwardRef((e,o)=>{const{__scopeScrollArea:r,sizes:c,hasThumb:s,onThumbChange:l,onThumbPointerUp:a,onThumbPointerDown:i,onThumbPositionChange:n,onDragScroll:u,onWheelScroll:f,onResize:m,...h}=e,x=R(O,r),[v,C]=d.useState(null),T=Y(o,g=>C(g)),S=d.useRef(null),y=d.useRef(""),b=x.viewport,j=c.content-c.viewport,N=D(f),k=D(n),P=ie(m,10);function H(g){if(S.current){const E=g.clientX-S.current.left,A=g.clientY-S.current.top;u({x:E,y:A})}}return d.useEffect(()=>{const g=E=>{const A=E.target;(v==null?void 0:v.contains(A))&&N(E,j)};return document.addEventListener("wheel",g,{passive:!1}),()=>document.removeEventListener("wheel",g,{passive:!1})},[b,v,j,N]),d.useEffect(k,[c,k]),X(v,P),X(x.content,P),t.jsx(Rt,{scope:r,scrollbar:v,hasThumb:s,onThumbChange:D(l),onThumbPointerUp:D(a),onThumbPositionChange:k,onThumbPointerDown:D(i),children:t.jsx(B.div,{...h,ref:T,style:{position:"absolute",...h.style},onPointerDown:z(e.onPointerDown,g=>{g.button===0&&(g.target.setPointerCapture(g.pointerId),S.current=v.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),H(g))}),onPointerMove:z(e.onPointerMove,H),onPointerUp:z(e.onPointerUp,g=>{const E=g.target;E.hasPointerCapture(g.pointerId)&&E.releasePointerCapture(g.pointerId),document.body.style.webkitUserSelect=y.current,x.viewport&&(x.viewport.style.scrollBehavior=""),S.current=null})})})}),se="ScrollAreaThumb",Ye=d.forwardRef((e,o)=>{const{forceMount:r,...c}=e,s=ze(se,e.__scopeScrollArea);return t.jsx(Q,{present:r||s.hasThumb,children:t.jsx(At,{ref:o,...c})})}),At=d.forwardRef((e,o)=>{const{__scopeScrollArea:r,style:c,...s}=e,l=R(se,r),a=ze(se,r),{onThumbPositionChange:i}=a,n=Y(o,m=>a.onThumbChange(m)),u=d.useRef(void 0),f=ie(()=>{u.current&&(u.current(),u.current=void 0)},100);return d.useEffect(()=>{const m=l.viewport;if(m){const h=()=>{if(f(),!u.current){const x=It(m,i);u.current=x,i()}};return i(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[l.viewport,f,i]),t.jsx(B.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:n,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...c},onPointerDownCapture:z(e.onPointerDownCapture,m=>{const x=m.target.getBoundingClientRect(),v=m.clientX-x.left,C=m.clientY-x.top;a.onThumbPointerDown({x:v,y:C})}),onPointerUp:z(e.onPointerUp,a.onThumbPointerUp)})});Ye.displayName=se;var ge="ScrollAreaCorner",Be=d.forwardRef((e,o)=>{const r=R(ge,e.__scopeScrollArea),c=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&c?t.jsx(_t,{...e,ref:o}):null});Be.displayName=ge;var _t=d.forwardRef((e,o)=>{const{__scopeScrollArea:r,...c}=e,s=R(ge,r),[l,a]=d.useState(0),[i,n]=d.useState(0),u=!!(l&&i);return X(s.scrollbarX,()=>{var m;const f=((m=s.scrollbarX)==null?void 0:m.offsetHeight)||0;s.onCornerHeightChange(f),n(f)}),X(s.scrollbarY,()=>{var m;const f=((m=s.scrollbarY)==null?void 0:m.offsetWidth)||0;s.onCornerWidthChange(f),a(f)}),u?t.jsx(B.div,{...c,ref:o,style:{width:l,height:i,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function le(e){return e?parseInt(e,10):0}function We(e,o){const r=e/o;return isNaN(r)?0:r}function ce(e){const o=We(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,c=(e.scrollbar.size-r)*o;return Math.max(c,18)}function Lt(e,o,r,c="ltr"){const s=ce(r),l=s/2,a=o||l,i=s-a,n=r.scrollbar.paddingStart+a,u=r.scrollbar.size-r.scrollbar.paddingEnd-i,f=r.content-r.viewport,m=c==="ltr"?[0,f]:[f*-1,0];return $e([n,u],m)(e)}function ye(e,o,r="ltr"){const c=ce(o),s=o.scrollbar.paddingStart+o.scrollbar.paddingEnd,l=o.scrollbar.size-s,a=o.content-o.viewport,i=l-c,n=r==="ltr"?[0,a]:[a*-1,0],u=ft(e,n);return $e([0,a],[0,i])(u)}function $e(e,o){return r=>{if(e[0]===e[1]||o[0]===o[1])return o[0];const c=(o[1]-o[0])/(e[1]-e[0]);return o[0]+c*(r-e[0])}}function De(e,o){return e>0&&e<o}var It=(e,o=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},c=0;return function s(){const l={left:e.scrollLeft,top:e.scrollTop},a=r.left!==l.left,i=r.top!==l.top;(a||i)&&o(),r=l,c=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(c)};function ie(e,o){const r=D(e),c=d.useRef(0);return d.useEffect(()=>()=>window.clearTimeout(c.current),[]),d.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(r,o)},[r,o])}function X(e,o){const r=D(o);ot(()=>{let c=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(c),c=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(c),s.unobserve(e)}}},[e,r])}var Ue=Ie,Ht=Oe,Ot=Be;const Xe=d.forwardRef(({className:e,children:o,...r},c)=>t.jsxs(Ue,{ref:c,className:U("relative overflow-hidden",e),...r,children:[t.jsx(Ht,{className:"h-full w-full rounded-[inherit]",children:o}),t.jsx(qe,{}),t.jsx(Ot,{})]}));Xe.displayName=Ue.displayName;const qe=d.forwardRef(({className:e,orientation:o="vertical",...r},c)=>t.jsx(ve,{ref:c,orientation:o,className:U("flex touch-none select-none transition-colors",o==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",o==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:t.jsx(Ye,{className:"relative flex-1 rounded-full bg-border"})}));qe.displayName=ve.displayName;const Vt=({title:e,data:o,isLoading:r=!1,valueFormatter:c=i=>i.toLocaleString(),icon:s,className:l,barColor:a="bg-primary"})=>{const i=Math.max(...o.map(n=>n.value),0);return t.jsxs(mt,{className:U("flex flex-col h-full shadow-sm hover:shadow-md transition-shadow",l),children:[t.jsxs(pt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[s&&t.jsx("div",{className:"p-1.5 bg-muted rounded-md",children:s}),t.jsx(xt,{className:"text-sm font-medium",children:e})]}),t.jsx(gt,{className:"h-4 w-4 text-muted-foreground cursor-pointer hover:text-foreground"})]}),t.jsx(vt,{className:"pt-4 flex-1",children:r?t.jsx("div",{className:"space-y-4",children:[...Array(5)].map((n,u)=>t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("div",{className:"h-4 w-1/3 bg-muted animate-pulse rounded"}),t.jsx("div",{className:"h-2 w-full bg-muted animate-pulse rounded"})]},u))}):o.length===0?t.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground p-4",children:"No data available"}):t.jsx(Xe,{className:"h-[300px] pr-4",children:t.jsx("div",{className:"space-y-5",children:o.map((n,u)=>t.jsxs("div",{className:"flex flex-col gap-1.5 group",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 max-w-[70%]",children:[t.jsx("span",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-muted text-[10px] font-medium text-muted-foreground group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:u+1}),t.jsx("span",{className:"font-medium truncate",title:n.name,children:n.name})]}),t.jsx("span",{className:"font-semibold",children:c(n.value)})]}),t.jsx(bt,{value:i>0?n.value/i*100:0,className:"h-1.5",indicatorClassName:a})]},u))})})})]})};export{Ut as D,Vt as R,$t as c,Xt as u};
