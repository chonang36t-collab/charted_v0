import{c as Ze,h as es,r as l,U as ss,p as as,j as e,v as ts,P as se,q as ie,w as rs,e as de,B as _,I as je,L as ns,y as D,ab as is,u as ls,d as os,a3 as cs,a4 as ds,a5 as us,a6 as hs,a7 as ms,a8 as xs,a9 as gs,aa as vs,A as le}from"./index-C7GgnOEf.js";import{D as fs}from"./DashboardLayout-Dtmr9scN.js";import{C as V,d as H,a as be,b as Ne}from"./card-DDa3_Bc_.js";import{c as Se,R as js,I as ps,P as ys}from"./index-D7LprvF8.js";import{D as bs}from"./DashboardHeader-C2EcTbRV.js";import{u as Ns,O as Ss}from"./OperationalTrendChart-Bt_lNJDA.js";import{u as Cs,L as Ts,R as As}from"./LoadingOverlay-mui7r4It.js";import{R as Ce,C as Ls,X as Ds,Y as Rs,T as Te,B as Fs,a as Ae,L as Is}from"./generateCategoricalChart-zla-3xaw.js";import{B as ks}from"./BarChart-CESHsCUu.js";import{P as Ms,a as ws}from"./PieChart-CAxzp2rN.js";import{T as Le,a as De,b as X,c as R,d as Re,e as T,f as Es}from"./table-B2oJJ76u.js";import{P as Os}from"./pen-DcieVZOu.js";import{T as Ps}from"./trash-2-CDh1WOlo.js";import{D as $s,b as Bs,c as _s,d as Vs,f as Hs,e as zs}from"./dialog-BfNW01Pz.js";import{L as k}from"./label-D1dh-0Ne.js";import{S as Y,a as q,b as J,c as W,d as P}from"./select-D93vLm91.js";import{u as Gs}from"./useRecords-MJYbGCzQ.js";import{f as Z}from"./popover-BgMRWZlL.js";import"./users-CYfYM6JU.js";import"./locationUtils-D6uzbpg4.js";import"./index-CEfHyUHo.js";import"./Line-CZw4Exgl.js";import"./AreaChart-DDCdJb6N.js";import"./useQuery-D196YJqh.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=Ze("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var ae="Tabs",[Us,Ca]=es(ae,[Se]),Fe=Se(),[Ys,ue]=Us(ae),Ie=l.forwardRef((s,n)=>{const{__scopeTabs:a,value:i,onValueChange:c,defaultValue:h,orientation:d="horizontal",dir:j,activationMode:x="automatic",...y}=s,u=ss(j),[m,g]=as({prop:i,onChange:c,defaultProp:h??"",caller:ae});return e.jsx(Ys,{scope:a,baseId:ts(),value:m,onValueChange:g,orientation:d,dir:u,activationMode:x,children:e.jsx(se.div,{dir:u,"data-orientation":d,...y,ref:n})})});Ie.displayName=ae;var ke="TabsList",Me=l.forwardRef((s,n)=>{const{__scopeTabs:a,loop:i=!0,...c}=s,h=ue(ke,a),d=Fe(a);return e.jsx(js,{asChild:!0,...d,orientation:h.orientation,dir:h.dir,loop:i,children:e.jsx(se.div,{role:"tablist","aria-orientation":h.orientation,...c,ref:n})})});Me.displayName=ke;var we="TabsTrigger",Ee=l.forwardRef((s,n)=>{const{__scopeTabs:a,value:i,disabled:c=!1,...h}=s,d=ue(we,a),j=Fe(a),x=$e(d.baseId,i),y=Be(d.baseId,i),u=i===d.value;return e.jsx(ps,{asChild:!0,...j,focusable:!c,active:u,children:e.jsx(se.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":y,"data-state":u?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:x,...h,ref:n,onMouseDown:ie(s.onMouseDown,m=>{!c&&m.button===0&&m.ctrlKey===!1?d.onValueChange(i):m.preventDefault()}),onKeyDown:ie(s.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&d.onValueChange(i)}),onFocus:ie(s.onFocus,()=>{const m=d.activationMode!=="manual";!u&&!c&&m&&d.onValueChange(i)})})})});Ee.displayName=we;var Oe="TabsContent",Pe=l.forwardRef((s,n)=>{const{__scopeTabs:a,value:i,forceMount:c,children:h,...d}=s,j=ue(Oe,a),x=$e(j.baseId,i),y=Be(j.baseId,i),u=i===j.value,m=l.useRef(u);return l.useEffect(()=>{const g=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(g)},[]),e.jsx(rs,{present:c||u,children:({present:g})=>e.jsx(se.div,{"data-state":u?"active":"inactive","data-orientation":j.orientation,role:"tabpanel","aria-labelledby":x,hidden:!g,id:y,tabIndex:0,...d,ref:n,style:{...s.style,animationDuration:m.current?"0s":void 0},children:g&&h})})});Pe.displayName=Oe;function $e(s,n){return`${s}-trigger-${n}`}function Be(s,n){return`${s}-content-${n}`}var qs=Ie,_e=Me,Ve=Ee,He=Pe;const Js=qs,ze=l.forwardRef(({className:s,...n},a)=>e.jsx(_e,{ref:a,className:de("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...n}));ze.displayName=_e.displayName;const $=l.forwardRef(({className:s,...n},a)=>e.jsx(Ve,{ref:a,className:de("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",s),...n}));$.displayName=Ve.displayName;const B=l.forwardRef(({className:s,...n},a)=>e.jsx(He,{ref:a,className:de("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...n}));B.displayName=He.displayName;const Ws=({active:s,payload:n,label:a})=>s&&n&&n.length?e.jsxs("div",{className:"bg-background border border-border p-3 rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-semibold text-foreground",children:a}),e.jsx("p",{className:"text-sm",children:n[0].value.toLocaleString(void 0,{style:"currency",currency:"GBP"})})]}):null,oe=({data:s,metric:n,onBarClick:a})=>!s||s.length===0?e.jsx("div",{className:"h-[300px] flex items-center justify-center border rounded-md",children:e.jsx("p",{className:"text-muted-foreground",children:"No breakdown data available"})}):e.jsx(V,{children:e.jsx(H,{className:"pt-6",children:e.jsx("div",{className:"h-[400px]",children:e.jsx(Ce,{width:"100%",height:"100%",children:e.jsxs(ks,{data:s,layout:"vertical",margin:{top:5,right:30,left:40,bottom:5},children:[e.jsx(Ls,{strokeDasharray:"3 3",horizontal:!1}),e.jsx(Ds,{type:"number",hide:!0}),e.jsx(Rs,{dataKey:"name",type:"category",width:120,tick:{fontSize:12}}),e.jsx(Te,{content:e.jsx(Ws,{})}),e.jsx(Fs,{dataKey:"value",fill:"hsl(var(--primary))",radius:[0,4,4,0],onClick:a,children:s.map((i,c)=>e.jsx(Ae,{fill:"hsl(var(--primary))",fillOpacity:.8+c*.05},`cell-${c}`))})]})})})})}),pe=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d","#ffc658","#8dd1e1","#a4de6c","#d0ed57"],Xs=({active:s,payload:n})=>s&&n&&n.length?e.jsxs("div",{className:"bg-background border border-border p-3 rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-semibold",children:n[0].name}),e.jsx("p",{className:"text-sm",children:Number(n[0].value).toLocaleString(void 0,{style:"currency",currency:"GBP"})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:`${(n[0].payload.percentage||0).toFixed(1)}%`})]}):null,ee=({data:s,metric:n})=>{if(!s||s.length===0)return e.jsx(V,{children:e.jsx(H,{className:"pt-6",children:e.jsx("div",{className:"h-[300px] flex items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No distribution data available"})})})});const a=[...s].sort((h,d)=>d.value-h.value),i=a.reduce((h,d)=>h+d.value,0),c=a.map(h=>({...h,percentage:i>0?h.value/i*100:0}));return e.jsx(V,{children:e.jsx(H,{className:"pt-6",children:e.jsx("div",{className:"h-[400px]",children:e.jsx(Ce,{width:"100%",height:"100%",children:e.jsxs(Ms,{children:[e.jsx(ws,{data:c,cx:"50%",cy:"50%",labelLine:!1,outerRadius:120,fill:"#8884d8",dataKey:"value",children:c.map((h,d)=>e.jsx(Ae,{fill:pe[d%pe.length]},`cell-${d}`))}),e.jsx(Te,{content:e.jsx(Xs,{})}),e.jsx(Is,{})]})})})})})},Qs=({data:s,onEdit:n,onDelete:a})=>!s||s.length===0?e.jsx("div",{className:"h-[200px] flex items-center justify-center border rounded-md",children:e.jsx("p",{className:"text-muted-foreground",children:"No overhead details available"})}):e.jsxs(V,{children:[e.jsx(be,{children:e.jsx(Ne,{children:"Overheads Details"})}),e.jsx(H,{children:e.jsxs(Le,{children:[e.jsx(De,{children:e.jsxs(X,{children:[e.jsx(R,{children:"Title"}),e.jsx(R,{children:"Month"}),e.jsx(R,{children:"Location"}),e.jsx(R,{children:"Site"}),e.jsx(R,{className:"text-right",children:"Amount"}),e.jsx(R,{className:"w-[100px]",children:"Actions"})]})}),e.jsx(Re,{children:s.map(i=>e.jsxs(X,{children:[e.jsx(T,{className:"font-medium",children:i.name}),e.jsxs(T,{children:[i.month," ",i.year]}),e.jsx(T,{children:i.location||"-"}),e.jsx(T,{children:i.site||"-"}),e.jsx(T,{className:"text-right",children:i.value.toLocaleString(void 0,{style:"currency",currency:"GBP"})}),e.jsx(T,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"ghost",size:"icon",className:"h-8 w-8 text-blue-500 hover:text-blue-600",onClick:()=>n(i),children:e.jsx(Os,{className:"h-4 w-4"})}),e.jsx(_,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500 hover:text-red-600",onClick:()=>a(i.id),children:e.jsx(Ps,{className:"h-4 w-4"})})]})})]},i.id))})]})})]}),ce=["January","February","March","April","May","June","July","August","September","October","November","December"],ye=["Rent","Salaries","Utilities","Software","Equipment","Marketing","Travel","Insurance","Taxes","Maintenance","Custom..."],Zs=({open:s,onOpenChange:n,initialData:a,onSave:i})=>{var K,I;const{data:c}=Gs(),[h,d]=l.useState(!1),[j,x]=l.useState(new Date().getFullYear()),[y,u]=l.useState(ce[new Date().getMonth()]),[m,g]=l.useState(""),[Q,p]=l.useState(""),[F,b]=l.useState(""),[M,w]=l.useState(""),[E,z]=l.useState("");l.useEffect(()=>{s&&(a?(x(a.year),u(a.month),g(a.location||""),p(a.site||""),z(a.value.toString()),ye.includes(a.name)?(b(a.name),w("")):(b("Custom..."),w(a.name))):(x(new Date().getFullYear()),u(ce[new Date().getMonth()]),g(""),p(""),b(""),w(""),z("")))},[s,a]);const O=async()=>{if(!m||!F||!E){D.error("Please fill in all required fields");return}const t=F==="Custom..."?M:F;if(!t){D.error("Please specify the overhead name");return}d(!0);try{await i({id:a==null?void 0:a.id,year:j,month:y,location:m,site:Q||null,name:t,value:parseFloat(E)}),n(!1)}catch(A){console.error("Failed to save overhead:",A)}finally{d(!1)}},G=((K=c==null?void 0:c.jobs)==null?void 0:K.filter(t=>t.location===m&&t.site).map(t=>t.site).filter((t,A,U)=>U.indexOf(t)===A))||[];return e.jsx($s,{open:s,onOpenChange:n,children:e.jsxs(Bs,{className:"sm:max-w-[500px]",children:[e.jsxs(_s,{children:[e.jsx(Vs,{children:a?"Edit Overhead":"Add Overhead"}),e.jsx(Hs,{children:a?"Update existing overhead record.":"Create a new overhead record."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:"Year"}),e.jsxs(Y,{value:j.toString(),onValueChange:t=>x(Number(t)),children:[e.jsx(q,{children:e.jsx(J,{})}),e.jsx(W,{children:[2024,2025,2026,2027,2028].map(t=>e.jsx(P,{value:t.toString(),children:t},t))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:"Month"}),e.jsxs(Y,{value:y,onValueChange:u,children:[e.jsx(q,{children:e.jsx(J,{})}),e.jsx(W,{children:ce.map(t=>e.jsx(P,{value:t,children:t},t))})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:"Location"}),e.jsxs(Y,{value:m,onValueChange:t=>{g(t),p("")},children:[e.jsx(q,{children:e.jsx(J,{placeholder:"Select location..."})}),e.jsx(W,{children:Array.from(new Set((I=c==null?void 0:c.jobs)==null?void 0:I.map(t=>t.location).filter(Boolean))).map(t=>e.jsx(P,{value:t,children:t},t))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:"Site (Optional)"}),e.jsxs(Y,{value:Q,onValueChange:p,disabled:!m||G.length===0,children:[e.jsx(q,{children:e.jsx(J,{placeholder:G.length===0?"No sites available":"Select site..."})}),e.jsxs(W,{children:[e.jsx(P,{value:"all_sites",children:"All Sites (if applicable)"}),G.map(t=>e.jsx(P,{value:t,children:t},t))]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:"Category"}),e.jsxs(Y,{value:F,onValueChange:b,children:[e.jsx(q,{children:e.jsx(J,{placeholder:"Select category..."})}),e.jsx(W,{children:ye.map(t=>e.jsx(P,{value:t,children:t},t))})]})]}),F==="Custom..."&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:"Custom Name"}),e.jsx(je,{placeholder:"Enter overhead name",value:M,onChange:t=>w(t.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(k,{children:"Value (£)"}),e.jsx(je,{type:"number",placeholder:"0.00",value:E,onChange:t=>z(t.target.value)})]})]}),e.jsxs(zs,{children:[e.jsx(_,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsxs(_,{onClick:O,disabled:h,children:[h&&e.jsx(ns,{className:"mr-2 h-4 w-4 animate-spin"}),"Save"]})]})]})})},Ta=()=>{const{metricId:s}=is(),n=ls(),{dateRange:a,setDateRange:i}=os(),[c,h]=l.useState(!1),[d,j]=l.useState(a),[x,y]=l.useState([]),[u,m]=l.useState([]),[g,Q]=l.useState("trend"),[p,F]=l.useState([]),[b,M]=l.useState([]),[w,E]=l.useState(!1),[z,O]=l.useState(!1),[G,K]=l.useState(null),[I,t]=l.useState(null),A=["revenue","cost","profit","employees","clientRate","staffRate","overheads"].includes(s||""),U=["shifts","hours","clients","targetAchievement","missedTargets"].includes(s||""),te=s==="overheads",{operationalData:N,isLoading:Ge}=Ns(a,x,u),{financialData:S,isLoading:Ke}=Cs(a,x,u),Ue=A?Ke:U?Ge:!1;l.useEffect(()=>{if(g==="trend"||!s)return;const r=async()=>{E(!0);try{const o=new URLSearchParams({start:Z(a.from,"yyyy-MM-dd"),end:Z(a.to,"yyyy-MM-dd"),metric:s,limit:"20"});x&&x.length>0&&x.forEach(f=>o.append("locations",f)),u&&u.length>0&&u.forEach(f=>o.append("sites",f));const v={Authorization:`Bearer ${localStorage.getItem("auth_token")}`};if(g==="details"&&te){const f=await fetch(`${le.FINANCIAL_METRICS_LIST}?${o.toString()}`,{headers:v});if(f.ok){const C=await f.json();M(C)}}else if(["location","site","client"].includes(g)){o.append("dimension",g);const f=await fetch(`${le.BREAKDOWN}?${o.toString()}`,{headers:v});if(f.ok){const C=await f.json();F(C)}}}catch(o){console.error("Error fetching breakdown:",o)}finally{E(!1)}};r(),r()},[g,s,a,x,u]);const Ye=()=>{K(null),O(!0)},qe=r=>{K(r),O(!0)},Je=async()=>{if(I)try{const r=await fetch(`/api/admin/financial-metrics/${I}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(r.ok)D.success("Overhead deleted"),g==="details"&&M(o=>o.filter(v=>v.id!==I));else{const o=await r.json();D.error(o.error||"Failed to delete")}}catch(r){console.error(r),D.error("Failed to delete")}finally{t(null)}},We=async r=>{try{const o=await fetch("/api/admin/financial-metrics",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify(r)});if(o.ok){D.success("Overhead saved"),O(!1);const v=new URLSearchParams({start:Z(a.from,"yyyy-MM-dd"),end:Z(a.to,"yyyy-MM-dd"),metric:s||"overheads",limit:"20"});x&&x.forEach(L=>v.append("locations",L)),u&&u.forEach(L=>v.append("sites",L));const f={Authorization:`Bearer ${localStorage.getItem("auth_token")}`},C=await fetch(`${le.FINANCIAL_METRICS_LIST}?${v.toString()}`,{headers:f});if(C.ok){const L=await C.json();M(L)}}else{const v=await o.json();D.error(v.error||"Failed to save")}}catch(o){console.error(o),D.error("Failed to save")}},he=r=>{switch(r){case"revenue":return"Revenue Analysis";case"cost":return"Cost Analysis";case"profit":return"Profit Analysis";case"shifts":return"Shifts Analysis";case"hours":return"Hours Analysis";case"clients":return"Client Analysis";case"employees":return"Employee Analysis";case"targetAchievement":return"Target Achievement Analysis";case"missedTargets":return"Missed Targets Analysis";case"clientRate":return"Client Rate Analysis";case"staffRate":return"Staff Rate Analysis";case"overheads":return"Overheads Analysis";default:return"Metric Analysis"}},Xe=(r,o)=>{var v,f,C,L,me,xe,ge,ve,fe;if(!r)return"-";switch(o){case"revenue":return`£${((v=r.revenue)==null?void 0:v.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))??0}`;case"cost":return`£${((f=r.cost)==null?void 0:f.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))??0}`;case"profit":const ne=r.profit??r.revenue-r.cost-(r.overheads||0);return`£${(ne==null?void 0:ne.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))??0}`;case"shifts":return((C=r.totalShifts)==null?void 0:C.toLocaleString())??0;case"hours":return((L=r.paidHours)==null?void 0:L.toLocaleString(void 0,{maximumFractionDigits:1}))??0;case"clients":return((me=r.clientCount)==null?void 0:me.toLocaleString())??0;case"employees":return((xe=r.paidHours)==null?void 0:xe.toLocaleString(void 0,{maximumFractionDigits:1}))??0;case"targetAchievement":return`${((ge=r.achievementPercentage)==null?void 0:ge.toFixed(1))??0}%`;case"missedTargets":return`${((ve=r.achievementPercentage)==null?void 0:ve.toFixed(1))??0}%`;case"clientRate":return`£${(r.revenue/r.paidHours||0).toFixed(2)}`;case"staffRate":return`£${(r.cost/r.paidHours||0).toFixed(2)}`;case"overheads":return`£${((fe=r.overheads)==null?void 0:fe.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))??0}`;default:return"-"}},Qe=l.useMemo(()=>{if(!b||b.length===0)return[];const r=b.reduce((o,v)=>{const f=v.name||"Unknown";return o[f]||(o[f]=0),o[f]+=v.value,o},{});return Object.entries(r).map(([o,v])=>({name:o,value:v}))},[b]),re=A?S==null?void 0:S.timeSeries:N==null?void 0:N.timeSeries;return e.jsx(fs,{fullWidth:!0,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx(bs,{dateRange:a,onDateRangeChange:i,calendarOpen:c,onCalendarOpenChange:h,tempDateRange:d,onTempDateRangeChange:j,selectedLocations:x,onLocationsChange:y,selectedSites:u,onSitesChange:m}),e.jsxs("div",{className:"flex-1 overflow-auto p-6 space-y-6 relative",children:[(Ue||w)&&e.jsx(Ts,{}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(_,{variant:"ghost",size:"sm",onClick:()=>n(-1),className:"gap-2",children:[e.jsx(Ks,{className:"h-4 w-4"}),"Back"]}),e.jsx("h1",{className:"text-2xl font-bold",children:he(s)})]}),e.jsxs(Js,{value:g,onValueChange:Q,className:"space-y-4",children:[e.jsxs(ze,{children:[e.jsx($,{value:"trend",children:"Trend"}),e.jsx($,{value:"location",children:"By Location"}),e.jsx($,{value:"site",children:"By Site"}),!te&&e.jsx($,{value:"client",children:"By Client"}),te&&e.jsx($,{value:"details",children:"All Details"})]}),e.jsx(B,{value:"trend",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-6",children:[A&&e.jsx(As,{data:(S==null?void 0:S.timeSeries)||[],aggregationLevel:(S==null?void 0:S.aggregationLevel)||"monthly",selectedMetric:s}),U&&e.jsx(Ss,{data:(N==null?void 0:N.timeSeries)||[],aggregationLevel:(N==null?void 0:N.aggregationLevel)||"monthly",selectedMetric:s}),!A&&!U&&e.jsx(V,{children:e.jsx(H,{className:"pt-6",children:e.jsx("p",{className:"text-muted-foreground",children:"Metric type not recognized or data unavailable."})})}),e.jsxs(V,{children:[e.jsx(be,{children:e.jsx(Ne,{children:"Historical Data"})}),e.jsx(H,{children:e.jsxs(Le,{children:[e.jsxs(Es,{children:["Detailed historical data for ",he(s)]}),e.jsx(De,{children:e.jsxs(X,{children:[e.jsx(R,{children:"Period"}),e.jsx(R,{className:"text-right",children:"Value"})]})}),e.jsx(Re,{children:re&&re.length>0?[...re].reverse().map((r,o)=>e.jsxs(X,{children:[e.jsx(T,{className:"font-medium",children:r.display}),e.jsx(T,{className:"text-right font-medium",children:Xe(r,s)})]},o)):e.jsx(X,{children:e.jsx(T,{colSpan:2,className:"text-center",children:"No data available"})})})]})})]})]})}),e.jsx(B,{value:"location",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx(oe,{data:p,metric:s||"revenue"}),e.jsx(ee,{data:p,metric:s||"revenue"})]})}),e.jsx(B,{value:"site",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx(oe,{data:p,metric:s||"revenue"}),e.jsx(ee,{data:p,metric:s||"revenue"})]})}),e.jsx(B,{value:"client",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx(oe,{data:p,metric:s||"revenue"}),e.jsx(ee,{data:p,metric:s||"revenue"})]})}),e.jsx(B,{value:"details",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsx(ee,{data:Qe,metric:"overheads"})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(_,{onClick:Ye,className:"gap-2",children:[e.jsx(ys,{className:"h-4 w-4"}),"Add Overhead"]})}),e.jsx(Qs,{data:b,onEdit:qe,onDelete:t}),e.jsx(Zs,{open:z,onOpenChange:O,initialData:G,onSave:We}),e.jsx(cs,{open:!!I,onOpenChange:r=>!r&&t(null),children:e.jsxs(ds,{children:[e.jsxs(us,{children:[e.jsx(hs,{children:"Are you sure?"}),e.jsx(ms,{children:"This will permanently delete this overhead record."})]}),e.jsxs(xs,{children:[e.jsx(gs,{children:"Cancel"}),e.jsx(vs,{onClick:Je,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})})]})]})]})})};export{Ta as default};
