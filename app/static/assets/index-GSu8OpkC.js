const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MetricPalette-BrasPHSc.js","assets/index-B9zsSBSc.js","assets/index-DVSs1V0b.css","assets/card-BvjUkWMy.js","assets/trending-up-CET5Ssnm.js","assets/popover-lfmF_V7N.js","assets/button-DFNT8clF.js","assets/DashboardLayout-BbhES---.js","assets/users-D30lNfxZ.js","assets/label-71DtArOj.js","assets/select-BI_oltMD.js","assets/ChartCanvas-BzcQ7hjy.js","assets/badge-D6cG65Su.js","assets/AreaChart-DJDTelTW.js","assets/BarChart-DJ-dluFJ.js"])))=>i.map(i=>d[i]);
import{c as Sn,r as l,R as A,g as we,j as p,S as Rn,b as En,_ as Jt}from"./index-B9zsSBSc.js";import{D as Mn}from"./DashboardLayout-BbhES---.js";import{L as kt}from"./label-71DtArOj.js";import{S as Nn,a as An,b as On,c as Tn,d as Pe}from"./select-BI_oltMD.js";import{B as Lt}from"./button-DFNT8clF.js";import{g as It,P as jn,b as kn,C as Ln,f as et,c as In,d as Pn}from"./popover-lfmF_V7N.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=Sn("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),Ke=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ve(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function lt(e){return"nodeType"in e}function P(e){var t,n;return e?ve(e)?e:lt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function ct(e){const{Document:t}=P(e);return e instanceof t}function Ne(e){return ve(e)?!1:e instanceof P(e).HTMLElement}function qt(e){return e instanceof P(e).SVGElement}function pe(e){return e?ve(e)?e.document:lt(e)?ct(e)?e:Ne(e)||qt(e)?e.ownerDocument:document:document:document}const G=Ke?l.useLayoutEffect:l.useEffect;function Ue(e){const t=l.useRef(e);return G(()=>{t.current=e}),l.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function Bn(){const e=l.useRef(null),t=l.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=l.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Re(e,t){t===void 0&&(t=[e]);const n=l.useRef(e);return G(()=>{n.current!==e&&(n.current=e)},t),n}function Ae(e,t){const n=l.useRef();return l.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Be(e){const t=Ue(e),n=l.useRef(null),r=l.useCallback(o=>{o!==n.current&&(t==null||t(o,n.current)),n.current=o},[]);return[n,r]}function Fe(e){const t=l.useRef();return l.useEffect(()=>{t.current=e},[e]),t.current}let tt={};function We(e,t){return l.useMemo(()=>{if(t)return t;const n=tt[e]==null?0:tt[e]+1;return tt[e]=n,e+"-"+n},[e,t])}function Gt(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((s,a)=>{const i=Object.entries(a);for(const[c,u]of i){const d=s[c];d!=null&&(s[c]=d+e*u)}return s},{...t})}}const ge=Gt(1),Xe=Gt(-1);function Fn(e){return"clientX"in e&&"clientY"in e}function ut(e){if(!e)return!1;const{KeyboardEvent:t}=P(e.target);return t&&e instanceof t}function Xn(e){if(!e)return!1;const{TouchEvent:t}=P(e.target);return t&&e instanceof t}function $e(e){if(Xn(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Fn(e)?{x:e.clientX,y:e.clientY}:null}const Ee=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Ee.Translate.toString(e),Ee.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Pt="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function $n(e){return e.matches(Pt)?e:e.querySelector(Pt)}const Yn={display:"none"};function _n(e){let{id:t,value:n}=e;return A.createElement("div",{id:t,style:Yn},n)}function Kn(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return A.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function Un(){const[e,t]=l.useState("");return{announce:l.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Qt=l.createContext(null);function Wn(e){const t=l.useContext(Qt);l.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Vn(){const[e]=l.useState(()=>new Set),t=l.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[l.useCallback(r=>{let{type:o,event:s}=r;e.forEach(a=>{var i;return(i=a[o])==null?void 0:i.call(a,s)})},[e]),t]}const Hn={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Jn={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function qn(e){let{announcements:t=Jn,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=Hn}=e;const{announce:s,announcement:a}=Un(),i=We("DndLiveRegion"),[c,u]=l.useState(!1);if(l.useEffect(()=>{u(!0)},[]),Wn(l.useMemo(()=>({onDragStart(f){let{active:v}=f;s(t.onDragStart({active:v}))},onDragMove(f){let{active:v,over:h}=f;t.onDragMove&&s(t.onDragMove({active:v,over:h}))},onDragOver(f){let{active:v,over:h}=f;s(t.onDragOver({active:v,over:h}))},onDragEnd(f){let{active:v,over:h}=f;s(t.onDragEnd({active:v,over:h}))},onDragCancel(f){let{active:v,over:h}=f;s(t.onDragCancel({active:v,over:h}))}}),[s,t])),!c)return null;const d=A.createElement(A.Fragment,null,A.createElement(_n,{id:r,value:o.draggable}),A.createElement(Kn,{id:i,announcement:a}));return n?we.createPortal(d,n):d}var T;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(T||(T={}));function Ye(){}function Gn(e,t){return l.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Qn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const K=Object.freeze({x:0,y:0});function Zn(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function er(e,t){const n=$e(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function tr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function nr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function rr(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function zt(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const or=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=zt(t,t.left,t.top),s=[];for(const a of r){const{id:i}=a,c=n.get(i);if(c){const u=Zn(zt(c),o);s.push({id:i,data:{droppableContainer:a,value:u}})}}return s.sort(tr)};function sr(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),a=o-r,i=s-n;if(r<o&&n<s){const c=t.width*t.height,u=e.width*e.height,d=a*i,f=d/(c+u-d);return Number(f.toFixed(4))}return 0}const ir=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const s of r){const{id:a}=s,i=n.get(a);if(i){const c=sr(i,t);c>0&&o.push({id:a,data:{droppableContainer:s,value:c}})}}return o.sort(nr)};function ar(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Zt(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:K}function lr(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return o.reduce((a,i)=>({...a,top:a.top+e*i.y,bottom:a.bottom+e*i.y,left:a.left+e*i.x,right:a.right+e*i.x}),{...n})}}const cr=lr(1);function en(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function ur(e,t,n){const r=en(t);if(!r)return e;const{scaleX:o,scaleY:s,x:a,y:i}=r,c=e.left-a-(1-o)*parseFloat(n),u=e.top-i-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),d=o?e.width/o:e.width,f=s?e.height/s:e.height;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c}}const dr={ignoreTransform:!1};function Oe(e,t){t===void 0&&(t=dr);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=P(e).getComputedStyle(e);u&&(n=ur(n,u,d))}const{top:r,left:o,width:s,height:a,bottom:i,right:c}=n;return{top:r,left:o,width:s,height:a,bottom:i,right:c}}function Bt(e){return Oe(e,{ignoreTransform:!0})}function fr(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function hr(e,t){return t===void 0&&(t=P(e).getComputedStyle(e)),t.position==="fixed"}function gr(e,t){t===void 0&&(t=P(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const s=t[o];return typeof s=="string"?n.test(s):!1})}function dt(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(ct(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!Ne(o)||qt(o)||n.includes(o))return n;const s=P(e).getComputedStyle(o);return o!==e&&gr(o,s)&&n.push(o),hr(o,s)?n:r(o.parentNode)}return e?r(e):n}function tn(e){const[t]=dt(e,1);return t??null}function nt(e){return!Ke||!e?null:ve(e)?e:lt(e)?ct(e)||e===pe(e).scrollingElement?window:Ne(e)?e:null:null}function nn(e){return ve(e)?e.scrollX:e.scrollLeft}function rn(e){return ve(e)?e.scrollY:e.scrollTop}function st(e){return{x:nn(e),y:rn(e)}}var j;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(j||(j={}));function on(e){return!Ke||!e?!1:e===document.scrollingElement}function sn(e){const t={x:0,y:0},n=on(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,i=e.scrollLeft>=r.x;return{isTop:o,isLeft:s,isBottom:a,isRight:i,maxScroll:r,minScroll:t}}const vr={x:.2,y:.2};function pr(e,t,n,r,o){let{top:s,left:a,right:i,bottom:c}=n;r===void 0&&(r=10),o===void 0&&(o=vr);const{isTop:u,isBottom:d,isLeft:f,isRight:v}=sn(e),h={x:0,y:0},S={x:0,y:0},g={height:t.height*o.y,width:t.width*o.x};return!u&&s<=t.top+g.height?(h.y=j.Backward,S.y=r*Math.abs((t.top+g.height-s)/g.height)):!d&&c>=t.bottom-g.height&&(h.y=j.Forward,S.y=r*Math.abs((t.bottom-g.height-c)/g.height)),!v&&i>=t.right-g.width?(h.x=j.Forward,S.x=r*Math.abs((t.right-g.width-i)/g.width)):!f&&a<=t.left+g.width&&(h.x=j.Backward,S.x=r*Math.abs((t.left+g.width-a)/g.width)),{direction:h,speed:S}}function mr(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:a}=window;return{top:0,left:0,right:s,bottom:a,width:s,height:a}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function an(e){return e.reduce((t,n)=>ge(t,st(n)),K)}function br(e){return e.reduce((t,n)=>t+nn(n),0)}function yr(e){return e.reduce((t,n)=>t+rn(n),0)}function ln(e,t){if(t===void 0&&(t=Oe),!e)return;const{top:n,left:r,bottom:o,right:s}=t(e);tn(e)&&(o<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const xr=[["x",["left","right"],br],["y",["top","bottom"],yr]];class ft{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=dt(n),o=an(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,a,i]of xr)for(const c of a)Object.defineProperty(this,c,{get:()=>{const u=i(r),d=o[s]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class De{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function wr(e){const{EventTarget:t}=P(e);return e instanceof t?e:pe(e)}function rt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var $;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})($||($={}));function Ft(e){e.preventDefault()}function Dr(e){e.stopPropagation()}var R;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(R||(R={}));const cn={start:[R.Space,R.Enter],cancel:[R.Esc],end:[R.Space,R.Enter,R.Tab]},Cr=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case R.Right:return{...n,x:n.x+25};case R.Left:return{...n,x:n.x-25};case R.Down:return{...n,y:n.y+25};case R.Up:return{...n,y:n.y-25}}};class un{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new De(pe(n)),this.windowListeners=new De(P(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add($.Resize,this.handleCancel),this.windowListeners.add($.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add($.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&ln(r),n(K)}handleKeyDown(t){if(ut(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:s=cn,coordinateGetter:a=Cr,scrollBehavior:i="smooth"}=o,{code:c}=t;if(s.end.includes(c)){this.handleEnd(t);return}if(s.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:K;this.referenceCoordinates||(this.referenceCoordinates=d);const f=a(t,{active:n,context:r.current,currentCoordinates:d});if(f){const v=Xe(f,d),h={x:0,y:0},{scrollableAncestors:S}=r.current;for(const g of S){const m=t.code,{isTop:w,isRight:x,isLeft:y,isBottom:M,maxScroll:b,minScroll:E}=sn(g),D=mr(g),C={x:Math.min(m===R.Right?D.right-D.width/2:D.right,Math.max(m===R.Right?D.left:D.left+D.width/2,f.x)),y:Math.min(m===R.Down?D.bottom-D.height/2:D.bottom,Math.max(m===R.Down?D.top:D.top+D.height/2,f.y))},N=m===R.Right&&!x||m===R.Left&&!y,k=m===R.Down&&!M||m===R.Up&&!w;if(N&&C.x!==f.x){const O=g.scrollLeft+v.x,V=m===R.Right&&O<=b.x||m===R.Left&&O>=E.x;if(V&&!v.y){g.scrollTo({left:O,behavior:i});return}V?h.x=g.scrollLeft-O:h.x=m===R.Right?g.scrollLeft-b.x:g.scrollLeft-E.x,h.x&&g.scrollBy({left:-h.x,behavior:i});break}else if(k&&C.y!==f.y){const O=g.scrollTop+v.y,V=m===R.Down&&O<=b.y||m===R.Up&&O>=E.y;if(V&&!v.x){g.scrollTo({top:O,behavior:i});return}V?h.y=g.scrollTop-O:h.y=m===R.Down?g.scrollTop-b.y:g.scrollTop-E.y,h.y&&g.scrollBy({top:-h.y,behavior:i});break}}this.handleMove(t,ge(Xe(f,this.referenceCoordinates),h))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}un.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=cn,onActivation:o}=t,{active:s}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const i=s.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),o==null||o({event:e.nativeEvent}),!0)}return!1}}];function Xt(e){return!!(e&&"distance"in e)}function $t(e){return!!(e&&"delay"in e)}class ht{constructor(t,n,r){var o;r===void 0&&(r=wr(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:a}=s;this.props=t,this.events=n,this.document=pe(a),this.documentListeners=new De(this.document),this.listeners=new De(r),this.windowListeners=new De(P(a)),this.initialCoordinates=(o=$e(s))!=null?o:K,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add($.Resize,this.handleCancel),this.windowListeners.add($.DragStart,Ft),this.windowListeners.add($.VisibilityChange,this.handleCancel),this.windowListeners.add($.ContextMenu,Ft),this.documentListeners.add($.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if($t(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Xt(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add($.Click,Dr,{capture:!0}),this.removeTextSelection(),this.documentListeners.add($.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:s}=this,{onMove:a,options:{activationConstraint:i}}=s;if(!o)return;const c=(n=$e(t))!=null?n:K,u=Xe(o,c);if(!r&&i){if(Xt(i)){if(i.tolerance!=null&&rt(u,i.tolerance))return this.handleCancel();if(rt(u,i.distance))return this.handleStart()}if($t(i)&&rt(u,i.tolerance))return this.handleCancel();this.handlePending(i,u);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===R.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Sr={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class gt extends ht{constructor(t){const{event:n}=t,r=pe(n.target);super(t,Sr,r)}}gt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Rr={move:{name:"mousemove"},end:{name:"mouseup"}};var it;(function(e){e[e.RightClick=2]="RightClick"})(it||(it={}));class Er extends ht{constructor(t){super(t,Rr,pe(t.event.target))}}Er.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===it.RightClick?!1:(r==null||r({event:n}),!0)}}];const ot={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Mr extends ht{constructor(t){super(t,ot)}static setup(){return window.addEventListener(ot.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(ot.move.name,t)};function t(){}}}Mr.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r==null||r({event:n}),!0)}}];var Ce;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ce||(Ce={}));var _e;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(_e||(_e={}));function Nr(e){let{acceleration:t,activator:n=Ce.Pointer,canScroll:r,draggingRect:o,enabled:s,interval:a=5,order:i=_e.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:v}=e;const h=Or({delta:f,disabled:!s}),[S,g]=Bn(),m=l.useRef({x:0,y:0}),w=l.useRef({x:0,y:0}),x=l.useMemo(()=>{switch(n){case Ce.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Ce.DraggableRect:return o}},[n,o,c]),y=l.useRef(null),M=l.useCallback(()=>{const E=y.current;if(!E)return;const D=m.current.x*w.current.x,C=m.current.y*w.current.y;E.scrollBy(D,C)},[]),b=l.useMemo(()=>i===_e.TreeOrder?[...u].reverse():u,[i,u]);l.useEffect(()=>{if(!s||!u.length||!x){g();return}for(const E of b){if((r==null?void 0:r(E))===!1)continue;const D=u.indexOf(E),C=d[D];if(!C)continue;const{direction:N,speed:k}=pr(E,C,x,t,v);for(const O of["x","y"])h[O][N[O]]||(k[O]=0,N[O]=0);if(k.x>0||k.y>0){g(),y.current=E,S(M,a),m.current=k,w.current=N;return}}m.current={x:0,y:0},w.current={x:0,y:0},g()},[t,M,r,g,s,a,JSON.stringify(x),JSON.stringify(h),S,u,b,d,JSON.stringify(v)])}const Ar={x:{[j.Backward]:!1,[j.Forward]:!1},y:{[j.Backward]:!1,[j.Forward]:!1}};function Or(e){let{delta:t,disabled:n}=e;const r=Fe(t);return Ae(o=>{if(n||!r||!o)return Ar;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[j.Backward]:o.x[j.Backward]||s.x===-1,[j.Forward]:o.x[j.Forward]||s.x===1},y:{[j.Backward]:o.y[j.Backward]||s.y===-1,[j.Forward]:o.y[j.Forward]||s.y===1}}},[n,t,r])}function Tr(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Ae(o=>{var s;return t==null?null:(s=r??o)!=null?s:null},[r,t])}function jr(e,t){return l.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,s=o.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...s]},[]),[e,t])}var Me;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Me||(Me={}));var at;(function(e){e.Optimized="optimized"})(at||(at={}));const Yt=new Map;function kr(e,t){let{dragging:n,dependencies:r,config:o}=t;const[s,a]=l.useState(null),{frequency:i,measure:c,strategy:u}=o,d=l.useRef(e),f=m(),v=Re(f),h=l.useCallback(function(w){w===void 0&&(w=[]),!v.current&&a(x=>x===null?w:x.concat(w.filter(y=>!x.includes(y))))},[v]),S=l.useRef(null),g=Ae(w=>{if(f&&!n)return Yt;if(!w||w===Yt||d.current!==e||s!=null){const x=new Map;for(let y of e){if(!y)continue;if(s&&s.length>0&&!s.includes(y.id)&&y.rect.current){x.set(y.id,y.rect.current);continue}const M=y.node.current,b=M?new ft(c(M),M):null;y.rect.current=b,b&&x.set(y.id,b)}return x}return w},[e,s,n,f,c]);return l.useEffect(()=>{d.current=e},[e]),l.useEffect(()=>{f||h()},[n,f]),l.useEffect(()=>{s&&s.length>0&&a(null)},[JSON.stringify(s)]),l.useEffect(()=>{f||typeof i!="number"||S.current!==null||(S.current=setTimeout(()=>{h(),S.current=null},i))},[i,f,h,...r]),{droppableRects:g,measureDroppableContainers:h,measuringScheduled:s!=null};function m(){switch(u){case Me.Always:return!1;case Me.BeforeDragging:return n;default:return!n}}}function vt(e,t){return Ae(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Lr(e,t){return vt(e,t)}function Ir(e){let{callback:t,disabled:n}=e;const r=Ue(t),o=l.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return l.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function Ve(e){let{callback:t,disabled:n}=e;const r=Ue(t),o=l.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return l.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function Pr(e){return new ft(Oe(e),e)}function _t(e,t,n){t===void 0&&(t=Pr);const[r,o]=l.useState(null);function s(){o(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??n)!=null?u:null}const d=t(e);return JSON.stringify(c)===JSON.stringify(d)?c:d})}const a=Ir({callback(c){if(e)for(const u of c){const{type:d,target:f}=u;if(d==="childList"&&f instanceof HTMLElement&&f.contains(e)){s();break}}}}),i=Ve({callback:s});return G(()=>{s(),e?(i==null||i.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),a==null||a.disconnect())},[e]),r}function zr(e){const t=vt(e);return Zt(e,t)}const Kt=[];function Br(e){const t=l.useRef(e),n=Ae(r=>e?r&&r!==Kt&&e&&t.current&&e.parentNode===t.current.parentNode?r:dt(e):Kt,[e]);return l.useEffect(()=>{t.current=e},[e]),n}function Fr(e){const[t,n]=l.useState(null),r=l.useRef(e),o=l.useCallback(s=>{const a=nt(s.target);a&&n(i=>i?(i.set(a,st(a)),new Map(i)):null)},[]);return l.useEffect(()=>{const s=r.current;if(e!==s){a(s);const i=e.map(c=>{const u=nt(c);return u?(u.addEventListener("scroll",o,{passive:!0}),[u,st(u)]):null}).filter(c=>c!=null);n(i.length?new Map(i):null),r.current=e}return()=>{a(e),a(s)};function a(i){i.forEach(c=>{const u=nt(c);u==null||u.removeEventListener("scroll",o)})}},[o,e]),l.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,a)=>ge(s,a),K):an(e):K,[e,t])}function Ut(e,t){t===void 0&&(t=[]);const n=l.useRef(null);return l.useEffect(()=>{n.current=null},t),l.useEffect(()=>{const r=e!==K;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Xe(e,n.current):K}function Xr(e){l.useEffect(()=>{if(!Ke)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function $r(e,t){return l.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:s}=r;return n[o]=a=>{s(a,t)},n},{}),[e,t])}function dn(e){return l.useMemo(()=>e?fr(e):null,[e])}const Wt=[];function Yr(e,t){t===void 0&&(t=Oe);const[n]=e,r=dn(n?P(n):null),[o,s]=l.useState(Wt);function a(){s(()=>e.length?e.map(c=>on(c)?r:new ft(t(c),c)):Wt)}const i=Ve({callback:a});return G(()=>{i==null||i.disconnect(),a(),e.forEach(c=>i==null?void 0:i.observe(c))},[e]),o}function fn(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Ne(t)?t:e}function _r(e){let{measure:t}=e;const[n,r]=l.useState(null),o=l.useCallback(u=>{for(const{target:d}of u)if(Ne(d)){r(f=>{const v=t(d);return f?{...f,width:v.width,height:v.height}:v});break}},[t]),s=Ve({callback:o}),a=l.useCallback(u=>{const d=fn(u);s==null||s.disconnect(),d&&(s==null||s.observe(d)),r(d?t(d):null)},[t,s]),[i,c]=Be(a);return l.useMemo(()=>({nodeRef:i,rect:n,setRef:c}),[n,i,c])}const Kr=[{sensor:gt,options:{}},{sensor:un,options:{}}],Ur={current:{}},ze={draggable:{measure:Bt},droppable:{measure:Bt,strategy:Me.WhileDragging,frequency:at.Optimized},dragOverlay:{measure:Oe}};class Se extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Wr={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Se,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ye},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ze,measureDroppableContainers:Ye,windowRect:null,measuringScheduled:!1},hn={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ye,draggableNodes:new Map,over:null,measureDroppableContainers:Ye},Te=l.createContext(hn),gn=l.createContext(Wr);function Vr(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Se}}}function Hr(e,t){switch(t.type){case T.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case T.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case T.DragEnd:case T.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case T.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new Se(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case T.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const a=new Se(e.droppable.containers);return a.set(n,{...s,disabled:o}),{...e,droppable:{...e.droppable,containers:a}}}case T.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const s=new Se(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function Jr(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=l.useContext(Te),s=Fe(r),a=Fe(n==null?void 0:n.id);return l.useEffect(()=>{if(!t&&!r&&s&&a!=null){if(!ut(s)||document.activeElement===s.target)return;const i=o.get(a);if(!i)return;const{activatorNode:c,node:u}=i;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const f=$n(d);if(f){f.focus();break}}})}},[r,t,o,a,s]),null}function vn(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,s)=>s({transform:o,...r}),n):n}function qr(e){return l.useMemo(()=>({draggable:{...ze.draggable,...e==null?void 0:e.draggable},droppable:{...ze.droppable,...e==null?void 0:e.droppable},dragOverlay:{...ze.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Gr(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const s=l.useRef(!1),{x:a,y:i}=typeof o=="boolean"?{x:o,y:o}:o;G(()=>{if(!a&&!i||!t){s.current=!1;return}if(s.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=n(u),f=Zt(d,r);if(a||(f.x=0),i||(f.y=0),s.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const v=tn(u);v&&v.scrollBy({top:f.y,left:f.x})}},[t,a,i,r,n])}const He=l.createContext({...K,scaleX:1,scaleY:1});var oe;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(oe||(oe={}));const Qr=l.memo(function(t){var n,r,o,s;let{id:a,accessibility:i,autoScroll:c=!0,children:u,sensors:d=Kr,collisionDetection:f=ir,measuring:v,modifiers:h,...S}=t;const g=l.useReducer(Hr,void 0,Vr),[m,w]=g,[x,y]=Vn(),[M,b]=l.useState(oe.Uninitialized),E=M===oe.Initialized,{draggable:{active:D,nodes:C,translate:N},droppable:{containers:k}}=m,O=D!=null?C.get(D):null,V=l.useRef({initial:null,translated:null}),H=l.useMemo(()=>{var I;return D!=null?{id:D,data:(I=O==null?void 0:O.data)!=null?I:Ur,rect:V}:null},[D,O]),Q=l.useRef(null),[pt,mt]=l.useState(null),[J,bt]=l.useState(null),se=Re(S,Object.values(S)),Je=We("DndDescribedBy",a),yt=l.useMemo(()=>k.getEnabled(),[k]),ie=qr(v),{droppableRects:ce,measureDroppableContainers:je,measuringScheduled:xt}=kr(yt,{dragging:E,dependencies:[N.x,N.y],config:ie.droppable}),Y=Tr(C,D),wt=l.useMemo(()=>J?$e(J):null,[J]),Dt=Cn(),Ct=Lr(Y,ie.draggable.measure);Gr({activeNode:D!=null?C.get(D):null,config:Dt.layoutShiftCompensation,initialRect:Ct,measure:ie.draggable.measure});const _=_t(Y,ie.draggable.measure,Ct),qe=_t(Y?Y.parentElement:null),ae=l.useRef({activatorEvent:null,active:null,activeNode:Y,collisionRect:null,collisions:null,droppableRects:ce,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),St=k.getNodeFor((n=ae.current.over)==null?void 0:n.id),le=_r({measure:ie.dragOverlay.measure}),ke=(r=le.nodeRef.current)!=null?r:Y,ue=E?(o=le.rect)!=null?o:_:null,Rt=!!(le.nodeRef.current&&le.rect),Et=zr(Rt?null:_),Ge=dn(ke?P(ke):null),Z=Br(E?St??Y:null),Le=Yr(Z),Ie=vn(h,{transform:{x:N.x-Et.x,y:N.y-Et.y,scaleX:1,scaleY:1},activatorEvent:J,active:H,activeNodeRect:_,containerNodeRect:qe,draggingNodeRect:ue,over:ae.current.over,overlayNodeRect:le.rect,scrollableAncestors:Z,scrollableAncestorRects:Le,windowRect:Ge}),Mt=wt?ge(wt,N):null,Nt=Fr(Z),pn=Ut(Nt),mn=Ut(Nt,[_]),de=ge(Ie,pn),fe=ue?cr(ue,Ie):null,me=H&&fe?f({active:H,collisionRect:fe,droppableRects:ce,droppableContainers:yt,pointerCoordinates:Mt}):null,At=rr(me,"id"),[ee,Ot]=l.useState(null),bn=Rt?Ie:ge(Ie,mn),yn=ar(bn,(s=ee==null?void 0:ee.rect)!=null?s:null,_),Qe=l.useRef(null),Tt=l.useCallback((I,z)=>{let{sensor:B,options:te}=z;if(Q.current==null)return;const X=C.get(Q.current);if(!X)return;const F=I.nativeEvent,U=new B({active:Q.current,activeNode:X,event:F,options:te,context:ae,onAbort(L){if(!C.get(L))return;const{onDragAbort:W}=se.current,q={id:L};W==null||W(q),x({type:"onDragAbort",event:q})},onPending(L,ne,W,q){if(!C.get(L))return;const{onDragPending:ye}=se.current,re={id:L,constraint:ne,initialCoordinates:W,offset:q};ye==null||ye(re),x({type:"onDragPending",event:re})},onStart(L){const ne=Q.current;if(ne==null)return;const W=C.get(ne);if(!W)return;const{onDragStart:q}=se.current,be={activatorEvent:F,active:{id:ne,data:W.data,rect:V}};we.unstable_batchedUpdates(()=>{q==null||q(be),b(oe.Initializing),w({type:T.DragStart,initialCoordinates:L,active:ne}),x({type:"onDragStart",event:be}),mt(Qe.current),bt(F)})},onMove(L){w({type:T.DragMove,coordinates:L})},onEnd:he(T.DragEnd),onCancel:he(T.DragCancel)});Qe.current=U;function he(L){return async function(){const{active:W,collisions:q,over:be,scrollAdjustedTranslate:ye}=ae.current;let re=null;if(W&&ye){const{cancelDrop:xe}=se.current;re={activatorEvent:F,active:W,collisions:q,delta:ye,over:be},L===T.DragEnd&&typeof xe=="function"&&await Promise.resolve(xe(re))&&(L=T.DragCancel)}Q.current=null,we.unstable_batchedUpdates(()=>{w({type:L}),b(oe.Uninitialized),Ot(null),mt(null),bt(null),Qe.current=null;const xe=L===T.DragEnd?"onDragEnd":"onDragCancel";if(re){const Ze=se.current[xe];Ze==null||Ze(re),x({type:xe,event:re})}})}}},[C]),xn=l.useCallback((I,z)=>(B,te)=>{const X=B.nativeEvent,F=C.get(te);if(Q.current!==null||!F||X.dndKit||X.defaultPrevented)return;const U={active:F};I(B,z.options,U)===!0&&(X.dndKit={capturedBy:z.sensor},Q.current=te,Tt(B,z))},[C,Tt]),jt=jr(d,xn);Xr(d),G(()=>{_&&M===oe.Initializing&&b(oe.Initialized)},[_,M]),l.useEffect(()=>{const{onDragMove:I}=se.current,{active:z,activatorEvent:B,collisions:te,over:X}=ae.current;if(!z||!B)return;const F={active:z,activatorEvent:B,collisions:te,delta:{x:de.x,y:de.y},over:X};we.unstable_batchedUpdates(()=>{I==null||I(F),x({type:"onDragMove",event:F})})},[de.x,de.y]),l.useEffect(()=>{const{active:I,activatorEvent:z,collisions:B,droppableContainers:te,scrollAdjustedTranslate:X}=ae.current;if(!I||Q.current==null||!z||!X)return;const{onDragOver:F}=se.current,U=te.get(At),he=U&&U.rect.current?{id:U.id,rect:U.rect.current,data:U.data,disabled:U.disabled}:null,L={active:I,activatorEvent:z,collisions:B,delta:{x:X.x,y:X.y},over:he};we.unstable_batchedUpdates(()=>{Ot(he),F==null||F(L),x({type:"onDragOver",event:L})})},[At]),G(()=>{ae.current={activatorEvent:J,active:H,activeNode:Y,collisionRect:fe,collisions:me,droppableRects:ce,draggableNodes:C,draggingNode:ke,draggingNodeRect:ue,droppableContainers:k,over:ee,scrollableAncestors:Z,scrollAdjustedTranslate:de},V.current={initial:ue,translated:fe}},[H,Y,me,fe,C,ke,ue,ce,k,ee,Z,de]),Nr({...Dt,delta:N,draggingRect:fe,pointerCoordinates:Mt,scrollableAncestors:Z,scrollableAncestorRects:Le});const wn=l.useMemo(()=>({active:H,activeNode:Y,activeNodeRect:_,activatorEvent:J,collisions:me,containerNodeRect:qe,dragOverlay:le,draggableNodes:C,droppableContainers:k,droppableRects:ce,over:ee,measureDroppableContainers:je,scrollableAncestors:Z,scrollableAncestorRects:Le,measuringConfiguration:ie,measuringScheduled:xt,windowRect:Ge}),[H,Y,_,J,me,qe,le,C,k,ce,ee,je,Z,Le,ie,xt,Ge]),Dn=l.useMemo(()=>({activatorEvent:J,activators:jt,active:H,activeNodeRect:_,ariaDescribedById:{draggable:Je},dispatch:w,draggableNodes:C,over:ee,measureDroppableContainers:je}),[J,jt,H,_,w,Je,C,ee,je]);return A.createElement(Qt.Provider,{value:y},A.createElement(Te.Provider,{value:Dn},A.createElement(gn.Provider,{value:wn},A.createElement(He.Provider,{value:yn},u)),A.createElement(Jr,{disabled:(i==null?void 0:i.restoreFocus)===!1})),A.createElement(qn,{...i,hiddenTextDescribedById:Je}));function Cn(){const I=(pt==null?void 0:pt.autoScrollEnabled)===!1,z=typeof c=="object"?c.enabled===!1:c===!1,B=E&&!I&&!z;return typeof c=="object"?{...c,enabled:B}:{enabled:B}}}),Zr=l.createContext(null),Vt="button",eo="Draggable";function Ao(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const s=We(eo),{activators:a,activatorEvent:i,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:v}=l.useContext(Te),{role:h=Vt,roleDescription:S="draggable",tabIndex:g=0}=o??{},m=(c==null?void 0:c.id)===t,w=l.useContext(m?He:Zr),[x,y]=Be(),[M,b]=Be(),E=$r(a,t),D=Re(n);G(()=>(f.set(t,{id:t,key:s,node:x,activatorNode:M,data:D}),()=>{const N=f.get(t);N&&N.key===s&&f.delete(t)}),[f,t]);const C=l.useMemo(()=>({role:h,tabIndex:g,"aria-disabled":r,"aria-pressed":m&&h===Vt?!0:void 0,"aria-roledescription":S,"aria-describedby":d.draggable}),[r,h,g,m,S,d.draggable]);return{active:c,activatorEvent:i,activeNodeRect:u,attributes:C,isDragging:m,listeners:r?void 0:E,node:x,over:v,setNodeRef:y,setActivatorNodeRef:b,transform:w}}function to(){return l.useContext(gn)}const no="Droppable",ro={timeout:25};function Oo(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const s=We(no),{active:a,dispatch:i,over:c,measureDroppableContainers:u}=l.useContext(Te),d=l.useRef({disabled:n}),f=l.useRef(!1),v=l.useRef(null),h=l.useRef(null),{disabled:S,updateMeasurementsFor:g,timeout:m}={...ro,...o},w=Re(g??r),x=l.useCallback(()=>{if(!f.current){f.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{u(Array.isArray(w.current)?w.current:[w.current]),h.current=null},m)},[m]),y=Ve({callback:x,disabled:S||!a}),M=l.useCallback((C,N)=>{y&&(N&&(y.unobserve(N),f.current=!1),C&&y.observe(C))},[y]),[b,E]=Be(M),D=Re(t);return l.useEffect(()=>{!y||!b.current||(y.disconnect(),f.current=!1,y.observe(b.current))},[b,y]),l.useEffect(()=>(i({type:T.RegisterDroppable,element:{id:r,key:s,disabled:n,node:b,rect:v,data:D}}),()=>i({type:T.UnregisterDroppable,key:s,id:r})),[r]),l.useEffect(()=>{n!==d.current.disabled&&(i({type:T.SetDroppableDisabled,id:r,key:s,disabled:n}),d.current.disabled=n)},[r,s,n,i]),{active:a,rect:v,isOver:(c==null?void 0:c.id)===r,node:b,over:c,setNodeRef:E}}function oo(e){let{animation:t,children:n}=e;const[r,o]=l.useState(null),[s,a]=l.useState(null),i=Fe(n);return!n&&!r&&i&&o(i),G(()=>{if(!s)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){o(null);return}Promise.resolve(t(u,s)).then(()=>{o(null)})},[t,r,s]),A.createElement(A.Fragment,null,n,r?l.cloneElement(r,{ref:a}):null)}const so={x:0,y:0,scaleX:1,scaleY:1};function io(e){let{children:t}=e;return A.createElement(Te.Provider,{value:hn},A.createElement(He.Provider,{value:so},t))}const ao={position:"fixed",touchAction:"none"},lo=e=>ut(e)?"transform 250ms ease":void 0,co=l.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:o,children:s,className:a,rect:i,style:c,transform:u,transition:d=lo}=e;if(!i)return null;const f=o?u:{...u,scaleX:1,scaleY:1},v={...ao,width:i.width,height:i.height,top:i.top,left:i.left,transform:Ee.Transform.toString(f),transformOrigin:o&&r?er(r,i):void 0,transition:typeof d=="function"?d(r):d,...c};return A.createElement(n,{className:a,style:v,ref:t},s)}),uo=e=>t=>{let{active:n,dragOverlay:r}=t;const o={},{styles:s,className:a}=e;if(s!=null&&s.active)for(const[i,c]of Object.entries(s.active))c!==void 0&&(o[i]=n.node.style.getPropertyValue(i),n.node.style.setProperty(i,c));if(s!=null&&s.dragOverlay)for(const[i,c]of Object.entries(s.dragOverlay))c!==void 0&&r.node.style.setProperty(i,c);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[c,u]of Object.entries(o))n.node.style.setProperty(c,u);a!=null&&a.active&&n.node.classList.remove(a.active)}},fo=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Ee.Transform.toString(t)},{transform:Ee.Transform.toString(n)}]},ho={duration:250,easing:"ease",keyframes:fo,sideEffects:uo({styles:{active:{opacity:"0"}}})};function go(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:o}=e;return Ue((s,a)=>{if(t===null)return;const i=n.get(s);if(!i)return;const c=i.node.current;if(!c)return;const u=fn(a);if(!u)return;const{transform:d}=P(a).getComputedStyle(a),f=en(d);if(!f)return;const v=typeof t=="function"?t:vo(t);return ln(c,o.draggable.measure),v({active:{id:s,data:i.data,node:c,rect:o.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:a,rect:o.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:o,transform:f})})}function vo(e){const{duration:t,easing:n,sideEffects:r,keyframes:o}={...ho,...e};return s=>{let{active:a,dragOverlay:i,transform:c,...u}=s;if(!t)return;const d={x:i.rect.left-a.rect.left,y:i.rect.top-a.rect.top},f={scaleX:c.scaleX!==1?a.rect.width*c.scaleX/i.rect.width:1,scaleY:c.scaleY!==1?a.rect.height*c.scaleY/i.rect.height:1},v={x:c.x-d.x,y:c.y-d.y,...f},h=o({...u,active:a,dragOverlay:i,transform:{initial:c,final:v}}),[S]=h,g=h[h.length-1];if(JSON.stringify(S)===JSON.stringify(g))return;const m=r==null?void 0:r({active:a,dragOverlay:i,...u}),w=i.node.animate(h,{duration:t,easing:n,fill:"forwards"});return new Promise(x=>{w.onfinish=()=>{m==null||m(),x()}})}}let Ht=0;function po(e){return l.useMemo(()=>{if(e!=null)return Ht++,Ht},[e])}const mo=A.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:o,transition:s,modifiers:a,wrapperElement:i="div",className:c,zIndex:u=999}=e;const{activatorEvent:d,active:f,activeNodeRect:v,containerNodeRect:h,draggableNodes:S,droppableContainers:g,dragOverlay:m,over:w,measuringConfiguration:x,scrollableAncestors:y,scrollableAncestorRects:M,windowRect:b}=to(),E=l.useContext(He),D=po(f==null?void 0:f.id),C=vn(a,{activatorEvent:d,active:f,activeNodeRect:v,containerNodeRect:h,draggingNodeRect:m.rect,over:w,overlayNodeRect:m.rect,scrollableAncestors:y,scrollableAncestorRects:M,transform:E,windowRect:b}),N=vt(v),k=go({config:r,draggableNodes:S,droppableContainers:g,measuringConfiguration:x}),O=N?m.setRef:void 0;return A.createElement(io,null,A.createElement(oo,{animation:k},f&&D?A.createElement(co,{key:D,id:f.id,ref:O,as:i,activatorEvent:d,adjustScale:t,className:c,transition:s,rect:N,style:{zIndex:u,...o},transform:C},n):null))}),bo=()=>{const[e,t]=l.useState({dimensions:[],metrics:[],chartType:"bar",dateRange:{from:void 0,to:void 0},customMetrics:[],chartData:[],draggedItem:void 0});return{state:e,setDimensions:u=>{t(d=>({...d,dimensions:u}))},setMetrics:u=>{t(d=>({...d,metrics:u}))},setChartType:u=>{t(d=>({...d,chartType:u}))},setDateRange:u=>{t(d=>({...d,dateRange:u}))},addCustomMetric:u=>{t(d=>({...d,customMetrics:[...d.customMetrics,u]}))},setChartData:u=>{t(d=>({...d,chartData:u}))},setDraggedItem:u=>{t(d=>({...d,draggedItem:u}))}}},yo=l.lazy(()=>Jt(()=>import("./MetricPalette-BrasPHSc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),xo=l.lazy(()=>Jt(()=>import("./ChartCanvas-BzcQ7hjy.js"),__vite__mapDeps([11,1,2,12,13,14,7,6,8,9,10,5]))),wo=[{name:"Jan",value:4e3},{name:"Feb",value:3e3},{name:"Mar",value:5e3},{name:"Apr",value:4500},{name:"May",value:6e3},{name:"Jun",value:5500}];function Do(){const{state:e,setDimensions:t,setMetrics:n,setChartType:r,setDateRange:o,setChartData:s,setDraggedItem:a}=bo(),[i,c]=l.useState({from:new Date(2022,0,20),to:It(new Date(2022,0,20),20)}),[u,d]=l.useState({from:new Date(2022,0,20),to:It(new Date(2022,0,20),20)}),f=()=>{i!=null&&i.from&&i.to&&(d(i),o({from:i.from,to:i.to}))};l.useEffect(()=>{e.metrics.length>0&&e.dimensions.length>0?s(wo):s([])},[e.metrics,e.dimensions]);const v=x=>{const{active:y,over:M}=x;if(a(void 0),!M)return;const b=y.data.current,E=M.id;(b==null?void 0:b.type)==="dimension"&&E==="x-axis"?e.dimensions.includes(b.name)||t([b.name]):(b==null?void 0:b.type)==="metric"&&E==="y-axis"&&(e.metrics.includes(b.name)||n([...e.metrics,b.name]))},h=x=>{const{active:y}=x,{type:M,name:b}=y.data.current;M&&b&&a({type:M,name:b})},S=()=>{a(void 0)},g=x=>{t(e.dimensions.filter(y=>y!==x))},m=x=>{n(e.metrics.filter(y=>y!==x))},w=Qn(Gn(gt,{activationConstraint:{distance:8}}));return p.jsx(Mn,{children:p.jsx("div",{className:"p-4 md:p-6 h-full flex flex-col overflow-hidden",children:p.jsxs(l.Suspense,{fallback:p.jsx("div",{className:"flex-1 flex items-center justify-center",children:p.jsx(Rn,{className:"h-8 w-8 rounded-full"})}),children:[p.jsx("div",{className:"sticky top-0 z-50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/95 pb-4 border-b mb-4 -mx-4 md:-mx-6 px-4 md:px-6 pt-2 shadow-sm",children:p.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Chart Builder"}),p.jsx("p",{className:"text-muted-foreground text-sm md:text-base",children:"Drag metrics and dimensions to create custom charts"})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[p.jsxs("div",{className:"w-full sm:w-48",children:[p.jsx(kt,{className:"text-xs text-muted-foreground",children:"Chart Type"}),p.jsxs(Nn,{value:e.chartType,onValueChange:r,children:[p.jsx(An,{className:"w-full",children:p.jsx(On,{placeholder:"Select chart type"})}),p.jsxs(Tn,{children:[p.jsx(Pe,{value:"bar",children:"Bar Chart"}),p.jsx(Pe,{value:"line",children:"Line Chart"}),p.jsx(Pe,{value:"area",children:"Area Chart"}),p.jsx(Pe,{value:"pie",children:"Pie Chart"})]})]})]}),p.jsxs("div",{className:"w-full sm:w-48",children:[p.jsx(kt,{className:"text-xs text-muted-foreground",children:"Date Range"}),p.jsxs(jn,{children:[p.jsx(kn,{asChild:!0,children:p.jsxs(Lt,{id:"date",variant:"outline",className:En("w-[300px] justify-start text-left font-normal",!u&&"text-muted-foreground"),children:[p.jsx(Ln,{className:"mr-2 h-4 w-4"}),u!=null&&u.from?u.to?p.jsxs(p.Fragment,{children:[et(u.from,"LLL dd, y")," -"," ",et(u.to,"LLL dd, y")]}):et(u.from,"LLL dd, y"):p.jsx("span",{children:"Pick a date"})]})}),p.jsxs(In,{className:"w-auto p-0 flex flex-col",align:"start",children:[p.jsx(Pn,{initialFocus:!0,mode:"range",defaultMonth:i==null?void 0:i.from,selected:i,onSelect:c,numberOfMonths:2}),p.jsx("div",{className:"p-2 border-t flex justify-end",children:p.jsx(Lt,{size:"sm",onClick:f,className:"ml-auto",children:"Apply"})})]})]})]})]})]})}),p.jsxs(Qr,{onDragStart:h,onDragEnd:v,onDragCancel:S,autoScroll:!1,sensors:w,collisionDetection:or,children:[p.jsx(mo,{dropAnimation:{duration:250,easing:"cubic-bezier(0.18, 0.67, 0.6, 0.99)"},children:e.draggedItem?p.jsx("div",{className:"bg-accent/90 backdrop-blur-sm p-2 rounded-md shadow-lg border border-border transform scale-105 transition-transform",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(zn,{className:"h-4 w-4 text-muted-foreground"}),p.jsx("span",{className:"text-sm font-medium",children:e.draggedItem.name})]})}):null}),p.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-4 min-h-0",children:[p.jsx("div",{className:"lg:w-72 shrink-0",children:p.jsx(yo,{})}),p.jsx("div",{className:"flex-1 min-w-0 flex flex-col",children:p.jsx("div",{className:"bg-card rounded-lg border p-4 flex-1 flex flex-col min-h-0",children:p.jsx(xo,{dimensions:e.dimensions,metrics:e.metrics,chartType:e.chartType,chartData:e.chartData,onRemoveDimension:g,onRemoveMetric:m})})})]})]})]})})})}const To=Object.freeze(Object.defineProperty({__proto__:null,default:Do},Symbol.toStringTag,{value:"Module"}));export{Ee as C,zn as G,Oo as a,To as i,Ao as u};
