import{r as h,u as f,a as g,j as s}from"./index-B9zsSBSc.js";import{B as x}from"./button-DFNT8clF.js";import{I as i}from"./input-DNC2poPh.js";import{L as c}from"./label-71DtArOj.js";import{C as j,a as y,b as w,c as v,d as N}from"./card-BvjUkWMy.js";import{A as b}from"./api-DS5URhHX.js";function k(){const[t,r]=h.useState(!1),d=f(),{toast:e}=g(),l=async n=>{n.preventDefault(),r(!0);const o=new FormData(n.currentTarget),m=o.get("username"),u=o.get("password");try{const a=await fetch(b.LOGIN,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:m,password:u})});if(a.ok){const p=await a.json();localStorage.setItem("auth_token",p.token),e({title:"Login successful"}),d("/dashboard")}else e({title:"Login failed",description:"Invalid credentials",variant:"destructive"})}catch{e({title:"Error",description:"Could not connect to server",variant:"destructive"})}finally{r(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:s.jsxs(j,{className:"w-full max-w-md",children:[s.jsxs(y,{children:[s.jsx(w,{className:"text-2xl",children:"Analytics Dashboard"}),s.jsx(v,{children:"Sign in to access your analytics"})]}),s.jsx(N,{children:s.jsxs("form",{onSubmit:l,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(c,{htmlFor:"login-username",children:"Username"}),s.jsx(i,{id:"login-username",name:"username",type:"text",placeholder:"your_username",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(c,{htmlFor:"login-password",children:"Password"}),s.jsx(i,{id:"login-password",name:"password",type:"password",required:!0})]}),s.jsx(x,{type:"submit",className:"w-full",disabled:t,children:t?"Logging in...":"Login"})]})})]})})}export{k as default};
