import{c as S,r as m,j as e,X,I as M}from"./index-DdLQU5_r.js";import{B as N}from"./badge-B7dwNen6.js";import{T as W,a as Y,b as A,c as T,d as $,e as L}from"./table-qOrQrQ_V.js";import{R as z,C as b,X as v,Y as y,T as u,L as f,B as H,a4 as O,A as q}from"./generateCategoricalChart-DZmb3CkA.js";import{B as F,L as G}from"./BarChart-C2UWPUI1.js";import{a as U,b as _}from"./PieChart-BKo4a6US.js";import{A as D}from"./AreaChart-BQx4gJQN.js";import{L as J}from"./LineChart-C_CebRp0.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=S("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=S("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),x=o=>o.split("_").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "),R=({label:o,items:r,onRemove:p})=>r.length===0?null:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:[o,":"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(t=>e.jsxs(N,{variant:"secondary",className:"flex items-center gap-1.5 px-2.5 py-0.5 text-xs",children:[x(t),e.jsx("div",{className:"hover:bg-destructive/10 rounded-full p-0.5 cursor-pointer transition-colors group",onClick:j=>{j.stopPropagation(),p(t)},children:e.jsx(X,{className:"h-3 w-3 group-hover:text-destructive"})})]},t))})]}),n=["#2563eb","#dc2626","#16a34a","#9333ea","#ea580c","#0891b2","#be185d","#ca8a04","#4f46e5","#059669"];function de({dimensions:o=[],metrics:r,chartType:p,chartData:t,onRemoveDimension:j=()=>{},onRemoveMetric:B=()=>{},title:k,isCompact:i=!1,topClients:w=[],viewMode:g="chart",onDataChange:C}){const[Z,K]=m.useState({width:0,height:0}),c=m.useRef(null),h=m.useCallback(()=>{c.current&&K({width:c.current.offsetWidth,height:Math.max(i?300:400,c.current.offsetHeight-(i?20:100))})},[i]);m.useEffect(()=>(h(),window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)),[h]);const E=(l,s,a)=>{if(!C)return;const d=[...t];d[l]={...d[l],[s]:parseFloat(a)||0},C(d)},I=()=>{if(!i&&(o.length===0||r.length===0))return e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center bg-muted/5 rounded-lg border border-dashed",children:[e.jsx("div",{className:"text-muted-foreground mb-4",children:e.jsx(Q,{className:"w-12 h-12 mx-auto opacity-20"})}),e.jsx("h3",{className:"text-lg font-medium mb-1",children:"Configuration Required"}),e.jsxs("p",{className:"text-sm text-muted-foreground max-w-md",children:["Please select a ",e.jsx("strong",{children:"Dimension"})," (X-Axis) and at least one ",e.jsx("strong",{children:"Metric"})," (Y-Axis) from the sidebar."]})]});if(!t||t.length===0)return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-4 text-muted-foreground",children:e.jsx(V,{className:"w-12 h-12 mx-auto opacity-20"})}),e.jsx("p",{className:"text-lg font-medium",children:"No Data Available"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"There is no data matching your criteria for the selected date range."})]})});if(g==="table")return e.jsx("div",{className:"h-full w-full overflow-auto",children:e.jsxs(W,{children:[e.jsx(Y,{children:e.jsxs(A,{children:[e.jsx(T,{className:"w-[150px]",children:"Dimension"}),r.map(s=>e.jsx(T,{children:x(s)},s))]})}),e.jsx($,{children:t.map((s,a)=>e.jsxs(A,{children:[e.jsx(L,{className:"font-medium",children:s.name}),r.map(d=>e.jsx(L,{children:e.jsx(M,{type:"number",value:s[d],onChange:P=>E(a,d,P.target.value),className:"h-8 w-[120px]"})},d))]},a))})]})});const l={data:t,margin:{top:20,right:30,left:20,bottom:20}};switch(p){case"line":return e.jsxs(J,{...l,children:[e.jsx(b,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),e.jsx(v,{dataKey:"name",stroke:"hsl(var(--foreground))"}),e.jsx(y,{stroke:"hsl(var(--foreground))"}),e.jsx(u,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))"}}),e.jsx(f,{}),r.map((s,a)=>e.jsx(G,{type:"monotone",dataKey:s,name:x(s),stroke:n[a%n.length],strokeWidth:2},s))]});case"area":return e.jsxs(D,{...l,children:[e.jsx(b,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),e.jsx(v,{dataKey:"name",stroke:"hsl(var(--foreground))"}),e.jsx(y,{stroke:"hsl(var(--foreground))"}),e.jsx(u,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))"}}),e.jsx(f,{}),r.map((s,a)=>e.jsx(q,{type:"monotone",dataKey:s,name:x(s),stroke:n[a%n.length],fill:n[a%n.length],fillOpacity:.3},s))]});case"pie":return e.jsxs(U,{children:[e.jsx(_,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:a})=>`${x(s)}: ${(a*100).toFixed(0)}%`,outerRadius:120,fill:"hsl(var(--primary))",dataKey:r[0]||"value",children:t.map((s,a)=>e.jsx(O,{fill:n[a%n.length]},`cell-${a}`))}),e.jsx(u,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))"}}),e.jsx(f,{})]});default:return e.jsxs(F,{...l,children:[e.jsx(b,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),e.jsx(v,{dataKey:"name",stroke:"hsl(var(--foreground))"}),e.jsx(y,{stroke:"hsl(var(--foreground))"}),e.jsx(u,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))"}}),e.jsx(f,{}),r.map((s,a)=>e.jsx(H,{dataKey:s,name:x(s),fill:n[a%n.length]},s))]})}};return e.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[k&&e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2 border-b pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground",children:k}),g==="table"&&e.jsx(N,{variant:"outline",className:"text-[10px]",children:"Table Mode"})]}),w.length>0&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase text-muted-foreground tracking-wider",children:"Top Clients:"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:w.map((l,s)=>e.jsxs(N,{variant:"outline",className:"text-[10px] py-0 h-5 bg-primary/5 border-primary/20",children:[e.jsx("span",{className:"font-medium mr-1",children:l.name}),e.jsxs("span",{className:"text-primary opacity-80 font-bold",children:["Â£",l.revenue.toLocaleString()]})]},s))})]})]}),!i&&(o.length>0||r.length>0)&&e.jsxs("div",{className:"flex flex-col gap-3 py-2 border-b bg-muted/5 -mx-4 px-4",children:[e.jsx(R,{label:"X-Axis",items:o,onRemove:j}),e.jsx(R,{label:"Y-Axis",items:r,onRemove:B})]}),e.jsx("div",{className:"bg-background rounded-lg border p-4 flex-1 min-h-0 relative",ref:c,children:e.jsx("div",{className:"w-full h-full min-h-[300px]",children:(()=>{const l=I();return g!=="table"&&t&&t.length>0&&(i||o.length>0&&r.length>0)?e.jsx(z,{width:"100%",height:"100%",children:l}):l})()})})]})}export{de as default};
