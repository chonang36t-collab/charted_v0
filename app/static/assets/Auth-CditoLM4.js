import{r as g,u as j,a as y,b as v,R as N,j as e,A as w}from"./index-X6n8QLQ6.js";import{B as b}from"./button-CvIZVJXF.js";import{I as d}from"./input-DG_C_fox.js";import{L as m}from"./label-C-BKykDX.js";import{C as L,a as C,b as I,c as S,d as D}from"./card-DwLgY9GA.js";function P(){const[t,r]=g.useState(!1),n=j(),{toast:s}=y(),{refreshUser:u,role:o,isLoading:i}=v();N.useEffect(()=>{!i&&o&&n("/dashboard")},[o,i,n]);const p=async c=>{c.preventDefault(),r(!0);const l=new FormData(c.currentTarget),h=l.get("username"),f=l.get("password");try{const a=await fetch(w.LOGIN,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:h,password:f})});if(a.ok){const x=await a.json();localStorage.setItem("auth_token",x.token),await u(),s({title:"Login successful"})}else s({title:"Login failed",description:"Invalid credentials",variant:"destructive"})}catch{s({title:"Error",description:"Could not connect to server",variant:"destructive"})}finally{r(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col bg-background relative p-4",children:[e.jsx("div",{className:"absolute top-6 left-6 z-50",children:e.jsx("a",{href:"/",className:"block hover:opacity-80 transition-opacity",children:e.jsx("img",{src:"/logo.png",alt:"Company Logo",className:"h-12 w-auto object-contain"})})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs(L,{className:"w-full max-w-md",children:[e.jsxs(C,{children:[e.jsx(I,{className:"text-2xl",children:"Analytics Dashboard"}),e.jsx(S,{children:"Sign in to access your analytics"})]}),e.jsx(D,{children:e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"login-username",children:"Username"}),e.jsx(d,{id:"login-username",name:"username",type:"text",placeholder:"your_username",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"login-password",children:"Password"}),e.jsx(d,{id:"login-password",name:"password",type:"password",required:!0})]}),e.jsx(b,{type:"submit",className:"w-full",disabled:t,children:t?"Logging in...":"Login"})]})})]})})]})}export{P as default};
