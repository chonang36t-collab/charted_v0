import{c as $e,g as Se,r as d,h as F,j as t,P as B,i as O,k as K,l as Ue,m as De,d as M,b as Xe,R as L,T as qe,n as Ve,o as Ge,p as Ke,A as G,a as Je,q as $,s as Qe}from"./index-DtQn1uNd.js";import{B as W}from"./button-CAOUf-gP.js";import{P as Z,a as ee,g as me,b as te,C as pe,c as xe,i as ve,d as Ze}from"./locationUtils-qCA5DO_Z.js";import{u as et,C as tt,a as rt,c as ot}from"./index-mXp-H4xc.js";import{C as be}from"./chevron-down-Bqgksh1q.js";import{f as re}from"./format-D9mdKFv9.js";import{C as nt,a as st,b as lt,d as at}from"./card-CDuSwAbl.js";import{P as it}from"./progress-hsDsWyYp.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=$e("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),Ht=(e,o)=>{var T,g,y,b,w,E,j,A,N,C,k,_,X,J,Q;if(!e)return{revenue:{value:0,change:0,trend:"neutral",text:"No data available"},clientPay:{value:0,change:0,trend:"neutral",text:"No data available"},staffPay:{value:0,change:0,trend:"neutral",text:"No data available"},totalShifts:{value:0,change:0,trend:"neutral",text:"No data available"},paidHours:{value:0,change:0,trend:"neutral",text:"No data available"},uniqueEmployees:{value:0,change:0,trend:"neutral",text:"No data available"},avgShiftDuration:{value:0,change:0,trend:"neutral",text:"No data available"},totalClients:{value:0,change:0,trend:"neutral",text:"No data available"}};const r=e.totalRevenue||0,i=e.avgClientPayPerHour||0,n=e.avgStaffPayPerHour||0,s=((T=e.previousPeriod)==null?void 0:T.totalRevenue)||0,a=((g=e.previousPeriod)==null?void 0:g.avgClientPayPerHour)||0,c=((y=e.previousPeriod)==null?void 0:y.avgStaffPayPerHour)||0,l=(H,Y)=>Y>0?(H-Y)/Y*100:0,u=l(r,s),f=l(i,a),m=l(n,c),h=H=>H>0?"up":H<0?"down":"neutral",x=(H,Y,p)=>{if(!Y)return"No previous data";let P="";return p<=7?P="last week":p<=31?P="last month":p<=93?P="last quarter":P="last period",`${H>0?"+":""}${Math.abs(H).toFixed(1)}% from ${P}`},v=Math.ceil((o.to.getTime()-o.from.getTime())/(1e3*60*60*24)),S=!!e.previousPeriod;return{revenue:{value:r,change:u,trend:h(u),text:x(u,S,v)},clientPay:{value:i,change:f,trend:h(f),text:x(f,S,v)},staffPay:{value:n,change:m,trend:h(m),text:x(m,S,v)},totalShifts:{value:e.totalShifts,change:l(e.totalShifts,((b=e.previousPeriod)==null?void 0:b.totalShifts)||0),trend:h(l(e.totalShifts,((w=e.previousPeriod)==null?void 0:w.totalShifts)||0)),text:x(l(e.totalShifts,((E=e.previousPeriod)==null?void 0:E.totalShifts)||0),S,v)},paidHours:{value:e.totalPaidHours||0,change:l(e.totalPaidHours||0,((j=e.previousPeriod)==null?void 0:j.totalPaidHours)||0)||0,trend:h(l(e.totalPaidHours||0,((A=e.previousPeriod)==null?void 0:A.totalPaidHours)||0)),text:x(l(e.totalPaidHours||0,((N=e.previousPeriod)==null?void 0:N.totalPaidHours)||0),S,v)},uniqueEmployees:{value:e.uniqueEmployees,change:l(e.uniqueEmployees,((C=e.previousPeriod)==null?void 0:C.uniqueEmployees)||0),trend:h(l(e.uniqueEmployees,((k=e.previousPeriod)==null?void 0:k.uniqueEmployees)||0)),text:x(l(e.uniqueEmployees,((_=e.previousPeriod)==null?void 0:_.uniqueEmployees)||0),S,v)},avgShiftDuration:{value:e.totalPaidHours&&e.totalShifts?e.totalPaidHours/e.totalShifts:0,change:0,trend:"neutral",text:"Average hours per shift"},totalClients:{value:e.totalClients,change:l(e.totalClients,((X=e.previousPeriod)==null?void 0:X.totalClients)||0),trend:h(l(e.totalClients,((J=e.previousPeriod)==null?void 0:J.totalClients)||0)),text:x(l(e.totalClients,((Q=e.previousPeriod)==null?void 0:Q.totalClients)||0),S,v)}}};var se="Checkbox",[dt,Ot]=Se(se),[ut,ie]=dt(se);function ft(e){const{__scopeCheckbox:o,checked:r,children:i,defaultChecked:n,disabled:s,form:a,name:c,onCheckedChange:l,required:u,value:f="on",internal_do_not_use_render:m}=e,[h,x]=De({prop:r,defaultProp:n??!1,onChange:l,caller:se}),[v,S]=d.useState(null),[T,g]=d.useState(null),y=d.useRef(!1),b=v?!!a||!!v.closest("form"):!0,w={checked:h,disabled:s,setChecked:x,control:v,setControl:S,name:c,form:a,value:f,hasConsumerStoppedPropagationRef:y,required:u,defaultChecked:z(n)?!1:n,isFormControl:b,bubbleInput:T,setBubbleInput:g};return t.jsx(ut,{scope:o,...w,children:ht(m)?m(w):i})}var we="CheckboxTrigger",Ce=d.forwardRef(({__scopeCheckbox:e,onKeyDown:o,onClick:r,...i},n)=>{const{control:s,value:a,disabled:c,checked:l,required:u,setControl:f,setChecked:m,hasConsumerStoppedPropagationRef:h,isFormControl:x,bubbleInput:v}=ie(we,e),S=F(n,f),T=d.useRef(l);return d.useEffect(()=>{const g=s==null?void 0:s.form;if(g){const y=()=>m(T.current);return g.addEventListener("reset",y),()=>g.removeEventListener("reset",y)}},[s,m]),t.jsx(B.button,{type:"button",role:"checkbox","aria-checked":z(l)?"mixed":l,"aria-required":u,"data-state":Ee(l),"data-disabled":c?"":void 0,disabled:c,value:a,...i,ref:S,onKeyDown:O(o,g=>{g.key==="Enter"&&g.preventDefault()}),onClick:O(r,g=>{m(y=>z(y)?!0:!y),v&&x&&(h.current=g.isPropagationStopped(),h.current||g.stopPropagation())})})});Ce.displayName=we;var ce=d.forwardRef((e,o)=>{const{__scopeCheckbox:r,name:i,checked:n,defaultChecked:s,required:a,disabled:c,value:l,onCheckedChange:u,form:f,...m}=e;return t.jsx(ft,{__scopeCheckbox:r,checked:n,defaultChecked:s,disabled:c,required:a,onCheckedChange:u,name:i,form:f,value:l,internal_do_not_use_render:({isFormControl:h})=>t.jsxs(t.Fragment,{children:[t.jsx(Ce,{...m,ref:o,__scopeCheckbox:r}),h&&t.jsx(Ne,{__scopeCheckbox:r})]})})});ce.displayName=se;var ye="CheckboxIndicator",je=d.forwardRef((e,o)=>{const{__scopeCheckbox:r,forceMount:i,...n}=e,s=ie(ye,r);return t.jsx(K,{present:i||z(s.checked)||s.checked===!0,children:t.jsx(B.span,{"data-state":Ee(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:o,style:{pointerEvents:"none",...e.style}})})});je.displayName=ye;var Pe="CheckboxBubbleInput",Ne=d.forwardRef(({__scopeCheckbox:e,...o},r)=>{const{control:i,hasConsumerStoppedPropagationRef:n,checked:s,defaultChecked:a,required:c,disabled:l,name:u,value:f,form:m,bubbleInput:h,setBubbleInput:x}=ie(Pe,e),v=F(r,x),S=et(s),T=Ue(i);d.useEffect(()=>{const y=h;if(!y)return;const b=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(b,"checked").set,j=!n.current;if(S!==s&&E){const A=new Event("click",{bubbles:j});y.indeterminate=z(s),E.call(y,z(s)?!1:s),y.dispatchEvent(A)}},[h,S,s,n]);const g=d.useRef(z(s)?!1:s);return t.jsx(B.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??g.current,required:c,disabled:l,name:u,value:f,form:m,...o,tabIndex:-1,ref:v,style:{...o.style,...T,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Ne.displayName=Pe;function ht(e){return typeof e=="function"}function z(e){return e==="indeterminate"}function Ee(e){return z(e)?"indeterminate":e?"checked":"unchecked"}const V=d.forwardRef(({className:e,...o},r)=>t.jsx(ce,{ref:r,className:M("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...o,children:t.jsx(je,{className:M("flex items-center justify-center text-current"),children:t.jsx(tt,{className:"h-4 w-4"})})}));V.displayName=ce.displayName;const zt=({dateRange:e,onDateRangeChange:o,calendarOpen:r,onCalendarOpenChange:i,tempDateRange:n,onTempDateRangeChange:s,selectedLocations:a=[],onLocationsChange:c,selectedSites:l=[],onSitesChange:u})=>{const{role:f,locations:m}=Xe(),[h,x]=L.useState([]),[v,S]=L.useState([]),[T,g]=L.useState(!1),[y,b]=L.useState(!1);L.useEffect(()=>{(async()=>{try{const P=await fetch(`${G.SALES_SUMMARY.replace("sales-summary","locations")}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`},credentials:"include"});if(P.ok){const U=await P.json();x(f==="admin"?U:U.filter(q=>m.includes(q)))}}catch(P){console.error("Failed to fetch locations:",P)}})()},[f,m]),L.useEffect(()=>{u&&(async()=>{try{const P=new URLSearchParams;a.length>0&&a.forEach(q=>P.append("locations",q));const U=await fetch(`${G.SITES}?${P}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`},credentials:"include"});if(U.ok){const q=await U.json();S(q)}}catch(P){console.error("Failed to fetch sites:",P)}})()},[a,u]);const w=p=>{c&&(a.includes(p)?c(a.filter(P=>P!==p)):c([...a,p]))},E=p=>{u&&(l.includes(p)?u(l.filter(P=>P!==p)):u([...l,p]))},[j,A]=L.useState(e==null?void 0:e.from),[N,C]=L.useState(e==null?void 0:e.to),[k,_]=L.useState(!1),[X,J]=L.useState(!1);L.useEffect(()=>{A(e==null?void 0:e.from),C(e==null?void 0:e.to)},[e]);const Q=p=>{p&&(A(p),N&&ve(p,N)&&C(void 0))},H=p=>{p&&C(p)},Y=()=>{j&&N&&o({from:j,to:N})};return t.jsx("div",{className:"sticky top-0 z-40 bg-background border-b border-border",children:t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),t.jsx("p",{className:"text-muted-foreground",children:"Overview of your analytics"})]}),t.jsxs("div",{className:"flex flex-wrap gap-4 items-end justify-start sm:justify-end flex-1",children:[c&&t.jsxs("div",{className:"flex flex-col gap-1.5",children:[t.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Location"}),t.jsxs(Z,{open:T,onOpenChange:g,children:[t.jsx(ee,{asChild:!0,children:t.jsxs(W,{variant:"outline",className:"w-[180px] justify-between text-left font-normal",children:[t.jsx("div",{className:"flex items-center gap-2 overflow-hidden mr-2",children:t.jsx("span",{className:"truncate",children:a.length===0?"All Locations":a.length===1?me(a[0]):`${a.length} locations`})}),t.jsx(be,{className:"h-4 w-4 opacity-50 shrink-0"})]})}),t.jsx(te,{className:"w-[200px] p-0",align:"start",children:t.jsxs("div",{className:"p-2 max-h-[300px] overflow-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-muted rounded-sm cursor-pointer mb-1",onClick:p=>{p.stopPropagation(),a.length===h.length?c([]):c(h)},children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(V,{checked:h.length>0&&a.length===h.length,className:"pointer-events-none"}),t.jsx("span",{className:"text-sm font-medium",children:"All Locations"})]}),a.length>0&&t.jsx(W,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-muted-foreground hover:text-foreground",onClick:p=>{p.stopPropagation(),c([])},children:"Clear"})]}),t.jsx("div",{className:"h-px bg-border my-1"}),t.jsx(qe,{children:h.map(p=>t.jsxs("div",{className:"flex items-center space-x-2 p-2 hover:bg-muted rounded-sm cursor-pointer",onClick:P=>{P.stopPropagation(),w(p)},children:[t.jsx(V,{checked:a.includes(p),className:"pointer-events-none"}),t.jsxs(Ve,{children:[t.jsx(Ge,{asChild:!0,children:t.jsx("span",{className:"text-sm truncate font-medium",children:me(p)})}),t.jsx(Ke,{side:"right",children:t.jsx("p",{children:p})})]})]},p))})]})})]})]}),u&&t.jsxs("div",{className:"flex flex-col gap-1.5",children:[t.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Site"}),t.jsxs(Z,{open:y,onOpenChange:b,children:[t.jsx(ee,{asChild:!0,children:t.jsxs(W,{variant:"outline",className:"w-[180px] justify-between text-left font-normal",children:[t.jsx("div",{className:"flex items-center gap-2 overflow-hidden mr-2",children:t.jsx("span",{className:"truncate",children:l.length===0?"All Sites":`${l.length} sites`})}),t.jsx(be,{className:"h-4 w-4 opacity-50 shrink-0"})]})}),t.jsx(te,{className:"w-[200px] p-0",align:"start",children:t.jsxs("div",{className:"p-2 max-h-[300px] overflow-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-muted rounded-sm cursor-pointer mb-1",onClick:p=>{p.stopPropagation(),l.length===v.length?u([]):u(v)},children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(V,{checked:v.length>0&&l.length===v.length,className:"pointer-events-none"}),t.jsx("span",{className:"text-sm font-medium",children:"All Sites"})]}),l.length>0&&t.jsx(W,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-muted-foreground hover:text-foreground",onClick:p=>{p.stopPropagation(),u([])},children:"Clear"})]}),t.jsx("div",{className:"h-px bg-border my-1"}),v.map(p=>t.jsxs("div",{className:"flex items-center space-x-2 p-2 hover:bg-muted rounded-sm cursor-pointer",onClick:P=>{P.stopPropagation(),E(p)},children:[t.jsx(V,{checked:l.includes(p),className:"pointer-events-none"}),t.jsx("span",{className:"text-sm truncate font-medium",children:p})]},p))]})})]})]}),t.jsxs("div",{className:"flex flex-col gap-1.5",children:[t.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"From Date"}),t.jsxs(Z,{open:k,onOpenChange:_,children:[t.jsx(ee,{asChild:!0,children:t.jsxs(W,{variant:"outline",className:M("w-[140px] justify-start text-left font-normal",!j&&"text-muted-foreground"),children:[t.jsx(pe,{className:"mr-2 h-4 w-4"}),j?re(j,"LLL dd, y"):"From"]})}),t.jsx(te,{className:"w-auto p-0",align:"start",children:t.jsx("div",{className:"p-3",children:t.jsx(xe,{mode:"single",selected:j,onSelect:Q,initialFocus:!0,captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-10,toYear:new Date().getFullYear()+1,disabled:p=>N?ve(p,N):!1,className:"rounded-md border"})})})]})]}),t.jsxs("div",{className:"flex flex-col gap-1.5",children:[t.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Till Date"}),t.jsxs(Z,{open:X,onOpenChange:J,children:[t.jsx(ee,{asChild:!0,children:t.jsxs(W,{variant:"outline",className:M("w-[140px] justify-start text-left font-normal",!N&&"text-muted-foreground"),disabled:!j,children:[t.jsx(pe,{className:"mr-2 h-4 w-4"}),N?re(N,"LLL dd, y"):"To"]})}),t.jsx(te,{className:"w-auto p-0",align:"start",children:t.jsx("div",{className:"p-3",children:t.jsx(xe,{mode:"single",selected:N,onSelect:H,initialFocus:!0,captionLayout:"dropdown-buttons",fromYear:j?j.getFullYear():new Date().getFullYear()-10,toYear:new Date().getFullYear()+1,disabled:p=>j?Ze(p,j):!1,className:"rounded-md border"})})})]})]}),t.jsxs("div",{className:"flex flex-col gap-1.5 pb-0.5",children:[t.jsx("div",{className:"h-4"})," ",t.jsx(W,{onClick:Y,disabled:!j||!N,className:"",children:"Apply"})]})]})]})})})},Mt=(e,o,r)=>{const[i,n]=d.useState([]),[s,a]=d.useState([]),[c,l]=d.useState([]),[u,f]=d.useState(!1),[m,h]=d.useState(!1),[x,v]=d.useState(!1);Je();const S=()=>{const b=new URLSearchParams({start:re(e.from,"yyyy-MM-dd"),end:re(e.to,"yyyy-MM-dd")});return o&&o.length>0&&o.forEach(w=>b.append("locations",w)),r&&r.length>0&&r.forEach(w=>b.append("sites",w)),b},T=async()=>{f(!0);try{const b=S();b.append("limit","100");const w=await fetch(`${G.RANKINGS_STAFF}?${b}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(w.ok){const E=await w.json();n(E)}}catch(b){console.error(b)}finally{f(!1)}},g=async()=>{h(!0);try{const b=S();b.append("limit","100"),b.append("metric","revenue");const w=await fetch(`${G.RANKINGS_CLIENTS}?${b}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(w.ok){const E=await w.json();a(E)}}catch(b){console.error(b)}finally{h(!1)}},y=async()=>{v(!0);try{const b=S();b.append("limit","100"),b.append("metric","shifts");const w=await fetch(`${G.RANKINGS_CLIENTS}?${b}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(w.ok){const E=await w.json();l(E)}}catch(b){console.error(b)}finally{v(!1)}};return d.useEffect(()=>{T(),g(),y()},[e,o,r]),{topStaff:i,isLoadingStaff:u,topClientsRevenue:s,isLoadingClientsRev:m,topClientsShifts:c,isLoadingClientsShifts:x}};function mt(e,o){return d.useReducer((r,i)=>o[r][i]??r,e)}var de="ScrollArea",[Te,Ft]=Se(de),[pt,R]=Te(de),ke=d.forwardRef((e,o)=>{const{__scopeScrollArea:r,type:i="hover",dir:n,scrollHideDelay:s=600,...a}=e,[c,l]=d.useState(null),[u,f]=d.useState(null),[m,h]=d.useState(null),[x,v]=d.useState(null),[S,T]=d.useState(null),[g,y]=d.useState(0),[b,w]=d.useState(0),[E,j]=d.useState(!1),[A,N]=d.useState(!1),C=F(o,_=>l(_)),k=rt(n);return t.jsx(pt,{scope:r,type:i,dir:k,scrollHideDelay:s,scrollArea:c,viewport:u,onViewportChange:f,content:m,onContentChange:h,scrollbarX:x,onScrollbarXChange:v,scrollbarXEnabled:E,onScrollbarXEnabledChange:j,scrollbarY:S,onScrollbarYChange:T,scrollbarYEnabled:A,onScrollbarYEnabledChange:N,onCornerWidthChange:y,onCornerHeightChange:w,children:t.jsx(B.div,{dir:k,...a,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});ke.displayName=de;var Ae="ScrollAreaViewport",Re=d.forwardRef((e,o)=>{const{__scopeScrollArea:r,children:i,nonce:n,...s}=e,a=R(Ae,r),c=d.useRef(null),l=F(o,c,a.onViewportChange);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),t.jsx(B.div,{"data-radix-scroll-area-viewport":"",...s,ref:l,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:t.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:i})})]})});Re.displayName=Ae;var I="ScrollAreaScrollbar",ue=d.forwardRef((e,o)=>{const{forceMount:r,...i}=e,n=R(I,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:a}=n,c=e.orientation==="horizontal";return d.useEffect(()=>(c?s(!0):a(!0),()=>{c?s(!1):a(!1)}),[c,s,a]),n.type==="hover"?t.jsx(xt,{...i,ref:o,forceMount:r}):n.type==="scroll"?t.jsx(vt,{...i,ref:o,forceMount:r}):n.type==="auto"?t.jsx(_e,{...i,ref:o,forceMount:r}):n.type==="always"?t.jsx(fe,{...i,ref:o}):null});ue.displayName=I;var xt=d.forwardRef((e,o)=>{const{forceMount:r,...i}=e,n=R(I,e.__scopeScrollArea),[s,a]=d.useState(!1);return d.useEffect(()=>{const c=n.scrollArea;let l=0;if(c){const u=()=>{window.clearTimeout(l),a(!0)},f=()=>{l=window.setTimeout(()=>a(!1),n.scrollHideDelay)};return c.addEventListener("pointerenter",u),c.addEventListener("pointerleave",f),()=>{window.clearTimeout(l),c.removeEventListener("pointerenter",u),c.removeEventListener("pointerleave",f)}}},[n.scrollArea,n.scrollHideDelay]),t.jsx(K,{present:r||s,children:t.jsx(_e,{"data-state":s?"visible":"hidden",...i,ref:o})})}),vt=d.forwardRef((e,o)=>{const{forceMount:r,...i}=e,n=R(I,e.__scopeScrollArea),s=e.orientation==="horizontal",a=ae(()=>l("SCROLL_END"),100),[c,l]=mt("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return d.useEffect(()=>{if(c==="idle"){const u=window.setTimeout(()=>l("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(u)}},[c,n.scrollHideDelay,l]),d.useEffect(()=>{const u=n.viewport,f=s?"scrollLeft":"scrollTop";if(u){let m=u[f];const h=()=>{const x=u[f];m!==x&&(l("SCROLL"),a()),m=x};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[n.viewport,s,l,a]),t.jsx(K,{present:r||c!=="hidden",children:t.jsx(fe,{"data-state":c==="hidden"?"hidden":"visible",...i,ref:o,onPointerEnter:O(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:O(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),_e=d.forwardRef((e,o)=>{const r=R(I,e.__scopeScrollArea),{forceMount:i,...n}=e,[s,a]=d.useState(!1),c=e.orientation==="horizontal",l=ae(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,f=r.viewport.offsetHeight<r.viewport.scrollHeight;a(c?u:f)}},10);return D(r.viewport,l),D(r.content,l),t.jsx(K,{present:i||s,children:t.jsx(fe,{"data-state":s?"visible":"hidden",...n,ref:o})})}),fe=d.forwardRef((e,o)=>{const{orientation:r="vertical",...i}=e,n=R(I,e.__scopeScrollArea),s=d.useRef(null),a=d.useRef(0),[c,l]=d.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=ze(c.viewport,c.content),f={...i,sizes:c,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:h=>s.current=h,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:h=>a.current=h};function m(h,x){return yt(h,a.current,c,x)}return r==="horizontal"?t.jsx(bt,{...f,ref:o,onThumbPositionChange:()=>{if(n.viewport&&s.current){const h=n.viewport.scrollLeft,x=ge(h,c,n.dir);s.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:h=>{n.viewport&&(n.viewport.scrollLeft=h)},onDragScroll:h=>{n.viewport&&(n.viewport.scrollLeft=m(h,n.dir))}}):r==="vertical"?t.jsx(gt,{...f,ref:o,onThumbPositionChange:()=>{if(n.viewport&&s.current){const h=n.viewport.scrollTop,x=ge(h,c);s.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:h=>{n.viewport&&(n.viewport.scrollTop=h)},onDragScroll:h=>{n.viewport&&(n.viewport.scrollTop=m(h))}}):null}),bt=d.forwardRef((e,o)=>{const{sizes:r,onSizesChange:i,...n}=e,s=R(I,e.__scopeScrollArea),[a,c]=d.useState(),l=d.useRef(null),u=F(o,l,s.onScrollbarXChange);return d.useEffect(()=>{l.current&&c(getComputedStyle(l.current))},[l]),t.jsx(Ie,{"data-orientation":"horizontal",...n,ref:u,sizes:r,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":le(r)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,m)=>{if(s.viewport){const h=s.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),Fe(h,m)&&f.preventDefault()}},onResize:()=>{l.current&&s.viewport&&a&&i({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:ne(a.paddingLeft),paddingEnd:ne(a.paddingRight)}})}})}),gt=d.forwardRef((e,o)=>{const{sizes:r,onSizesChange:i,...n}=e,s=R(I,e.__scopeScrollArea),[a,c]=d.useState(),l=d.useRef(null),u=F(o,l,s.onScrollbarYChange);return d.useEffect(()=>{l.current&&c(getComputedStyle(l.current))},[l]),t.jsx(Ie,{"data-orientation":"vertical",...n,ref:u,sizes:r,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":le(r)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,m)=>{if(s.viewport){const h=s.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),Fe(h,m)&&f.preventDefault()}},onResize:()=>{l.current&&s.viewport&&a&&i({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:ne(a.paddingTop),paddingEnd:ne(a.paddingBottom)}})}})}),[St,Le]=Te(I),Ie=d.forwardRef((e,o)=>{const{__scopeScrollArea:r,sizes:i,hasThumb:n,onThumbChange:s,onThumbPointerUp:a,onThumbPointerDown:c,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:f,onResize:m,...h}=e,x=R(I,r),[v,S]=d.useState(null),T=F(o,C=>S(C)),g=d.useRef(null),y=d.useRef(""),b=x.viewport,w=i.content-i.viewport,E=$(f),j=$(l),A=ae(m,10);function N(C){if(g.current){const k=C.clientX-g.current.left,_=C.clientY-g.current.top;u({x:k,y:_})}}return d.useEffect(()=>{const C=k=>{const _=k.target;(v==null?void 0:v.contains(_))&&E(k,w)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[b,v,w,E]),d.useEffect(j,[i,j]),D(v,A),D(x.content,A),t.jsx(St,{scope:r,scrollbar:v,hasThumb:n,onThumbChange:$(s),onThumbPointerUp:$(a),onThumbPositionChange:j,onThumbPointerDown:$(c),children:t.jsx(B.div,{...h,ref:T,style:{position:"absolute",...h.style},onPointerDown:O(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),g.current=v.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),N(C))}),onPointerMove:O(e.onPointerMove,N),onPointerUp:O(e.onPointerUp,C=>{const k=C.target;k.hasPointerCapture(C.pointerId)&&k.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=y.current,x.viewport&&(x.viewport.style.scrollBehavior=""),g.current=null})})})}),oe="ScrollAreaThumb",He=d.forwardRef((e,o)=>{const{forceMount:r,...i}=e,n=Le(oe,e.__scopeScrollArea);return t.jsx(K,{present:r||n.hasThumb,children:t.jsx(wt,{ref:o,...i})})}),wt=d.forwardRef((e,o)=>{const{__scopeScrollArea:r,style:i,...n}=e,s=R(oe,r),a=Le(oe,r),{onThumbPositionChange:c}=a,l=F(o,m=>a.onThumbChange(m)),u=d.useRef(void 0),f=ae(()=>{u.current&&(u.current(),u.current=void 0)},100);return d.useEffect(()=>{const m=s.viewport;if(m){const h=()=>{if(f(),!u.current){const x=jt(m,c);u.current=x,c()}};return c(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[s.viewport,f,c]),t.jsx(B.div,{"data-state":a.hasThumb?"visible":"hidden",...n,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:O(e.onPointerDownCapture,m=>{const x=m.target.getBoundingClientRect(),v=m.clientX-x.left,S=m.clientY-x.top;a.onThumbPointerDown({x:v,y:S})}),onPointerUp:O(e.onPointerUp,a.onThumbPointerUp)})});He.displayName=oe;var he="ScrollAreaCorner",Oe=d.forwardRef((e,o)=>{const r=R(he,e.__scopeScrollArea),i=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&i?t.jsx(Ct,{...e,ref:o}):null});Oe.displayName=he;var Ct=d.forwardRef((e,o)=>{const{__scopeScrollArea:r,...i}=e,n=R(he,r),[s,a]=d.useState(0),[c,l]=d.useState(0),u=!!(s&&c);return D(n.scrollbarX,()=>{var m;const f=((m=n.scrollbarX)==null?void 0:m.offsetHeight)||0;n.onCornerHeightChange(f),l(f)}),D(n.scrollbarY,()=>{var m;const f=((m=n.scrollbarY)==null?void 0:m.offsetWidth)||0;n.onCornerWidthChange(f),a(f)}),u?t.jsx(B.div,{...i,ref:o,style:{width:s,height:c,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function ne(e){return e?parseInt(e,10):0}function ze(e,o){const r=e/o;return isNaN(r)?0:r}function le(e){const o=ze(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=(e.scrollbar.size-r)*o;return Math.max(i,18)}function yt(e,o,r,i="ltr"){const n=le(r),s=n/2,a=o||s,c=n-a,l=r.scrollbar.paddingStart+a,u=r.scrollbar.size-r.scrollbar.paddingEnd-c,f=r.content-r.viewport,m=i==="ltr"?[0,f]:[f*-1,0];return Me([l,u],m)(e)}function ge(e,o,r="ltr"){const i=le(o),n=o.scrollbar.paddingStart+o.scrollbar.paddingEnd,s=o.scrollbar.size-n,a=o.content-o.viewport,c=s-i,l=r==="ltr"?[0,a]:[a*-1,0],u=ot(e,l);return Me([0,a],[0,c])(u)}function Me(e,o){return r=>{if(e[0]===e[1]||o[0]===o[1])return o[0];const i=(o[1]-o[0])/(e[1]-e[0]);return o[0]+i*(r-e[0])}}function Fe(e,o){return e>0&&e<o}var jt=(e,o=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},i=0;return function n(){const s={left:e.scrollLeft,top:e.scrollTop},a=r.left!==s.left,c=r.top!==s.top;(a||c)&&o(),r=s,i=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(i)};function ae(e,o){const r=$(e),i=d.useRef(0);return d.useEffect(()=>()=>window.clearTimeout(i.current),[]),d.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(r,o)},[r,o])}function D(e,o){const r=$(o);Qe(()=>{let i=0;if(e){const n=new ResizeObserver(()=>{cancelAnimationFrame(i),i=window.requestAnimationFrame(r)});return n.observe(e),()=>{window.cancelAnimationFrame(i),n.unobserve(e)}}},[e,r])}var Be=ke,Pt=Re,Nt=Oe;const Ye=d.forwardRef(({className:e,children:o,...r},i)=>t.jsxs(Be,{ref:i,className:M("relative overflow-hidden",e),...r,children:[t.jsx(Pt,{className:"h-full w-full rounded-[inherit]",children:o}),t.jsx(We,{}),t.jsx(Nt,{})]}));Ye.displayName=Be.displayName;const We=d.forwardRef(({className:e,orientation:o="vertical",...r},i)=>t.jsx(ue,{ref:i,orientation:o,className:M("flex touch-none select-none transition-colors",o==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",o==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:t.jsx(He,{className:"relative flex-1 rounded-full bg-border"})}));We.displayName=ue.displayName;const Bt=({title:e,data:o,isLoading:r=!1,valueFormatter:i=c=>c.toLocaleString(),icon:n,className:s,barColor:a="bg-primary"})=>{const c=Math.max(...o.map(u=>u.value),0),l=u=>u.toLowerCase().split(" ").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(" ");return t.jsxs(nt,{className:M("flex flex-col h-full shadow-sm hover:shadow-md transition-shadow min-w-0",s),children:[t.jsxs(st,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[n&&t.jsx("div",{className:"p-1.5 bg-muted rounded-md",children:n}),t.jsx(lt,{className:"text-sm font-medium",children:e})]}),t.jsx(ct,{className:"h-4 w-4 text-muted-foreground cursor-pointer hover:text-foreground"})]}),t.jsx(at,{className:"pt-4 flex-1 min-w-0",children:r?t.jsx("div",{className:"space-y-4",children:[...Array(5)].map((u,f)=>t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("div",{className:"h-4 w-1/3 bg-muted animate-pulse rounded"}),t.jsx("div",{className:"h-2 w-full bg-muted animate-pulse rounded"})]},f))}):o.length===0?t.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground p-4",children:"No data available"}):t.jsx(Ye,{className:"h-[240px]",children:t.jsx("div",{className:"space-y-6 pr-4",children:o.map((u,f)=>t.jsxs("div",{className:"flex flex-col gap-2 group min-w-0",children:[t.jsx("div",{className:"flex items-center justify-between text-sm gap-2",children:t.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[t.jsx("span",{className:"flex h-5 w-5 flex-shrink-0 items-center justify-center rounded-full bg-muted text-[10px] font-medium text-muted-foreground group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:f+1}),t.jsx("span",{className:"font-medium",title:u.name,children:l(u.name)})]})}),t.jsxs("div",{className:"space-y-1.5",children:[t.jsx(it,{value:c>0?u.value/c*100:0,className:M("h-1.5 w-full",a&&`[&>*]:${a}`)}),t.jsx("div",{className:"flex justify-end",children:t.jsx("span",{className:"text-xs font-semibold text-muted-foreground whitespace-nowrap",children:i(u.value)})})]})]},f))})})})]})};export{zt as D,Bt as R,Ht as c,Mt as u};
